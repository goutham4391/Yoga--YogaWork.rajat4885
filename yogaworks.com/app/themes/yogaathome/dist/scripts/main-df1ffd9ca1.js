!function(h,t){"use strict";var n="account-plan-management",u="d-none",i="active",o="invisible",s={},l="click."+n,r={},p=null,m=!1,d=!1,f=null,v=null,c=!1,g=null,b=!1,y="",w=0,C="";function $(e,t){this.element=h(e),this.options=h.extend({},h.fn[n].defaults,this.element.data(),t),this.options.url=this.options.url||yahAjax.ajaxurl,this.init()}$.prototype={init:function(){this.$form=this.element.find("[data-form-validate]"),this.$loading=this.element.find(".img-loading"),this.$formErrorMsg=this.element.find(".form-error-msg"),this.$headerPlan=this.element.find("[data-header-plan]"),this.$accountSubscriptionList=this.element.find("[data-account-plan-new]"),this.$deactivateSubscription=this.element.find("[data-item-deactivate-only]"),this.$cardWrapper=this.element.find(".account-plan-card-wrapper"),this.$planListItem=this.element.find("[data-plan-list-item]"),this.$promoGroup=this.element.find("[data-promo-group]"),this.$btnNext=this.element.find("[data-btn-next]"),this.$btnBack=this.element.find("[data-btn-back]"),this.$btnDeactivate=this.element.find("[data-btn-deactivate]"),this.$stepErrorMsg=this.element.find(".step-error-msg"),this.$btnAddCard=this.element.find("[data-add-card]"),this.$cardGroup=this.element.find("[data-card-group]"),this.$cardList=this.element.find("[data-card-list]"),this.$cardForm=this.element.find("[data-card-form]"),this.$cardDesc=this.element.find("[data-card-desc]"),this.$cardTotal=this.element.find("[data-card-total]"),this.$formFootnote=this.element.find("[data-form-footnote]"),this.$modalCoupon=h("#accountPlanCouponCode"),this.$btnCallCoupon=this.element.find('[data-target="#accountPlanCouponCode"]'),this.$footer=this.element.find("[data-account-plan-footer]"),this.arrDnone=this.element.find("."+u),this.arrInvisible=this.element.find("."+o),this.$btnSubmitFeedback=this.element.find("[data-btn-submit-feedback]"),this.$btnSubmitVoting=this.element.find("[data-btn-submit-voting]"),this.$btnClaimOffer=this.element.find("[data-btn-claim-offer]"),this.$step3Description=this.element.find("[data-description-step-3]"),this.$step4Description=this.element.find("[data-description-step-4]"),this.$stepDeactivate=this.element.find("[data-account-plan-deactivate]"),this.$stepSuccess=this.element.find("[data-account-plan-deactivate-success]"),this.$stepComplete=this.element.find("[data-account-plan-deactivate-complete]"),this.$stepError=this.element.find("[data-account-plan-deactivate-error]"),this.$checkoutError=this.element.find("[data-checkout-error]"),this.$zendeskConfirm=this.element.find("[data-account-plan-deactivate-zendesk]"),this.$zendeskCancelBtn=this.element.find("[data-zendesk-cancel-btn]"),this.$zendeskRedirectBtn=this.element.find("[data-btn-zendesk-redirect]"),this.$btnDeactivateReason=this.element.find("[data-btn-deactivate-reason]"),this.$deactivateReasonRadios=this.element.find("[data-deactivate-reason-radio]"),this.number=0,this.initEvents()},initEvents:function(){var a=this;a.element.on("show.bs.modal",function(e){a.showPlanItemEvent(e)}),a.element.on("hidden.bs.modal",function(){d=b=!1,a.$cardWrapper.removeClass(u),a.element.find(".account-plan-free-trial-wrapper").remove(),a.$form.find('input[name="is_free_trial_flow"]').val(0),c?(a.showLoadingImg(),location.reload()):a.resetCheckoutForm()}),a.$modalCoupon.on("hidden.bs.modal",function(){h(".modal.show").length&&h("body").addClass("modal-open")}),a.$form.find("input, textarea").on("input",function(){a.$formErrorMsg.html(""),a.$stepErrorMsg.html("")}),a.$planListItem.off(l).on(l,function(){a.planListItemEvent(h(this))}),a.$modalCoupon.off("coupon-code-apply."+n).on("coupon-code-apply."+n,function(e,t){a.applyPromoCodeEvent(t)}),a.$btnAddCard.off(l).on(l,function(){a.toggleCreditCardForm(!0,!1)}),a.$btnNext.off(l).on(l,function(){a.nextButtonEvent(h(this))}),a.$btnBack.off(l).on(l,function(){a.backButtonEvent()}),a.$btnDeactivate.off(l).on(l,function(e){e.preventDefault();var t=h(this),e=t.data();b=!0,e.subscriptionId=p,void 0!==e.btnStep&&1!==parseInt(e.btnStep)?a.deactivateEvent(t):a.getSubscriptionDetail(e,function(e){a.$btnDeactivateReason.data("on-save-offer",e.onSaveOffer),a.deactivateEvent(t)})}),a.$zendeskCancelBtn.off(l).on(l,function(e){e.preventDefault(),a.deactivateEvent(h(this))}),a.$zendeskRedirectBtn.off(l).on(l,function(e){e.preventDefault(),t.location.href=h(this).data("zendesk-url")}),this.$btnDeactivateReason.off(l).on(l,function(e){e.preventDefault(),b=!0,a.deactivateReason(h(this))}),a.$btnClaimOffer.off(l).on(l,function(e){e.preventDefault(),a.claimOfferEvent(h(this))}),a.$btnSubmitFeedback.off(l).on(l,function(e){e.preventDefault(),a.submitCancellationFeedbackEvent(h(this))}),a.$btnSubmitVoting.off(l).on(l,function(e){e.preventDefault(),a.element.modal("hide")}),a.changeStep(a.$accountSubscriptionList,0),a.changeStep(a.$stepDeactivate)},showPlanItemEvent:function(e){var n,i,t,a=this,s=h(e.relatedTarget),o=s.data("plan-type"),l=s.data("subscription-id"),r=s.data("checkout-only"),d=s.attr("data-edit-btn-plan"),c=h('[data-item-plan-type="'+o+'"]');if(a.$checkoutError.addClass(u),a.$formErrorMsg.removeClass("text-center"),h(".promo-code-label").remove(),m=!1,void 0!==r&&r)return a.renderCheckoutFormWithPromoIsApplied(s.data()),void s.remove();a.$btnNext.text("one-time"===o?"Next":"Change"),"one-time"===o?(n=s.data("purchased-plans").split(","),i=0,c.each(function(e,t){var a=h(t),t=a.data("item-plan-code");void 0!==t&&-1===h.inArray(t,n)&&(a.removeClass(u),i++)}),0===i?(h(".no-one-time-available-message").removeClass(u),a.$btnNext.prop("disabled",!0)):c.not(".d-none").find("input").first().trigger("click")):(c.removeClass(u),l?(a.$deactivateSubscription.html(""),e=s.data("plan-code"),s.data("deactivate-only")&&(r=s.text(),t=s.data("plan-desc"),s=s.data("price"),a.renderDeactivateSubscriptionOnlyItem(e,r,s,t)),t=h('[data-item-plan-type="'+o+'"][data-item-plan-code="'+e+'"]'),f=e,v=o,p=l,t.addClass("current-plan"),t.find(".account-plan-select-item-status").text("Current Plan").removeClass("account-plan-select-item-status--pink"),a.$modalCoupon.find('input[name="subscription_id"]').val(l),a.$btnNext.prop("disabled",!0)):a.$btnNext.text("Next"),(void 0!==d&&d?h('input[name="select_plan_code"][value="'+d+'"]'):c.not(".d-none, .current-plan").find("input").first()).trigger("click"))},renderDeactivateSubscriptionOnlyItem:function(e,t,a,n){this.$deactivateSubscription.attr("data-item-plan-code",e).html('<label class="sr-only" for="_plan_recurring_0"></label><input type="radio" name="select_plan_code" id="_plan_recurring_0" value="'+e+'"><div class="account-plan-select-item-wrapper d-block d-md-flex">  <div class="account-plan-select-item-info">    <p class="account-plan-select-item-status">Current Plan</p>    <p class="account-plan-select-item-title">'+t+'</p>    <div class="account-plan-select-item-desc">'+n+'</div>  </div>  <p class="account-plan-select-item-price" data-select-price>'+a+"</p></div>")},planListItemEvent:function(e){var t=this,a=e.hasClass("current-plan");e.hasClass(i)||(a?(t.$modalCoupon.find('input[name="plan_code"]').val(""),e.find(".account-plan-select-item-status").text("Current Plan").removeClass("account-plan-select-item-status--pink")):(f=e.data("item-plan-code"),v=e.data("item-plan-type"),t.$modalCoupon.find('input[name="subscription_id"]').val(p)),t.$form.find('input[name="plan_code"]').val(f),t.$modalCoupon.find('input[name="plan_code"]').val(f),t.$btnDeactivate.toggleClass(u,!a),t.$btnNext.prop("disabled",a),t.$planListItem.removeClass(i),e.addClass(i))},validateCheckoutEvent:function(e,n,i){var s=this;s.showLoadingImg(),h.fn.callAjaxGlobal({url:this.options.url,method:"POST",cache:!1,loader:!1,data:{action:"yah__validate_checkout",planCode:f,planType:v,promoCode:e,formCheck:g,subscriptionId:p}}).done(function(e){if(!e.success)return s.$formErrorMsg.html(e.data.message),void("function"==typeof n&&n());s.$headerPlan.addClass(o),s.$btnBack.removeClass(o),s.$promoGroup.removeClass(u);var t,a=e.data;s.$modalCoupon.find('input[name="checkout_case"]').val(a.checkoutCase),s.$form.find('input[name="checkout_case"]').val(a.checkoutCase),s.$form.find('input[name="plan_type"]').val(v),s.$accountSubscriptionList.find(".plan-display-name").html(a.planTitle),s.$accountSubscriptionList.find(".plan-display-subheadline").html(a.planSubheadline),s.$cardDesc.html(a.cartDescription),s.$cardTotal.html(a.cartDetail),"undefined"!==a.ccType&&null!==a.ccLastFour&&s.$cardList.find("[data-card-group]").html('<div class="form-radio">  <div class="form-group-wrap">    <label class="form-option">      <span class="card-tag"><i class="ico ico-cards ico-card-'+a.ccType+'"></i>        '+a.ccLastFour+'</span>      <input type="radio" name="use_cc_on_file" value="1" checked="">      <span class="checkedbox"></span>    </label>  </div></div>'),C=void 0!==a.footnote&&a.footnote?a.footnote:"",void 0!==a.checkoutCase&&3===parseInt(a.checkoutCase)?(s.$btnCallCoupon.hide(),s.$btnNext.text("Confirm")):(s.$btnCallCoupon.show(),s.$btnNext.text("Purchase")),0===a.payNow&&s.$btnCallCoupon.hide(),m=!!a.isPromoFlow&&(C&&s.$formFootnote.html(C).show(),a.promoCode&&(t="",(void 0!==a.isFreeTrial&&1===parseInt(a.isFreeTrial)||void 0===a.checkoutCase||3!==parseInt(a.checkoutCase))&&(t='<input type="hidden" name="couponCode" value="'+a.promoCode+'">'),s.$btnCallCoupon.hide().after('<p class="promo-code-label">'+t+'<span class="promo-code-text">'+a.promoCode+"</span></p>")),p=a.subscriptionId,!0),s.renderCreditCard(),s.hideLoadingImg(),"function"==typeof i&&i(e)}).fail(function(e,t,a){s.hideLoadingImg(),s.$formErrorMsg.html("Something went wrong. Please refresh this page and try again."),"function"==typeof n&&n()})},renderCreditCard:function(){this.$cardList.find('input[type="radio"]').length?this.toggleCreditCardForm(!1,!0):this.toggleCreditCardForm(!0,!1)},toggleCreditCardForm:function(e,t){this.$cardList.toggleClass(u,e),this.$cardForm.toggleClass(u,t),this.$cardList.find('input[name="use_cc_on_file"]').prop("checked",!e)},checkoutPlanEvent:function(e,n){var i=this;i.showLoadingImg(),e.push({name:"action",value:"yah__checkout_plan"},{name:"formCheck",value:g},{name:"subscription_id",value:p},{name:"isPromoFlow",value:m?1:0}),h.fn.callAjaxGlobal({url:this.options.url,method:"POST",cache:!1,loader:!1,data:h.param(e)}).done(function(e){return e.success?(c=!0,i.$headerPlan.addClass(o),i.$btnBack.addClass(o),i.$promoGroup.addClass(u),i.$btnNext.addClass(u),i.$formFootnote.html("").hide(),void i.hideLoadingImg()):(i.$formErrorMsg.html(e.data.message),void("function"==typeof n&&n()))}).fail(function(e,t,a){i.hideLoadingImg(),i.$formErrorMsg.html("Something went wrong. Please refresh this page and try again."),"function"==typeof n&&n()})},applyPromoCodeEvent:function(e){var t=this,a=this.element,n=this.$btnCallCoupon,i=h('<p class="promo-code-label"></p>'),s=e.promo_code,o=e.plan_data;r={title:t.$accountSubscriptionList.find(".plan-display-name").html(),desc:t.$accountSubscriptionList.find(".plan-display-subheadline").html(),totalDetail:t.$cardTotal.html(),noCcRequired:void 0!==e.noccrequired&&e.noccrequired,useCcOnFile:t.$cardList.find('input[name="use_cc_on_file"]').is(":checked")},i.append('<input type="hidden" name="couponCode" value="'+s+'"><span class="promo-code-text">'+s+'</span><span class="icon-close"></span>'),n.hide().after(i),t.$cardTotal.find(".pay-now span").html(e.payNow),t.$modalCoupon.modal("hide"),void 0!==e.discount?(t.$cardTotal.find(".total-detail span").html(e.credit),t.$cardTotal.find(".total-detail").append("<p>- Discount: "+e.discount+"</p>"),""!==C&&(t.$cardTotal.find(".account-discount").remove(),t.$formFootnote.html(C).show())):t.$cardTotal.append('<div class="total-detail">promo applied!</span>'),void 0!==e.subtotal&&t.$cardTotal.find("span.mid-month-price").html(e.subtotal),t.prepareFreeTrialFlow(e),a.find(".icon-close").on(l,function(){t.$cardDesc.removeClass(u),r.noCcRequired&&(t.$cardList.removeClass(u),t.$cardForm.addClass(u),t.$formErrorMsg.html("")),r.noCcRequired=!1,t.$accountSubscriptionList.find(".plan-display-name").html(r.title),t.$accountSubscriptionList.find(".plan-display-subheadline").html(r.desc),t.$cardTotal.html(r.totalDetail).removeClass(u),t.$form.find('input[name="plan_code"]').val(f),t.$formFootnote.html("").hide(),(r.useCcOnFile||void 0!==e.noccrequired&&e.noccrequired)&&t.$cardList.find('input[name="use_cc_on_file"]').prop("checked",!0),i.remove(),n.show()}),r.noCcRequired&&(t.$accountSubscriptionList.find(".plan-display-name").html(o.name),t.$accountSubscriptionList.find(".plan-display-subheadline").html(o.desc),t.$form.find('input[name="plan_code"]').val(e.plan_code),t.$cardList.find('input[name="use_cc_on_file"]').prop("checked",!1),t.$cardList.addClass(u),t.$cardForm.addClass(u),t.$cardDesc.addClass(u),t.$cardTotal.addClass(u),t.$formFootnote.html("").hide(),t.resetCard())},renderCheckoutFormWithPromoIsApplied:function(e){var t=this,a=e.promoCode;f=e.planCode,v=e.planType,g=t.$btnNext.data("form-check"),p=null,t.validateCheckoutEvent(a,function(e){t.$headerPlan.addClass(o),t.hideLoadingImg(),t.$btnNext.addClass(u),t.$checkoutError.removeClass(u),t.$formErrorMsg.addClass("text-center")},function(e){t.$checkoutError.addClass(u),t.$formErrorMsg.removeClass("text-center"),t.$btnBack.addClass(o),t.number=1,t.changeStep(t.$accountSubscriptionList,t.number),t.$form.find('input[name="plan_code"]').val(f),t.prepareFreeTrialFlow(e.data),h("body").addClass("modal-open")})},prepareFreeTrialFlow:function(e){var t=this;void 0!==e.isFreeTrial&&1===parseInt(e.isFreeTrial)&&(d=!0,t.$headerPlan.removeClass(o),t.$btnNext.text("Start Free Trial"),t.$btnBack.addClass(o),t.$cardWrapper.parent().append('<div class="account-plan-free-trial-wrapper">  <div class="account-plan-select-item">    <input type="radio" name="free-trial-plan" id="free-trial-plan" value="'+e.planCode+'">    <div class="account-plan-select-item-wrapper d-block d-md-flex">      <div class="account-plan-select-item-info">        <p class="account-plan-select-item-status account-plan-select-item-status--pink"></p>        <p class="account-plan-select-item-title">'+e.planTitle+'</p>        <div class="account-plan-select-item-desc">'+e.planSubheadline+'</div>      </div>      <p class="account-plan-select-item-price">'+e.planPrice+"</p>    </div>  </div></div>"),t.$cardWrapper.addClass(u),t.element.find("#free-trial-plan").trigger("click"),t.$form.find('input[name="is_free_trial_flow"]').val(1),t.$form.find('input[name="plan_code"]').val(e.planCode),t.element.find(".icon-close").remove())},showLoadingImg:function(){this.$loading.removeClass(u),this.$form.addClass(u),this.$formErrorMsg.html(""),this.$stepErrorMsg.html("")},hideLoadingImg:function(){this.$loading.addClass(u),this.$form.removeClass(u)},nextButtonEvent:function(e){var t=this;if(t.number+=1,g=e.data("form-check"),d||t.$btnNext.text("Purchase"),1===t.number)t.validateCheckoutEvent(null,function(){--t.number,t.changeStep(t.$accountSubscriptionList,t.number),t.hideLoadingImg(),t.$btnNext.text("one-time"===v||null===p?"Next":"Change")});else if(2===t.number&&t.$cardForm.is(":visible")&&!t.$form["form-validate"]("handleValidate").valid())return void--t.number;t.number===t.$accountSubscriptionList.length-1&&(e=t.$form.serializeArray(),t.checkoutPlanEvent(e,function(){--t.number,t.changeStep(t.$accountSubscriptionList,t.number),t.hideLoadingImg()})),t.changeStep(t.$accountSubscriptionList,t.number)},backButtonEvent:function(){var e=this;e.$zendeskConfirm.addClass(u),b?4===w||3===w?(w--,e.changeDeactivateStep(w)):(e.number=0,e.changeStep(e.$accountSubscriptionList,e.number),e.$footer.removeClass(u),e.$headerPlan.removeClass(o),e.$stepDeactivate.addClass(u),e.$btnBack.addClass(o)):(--e.number,e.$formErrorMsg.html(""),e.$stepErrorMsg.html(""),e.$promoGroup.find(".icon-close").trigger(l),e.number<1&&(e.$headerPlan.removeClass(o),e.$btnBack.addClass(o),e.$promoGroup.addClass(u),e.$btnNext.text("one-time"===v||null===p?"Next":"Change"),e.resetCard()),e.changeStep(e.$accountSubscriptionList,e.number))},changeStep:function(e,t){e.addClass(u),e.eq(t).removeClass(u)},resetCheckoutForm:function(){this.element.find("."+u).removeClass(u),this.element.find("."+o).removeClass(o),this.element.find("."+i).removeClass(i),this.arrDnone.addClass(u),this.arrInvisible.addClass(o),this.$formErrorMsg.html(""),this.$stepErrorMsg.html(""),this.$formFootnote.html("").hide(),this.resetCard(),this.element.find(".icon-close").triggerHandler("click"),this.$planListItem.filter('[data-select-current="1"]').last().triggerHandler("click"),this.number=0,this.changeStep(this.$accountSubscriptionList,this.number),this.changeStep(this.$stepDeactivate)},resetCard:function(){this.$form.find("label.error").html(""),this.$cardForm.find("input").val(""),this.$cardForm.find(".ico.ico-cards").removeClass().addClass("ico ico-cards"),this.element.find(".validate-error").hide()},getSubscriptionDetail:function(e,t){var a=this;a.showLoadingImg(),a.$stepErrorMsg.html(""),h.fn.callAjaxGlobal({url:a.options.url,method:"POST",cache:!1,loader:!1,data:e}).done(function(e){a.hideLoadingImg(),"function"==typeof t&&t(e.data)}).fail(function(e,t,a){})},deactivateEvent:function(t){var e,a=this,n=t.data("btn-step");w=n,a.$zendeskConfirm.addClass(u),void 0===n||""===n?a.cancelSubscriptionEvent(t):1===parseInt(n)||2===parseInt(n)?(a.$footer.addClass(u),a.$headerPlan.addClass(o),a.$accountSubscriptionList.addClass(u),a.$btnBack.removeClass(o),a.changeDeactivateStep(n)):3===parseInt(n)?((e=t.data()).subscriptionId=p,e.selectedReason=y,a.getCancellationFlowData(e,function(e){e.success?void 0!==e.data.showOffer&&e.data.showOffer?(s=e.data,a.renderSelectList(),void 0!==s.currentPlan&&null===s.currentPlan&&(n++,w=3),a.changeDeactivateStep(n)):(c=!0,t.closest(".account-plan-status").addClass(u),t.closest(".account-plan-status").next().addClass(u),a.showStatusDeactivate(!0,!1,!0)):a.$stepErrorMsg.html(e.data.message)})):4===parseInt(n)&&(void 0!==s.onDemandOffer&&s.onDemandOffer?a.changeDeactivateStep(n):a.cancelSubscriptionEvent(t))},deactivateReason:function(e){var t=this,a=t.$deactivateReasonRadios.find("input:checked"),n=a.data("reason-id"),i=e.data("on-save-offer");void 0===n?location.reload():(y=a.parent(".radio-wrapper").find("span").text(),n=parseInt(n),t.$btnBack.addClass(o),1===n||3===n||4===n||6===n||7===n?void 0!==i&&1===parseInt(i)?t.cancelSubscriptionEvent(e,{action:e.data("cancel-action"),formCheck:e.data("cancel-form-check")}):t.deactivateEvent(e):2===n||5===n?(t.element.find(".account-plan-status").addClass(u),t.$zendeskConfirm.removeClass(u)):(w=2,t.changeDeactivateStep(2)))},changeDeactivateStep:function(e){this.$stepDeactivate.addClass(u),this.$stepDeactivate.parent().find('[data-step="'+e+'"]').removeClass(u)},submitCancellationFeedbackEvent:function(e){var t=this,a=e.closest(".account-plan-status"),n=e.data(),e=a.find('textarea[name="feedback-message"]').val();1===parseInt(n.isFeedbackOnly)&&e.length<1?t.$stepErrorMsg.html("Please fill in the details to submit your ticket!"):(n.feedbackMessage=e,n.selectedReason=y,n.subscriptionId=p,t.submitCancellationFeedback(n,function(e){void 0!==e.isFeedbackOnly&&e.isFeedbackOnly?(a.addClass(u),t.showStatusDeactivate(!1,!0,!0)):t.element.modal("hide")}))},submitCancellationFeedback:function(e,t){var a=this;a.showLoadingImg(),a.$stepErrorMsg.html(""),h.fn.callAjaxGlobal({url:a.options.url,method:"POST",cache:!1,loader:!1,data:e}).done(function(e){c=!0,a.hideLoadingImg(),"function"==typeof t&&t(e.data)}).fail(function(e,t,a){})},claimOfferEvent:function(e){var t=this,a=e.data(),e=e.closest(".account-plan-select").find('input[type="radio"]:checked');a.subscriptionId=p,a.planCode=e.val(),a.promoCode=e.data("promo-code"),a.selectedReason=y,t.claimOffer(a,function(e){e.success?(c=!0,t.$stepSuccess.removeClass(u)):(t.$stepError.removeClass(u),t.$stepError.find(".deactivate-error-msg").html(e.data.message)),t.$btnBack.addClass(o)})},claimOffer:function(e,t){var n=this;n.showLoadingImg(),n.$stepErrorMsg.html(""),n.changeDeactivateStep(-1),h.fn.callAjaxGlobal({url:n.options.url,method:"POST",cache:!1,loader:!1,data:e}).done(function(e){n.hideLoadingImg(),"function"==typeof t&&t(e)}).fail(function(e,t,a){n.hideLoadingImg(),n.$stepError.removeClass(u),n.$stepError.find(".deactivate-error-msg").html("Something went wrong! Please refresh this page and try again."),n.$btnBack.addClass(o)})},getCancellationFlowData:function(e,t){var a=this;a.showLoadingImg(),a.$stepErrorMsg.html(""),h.fn.callAjaxGlobal({url:a.options.url,method:"GET",cache:!1,loader:!1,data:e}).done(function(e){a.hideLoadingImg(),"function"==typeof t&&t(e)}).fail(function(e,t,a){})},cancelSubscriptionEvent:function(e,t){var a=this,e=e.data();void 0!==t&&t&&(e=t),e.subscriptionId=p,e.selectedReason=y,a.cancelSubscription(e,function(e){e.success?(c=!0,a.changeDeactivateStep(-1),a.$stepComplete.removeClass(u),a.$btnBack.addClass(o)):a.$stepErrorMsg.html(e.data.message)})},cancelSubscription:function(e,t){var a=this;a.showLoadingImg(),a.$stepErrorMsg.html(""),h.fn.callAjaxGlobal({url:a.options.url,method:"POST",cache:!1,loader:!1,data:e}).done(function(e){a.hideLoadingImg(),"function"==typeof t&&t(e)}).fail(function(e,t,a){})},showStatusDeactivate:function(e,t,a){this.$stepSuccess.toggleClass(u,e),this.$stepComplete.toggleClass(u,t),this.$stepError.toggleClass(u,a),this.$btnBack.addClass(o)},renderSelectList:function(){function e(e,t){if(void 0!==e&&e&&void 0!==e.planCode){var a=t?"recurring_plan_code":"ondemand_plan_code";return void 0!==e.planSubDesc&&e.planSubDesc&&(t?n.$step3Description:n.$step4Description).html(e.planSubDesc),'<div class="account-plan-select-item">  <input type="radio" name="'+a+'" value="'+e.planCode+'" data-promo-code="'+e.promoCode+'">  <div class="account-plan-select-item-wrapper d-block d-md-flex">    <div class="account-plan-select-item-info">      <span class="account-plan-select-item-status  account-plan-select-item-status--pink">'+e.planSubHeadline+'</span>      <p class="account-plan-select-item-title">'+e.planName+"</p>      <div>"+e.planDesc+'</div>    </div>    <p class="account-plan-select-item-price" data-select-price>'+e.planPrice+"</p>  </div></div>"}return""}var n=this,t=n.element.find("[data-recurring-offer]"),a=n.element.find("[data-on-demand-offer]"),i=void 0!==s&&s?s:{};t.html(e(i.currentPlan,!0)),t.find("input:radio").prop("checked",!0),a.html(e(i.onDemandOffer,!1)),a.find("input:radio").prop("checked",!0)},destroy:function(){h.removeData(this.element[0],n)}},h.fn[n]=function(t,a){return this.each(function(){var e=h.data(this,n);e?e[t]&&e[t](a):h.data(this,n,new $(this,t))})},h.fn[n].defaults={url:""},h(function(){h("[data-"+n+"]")[n]()})}(jQuery,window),function(o){"use strict";var n="preferences",a={};function i(e,t){this.element=o(e),this.options=o.extend({},o.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.$inputPreferences=this.element.find(this.options.dataInputPreferences),this.$inputActive=null,this.getPreferenceData(),this.searchTagEvent()},searchTagEvent:function(){var t=this;t.element.on("click",".tagsinput",function(){var e=o(this).find("input");(t.$inputActive=e).autocomplete("search")})},initTagsInput:function(){var s=this;o.each(a,function(e,t){var a,n,e=o(s.options.dataInputPreferences+'[data-preferences-name="'+e+'"]'),i=e.closest(".content-group").find(".ui-autocomplete-wrapper");e.autocomplete({source:t.options}).val(t.selected),e.tagsInput({placeholder:s.options.tagsInputPlaceholder,autocomplete:{appendTo:i[0],delay:500,source:t.options,minLength:0,open:function(){void 0!==a&&n.destroy(),i.find(".ui-autocomplete > li").wrapAll(o('<div class="scroll-panel"></div>').css({"max-height":"calc(100vh - 400px)",width:o(".ui-autocomplete").width()})),a=i.find(".scroll-panel").jScrollPane(),n=a.data("jsp")},close:function(e,t){n.destroy(),a=void 0}},onAddTag:function(e,t){s.updatePreferenceData(o(e))},onRemoveTag:function(e,t){s.updatePreferenceData(o(e))}})})},getPreferenceData:function(){var t=this;o.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"GET",loader:!0,data:{action:"yah_get_preferences"}}).done(function(e){e&&e.success&&(a=e.data.dataPreferences,t.initTagsInput())}).fail(function(e,t,a){})},updatePreferenceData:function(e){var t=e.attr(this.options.dataPreferencesName),a=e.data(this.options.dataFormCheck);o.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:"yah_update_preferences",preferencesName:t,data:e.val(),formcheck:a},loader:!0}).done(function(e){}).fail(function(e,t,a){})},destroy:function(){o.removeData(this.element[0],n)}},o.fn[n]=function(t,a){return this.each(function(){var e=o.data(this,n);e?e[t]&&e[t](a):o.data(this,n,new i(this,t))})},o.fn[n].defaults={tagsInputPlaceholder:"None selected.",dataInputPreferences:"[data-suggest-preferences]",dataPreferencesName:"data-preferences-name",dataFormCheck:"formcheck"},o(function(){o("[data-"+n+"]")[n]()})}(jQuery,window),function(n){"use strict";var i="profile";function s(e,t){this.element=n(e),this.options=n.extend({},n.fn[i].defaults,this.element.data(),t),this.init()}s.prototype={init:function(){this.cacheDOM(),this.handleEvent()},cacheDOM:function(){this.input=this.element.find(".form-control"),this.btnEditProfile=this.element.find(".btn-edit-profile"),this.btnDeleteProfile=this.element.find(".btn-delete-avatar")},handleEvent:function(){this.input.on("input",function(){var e=n(this);e.data("text-content")!=e.val()?(e.siblings(".btn-small").removeClass("d-none"),e.addClass("text-change")):(e.siblings(".btn-small").addClass("d-none"),e.removeClass("text-change"))}),this.input.on("blur",function(){n(this).scrollTop(0)})},destroy:function(){n.removeData(this.element[0],i)}},n.fn[i]=function(t,a){return this.each(function(){var e=n.data(this,i);e?e[t]&&e[t](a):n.data(this,i,new s(this,t))})},n.fn[i].defaults={},n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(d,c){"use strict";var n="upload-avatar";function i(e,t){this.element=d(e),this.options=d.extend({},d.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.cacheDOM(),this.handleEvent()},cacheDOM:function(){this.input=this.element.find("input.file-input"),this.avatarEl=d("body").find("img.avatar-img"),this.$btnDeleteAvatar=this.element.find(".btn-delete-avatar"),this.$btnConfirmDeleteAvatar=d(document).find(".del-avatar-confirm")},handleEvent:function(){this.onUploadAvatar(),this.onConfirmDeleteAvatar()},onUploadAvatar:function(){var i=this,e=i.element,s=i.avatarEl,o=e.find(".upload-avatar-result"),l=i.options.fileSizeLimit||2097152,r=["image/gif","image/jpeg","image/png"];o.html("").addClass("d-none"),i.element.on("submit",function(e){e.preventDefault();var t,a,n=d(this).find('input[type="file"]')[0].files[0],e=Math.round(l/1024/1024);r.includes(n.type)?n.size>l?o.html("This profile image is too large to upload. Please use an image smaller than "+e+"MB.").removeClass("d-none"):(t=d('<div style=" width: 1%; height: 15px; background-color: #ff7a00; position: fixed; z-index: 10000; bottom: 0; "></div>'),a=d('<div style=" width: 100%; height: 30px; text-align: right; position: fixed; z-index: 10001; bottom: 2em; "><h3 style="color: #ff7a00; font-family: sans-serif">Uploading image...</h3></div>'),d("body").append(t).append(a),o.html("Uploading image...").removeClass("d-none"),d.ajax({url:yahAjax.ajaxurl,type:"POST",processData:!1,contentType:!1,data:new FormData(this),cache:!1,success:function(e){t.remove(),a.remove(),e.success?void 0!==e.data.imgBase64&&""!==e.data.imgBase64&&(s.attr("src",e.data.imgBase64),o.html("").addClass("d-none"),i.$btnDeleteAvatar.css("display","block")):o.html(e.data.message).removeClass("d-none")},error:function(e){t.remove(),a.remove(),o.html("Unable to upload file.").removeClass("d-none")},xhr:function(){var e=new c.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){e.lengthComputable&&(e=e.loaded/e.total,t.css("width",100*e+"%"))},!1),e}})):o.html("Please upload only image file.").removeClass("d-none")}),this.input.on("change",function(){e.submit()})},onConfirmDeleteAvatar:function(){var t=this;this.$btnConfirmDeleteAvatar.off("click").on("click",function(e){e.preventDefault();d(e.target);d.fn.callAjaxGlobal({method:"POST",url:yahAjax.ajaxurl,dataType:"json",data:{action:"delete_avatar",formcheck:t.$btnDeleteAvatar.attr("data-form-check")},loader:!0}).done(function(e){e.success&&(d(".avatar-img").attr("src",t.$btnDeleteAvatar.attr("data-default-img")),d(".file-input").val(""),t.$btnDeleteAvatar.css("display","none"))}).fail(function(e,t,a){console.log("smth going wrong: "+a)})})},destroy:function(){d.removeData(this.element[0],n)}},d.fn[n]=function(t,a){return this.each(function(){var e=d.data(this,n);e?e[t]&&e[t](a):d.data(this,n,new i(this,t))})},d.fn[n].defaults={fileSizeLimit:2097152},d(function(){d("[data-"+n+"]")[n]()})}(jQuery,window),function(o){"use strict";var n="nav-tabs";function i(e,t){this.element=o(e),this.options=o.extend({},o.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.tabs(),this.display()},display:function(){var e=this.element,t=e.prev(".yoga-challenge-loader"),a=e.find(".tab-link"),n=e.find(".tab-pane"),i=e.find(".ywc-hero-image"),s=e.find(".ywc-timeline");e.hide(),this.setTabActive(a),this.setTabActive(n),t.hide(),i.show(),s.show(),e.show()},setTabActive:function(e){var t=new Date,a=t.getFullYear(),n=(t.getMonth()+1).toString(),n=1<n.length?n:"0"+n,t=t.getDate().toString(),i=a+"-"+n+"-"+(1<t.length?t:"0"+t),s=!1;e.removeClass("selected-day"),e.each(function(e,t){t=o(t);t.data("tab-date")===i&&(s=!0,t.addClass("selected-day"))}),!1===s&&e.first().addClass("selected-day")},tabs:function(){var n=this.element,e=n.find("[data-tab]"),i=o(".video-items");e.on("click",function(e){e.preventDefault();var t=o(this),e=t.attr("data-tab");n.find(".tab-nav li, .tab-list .tab-pane").removeClass("selected-day"),t.addClass("selected-day"),n.find("#"+e).addClass("selected-day"),i.slick("setPosition",0),i.find("[data-textpanel]").textpanel("reInit");e=o(".tab-pane#"+e).data("day-img");o(".hero-image").prop("src",e);var a=0,e=o(".selected-day .question-answer li a");e.each(function(e,t){o(t).innerHeight()>a&&(a=o(t).innerHeight())}),e.each(function(e,t){o(t).css("height",a+"px")})})},destroy:function(){o.removeData(this.element[0],n)}},o.fn[n]=function(t,a){return this.each(function(){var e=o.data(this,n);e?e[t]&&e[t](a):o.data(this,n,new i(this,t))})},o.fn[n].defaults={key:"value",onCallback:null},o(function(){var e=o("[data-"+n+"]");e.on("customEvent",function(){}),e[n]({key:"custom"})})}(jQuery,window),function(i,n){"use strict";var s="class-schedule",e="click."+s,t="opened";function o(e,t){this.element=i(e),this.options=i.extend({},i.fn[s].defaults,this.element.data(),t),this.isHideFilter=this.options.isHideFilter,this.useBrowserTime=this.options.useBrowserTime,this.useEndTime=this.options.useEndTime,this.$filterCollapseBtn=this.element.find("[data-filter-collapse-button]"),this.$filterWrap=this.element.find(".schedule-filters-wrap"),this.$filterForm=this.$filterWrap.find("form"),this.$filterResetBtn=this.$filterForm.find("[data-reset-button]"),this.$filterDate=this.$filterForm.find("#filter-date"),this.$instructorAutocomplete=this.$filterForm.find("#filter-instructor-auto"),this.$selectedInstructorId=this.$filterForm.find("#filter-instructor-id"),this.$actionsWrap=this.element.find(".schedule-actions-wrap"),this.$resultTotalWrap=this.$actionsWrap.find(".result-total-wrap"),this.$printScheduleBtn=this.$actionsWrap.find(".btn-print"),this.$ajaxLoader=this.element.find(".schedule-loader-wrap .location-loader"),this.$scheduleClasses=this.element.find(".schedule-classes-wrap"),this.instructorListJson=null,this.scheduleHtmlForPrint="",this.notFoundText="We’re sorry, no classes "+(this.isHideFilter?"found.":"match your search criteria."),this.errorMessage="There was an error with this request. Please try again soon.",this.init()}o.prototype={init:function(){var t=this;t.initCalendar(),t.initClassSchedule(),t.$printScheduleBtn.on("click",function(){var e=i("html");i("body").addClass("d-print-none"),e.find("#print-area").remove(),e.append('<div id="print-area">'+t.scheduleHtmlForPrint+"</div>"),n.print()})},initCalendar:function(){var a=this;a.isHideFilter||(a.$filterDate.datepicker({dateFormat:"mm.dd.yy",minDate:0,showOn:"button",buttonImageOnly:!0,buttonImage:a.options.calendarIcon,onSelect:function(e,t){a.initClassSchedule()},beforeShow:function(e,t){i("#ui-datepicker-div").addClass("class-schedule-calendar-ui"),setTimeout(function(){t.dpDiv.outerWidth(a.$filterDate.outerWidth())},0)}}).datepicker("setDate",new Date),a.$filterDate.on("click",function(){i(this).datepicker("show")}),i("div.ui-datepicker").on("click",function(){a.$filterDate.length&&i(this).outerWidth(a.$filterDate.outerWidth())}))},initClassSchedule:function(){var t=this;t.getScheduleClasses(function(e){t.renderSchedule(e),t.initEvents()})},initEvents:function(){var a=this;a.$filterCollapseBtn.on("click",function(){a.$filterWrap.toggleClass(t,!a.$filterWrap.hasClass(t))}),a.$filterResetBtn.off(e).on(e,function(e){e.preventDefault(),a.$filterForm.trigger("reset"),a.$filterForm.find("input[type=hidden]").each(function(){this.value=""}),a.$filterDate.datepicker().datepicker("setDate",new Date),a.initClassSchedule()}),i(document).on("click","[data-class-collapse-button]",function(){var e=i(this).closest(".class-row");e.toggleClass(t,!e.hasClass(t))}),i(n).on("refresh-reservations",function(e,t){a.getReservationsStatus(t)})},renderSchedule:function(e){var t=this,a=e.classesData?JSON.parse(e.classesData):[],n=e.instructorData?JSON.parse(e.instructorData):[],i=null!==a?a.length:0;if(t.scheduleHtmlForPrint=t.options.locationName?'<h1 class="location-name">'+t.options.locationName+"</h1>":"",t.scheduleHtmlForPrint+="<table>",0<i){for(var s=t.$selectedInstructorId.val(),e=moment(t.getCurrFormattedDate(),"YYYY-MM-DD"),o=(e.isSame(moment(),"day")?moment():e).unix(),l=0,r=0;r<i;r++){var d,c,h,u,p=a[r],m=moment.tz(p.startDateTime,p.timeZone),f=t.useBrowserTime?m.tz(moment.tz.guess()).format("YYYY-MM-DD"):p.startDate,v=t.useEndTime?p.endTimeZonedStamp:p.startTimeZonedStamp,g=!s||parseInt(s)===parseInt(p.staffId),v=o<v&&g&&!0,g=t.$scheduleClasses.find('[data-date="'+f+'"]');v&&(l++,(void 0===g||g.length<1)&&(d=m.format("MMMM DD"),c=m.format("dddd | z"),t.$scheduleClasses.append(t.renderClassDayWrap(f,d,c)),g=t.$scheduleClasses.find('[data-date="'+f+'"]'),t.scheduleHtmlForPrint+='<tr><td colspan="2" class="schedule-date">  <span class="day-copy">'+d+'</span><span class="day-of-week">'+c+"</span></td></tr>"),f=(p.isSub?'<span class="substitute">'+p.subStaff+"</span>":"")+p.staff,d=p.desc?'<div class="info-tooltip d-none d-sm-inline-block">  <span class="ico-info"></span>  <div class="tooltip-text-wrap"><div class="tooltip-text">'+p.desc+"</div></div></div>":"",t.useBrowserTime&&void 0!==p.startDateTimeZoned&&(c=moment(p.startDateTimeZoned),h=moment(p.startDateTimeZoned).add(p.duration,"minutes"),u=moment.tz.guess(),p.startTime=c.tz(u).format("h:mm"),p.startMeridien=c.tz(u).format("a"),p.endTime=h.tz(u).format("h:mm"),p.endMeridien=h.tz(u).format("a")),h=p.isCanceled?"class-row cancelled-class-item":"class-row",u=p.isCanceled?"canceled":"reserve",g.append('<div class="'+h+'" data-mt-class-id="'+p.classId+'">  <div class="container">    <div class="row">      <div class="col-3 col-sm-2 col-md-2 class-time-wrap">        <div class="class-time">          '+p.startTime+'<span class="midday">'+p.startMeridien+'</span>          <span class="end-time"> -'+p.endTime+'<span class="midday">'+p.endMeridien+'</span></span>        </div>        <div class="class-time-desc d-none d-sm-block">Starts</div>      </div>      <div class="col-3 col-sm-2 col-md-2 class-time-wrap d-none d-sm-block">        <div class="class-time ">'+p.endTime+'<span class="midday">'+p.endMeridien+'</span></div>        <div class="class-time-desc">Ends</div>      </div>      <div class="col-8 col-sm-5 col-md-5 class-title-wrap">        <div class="class-title">'+p.title+d+'</div>        <div class="class-teacher-name d-none d-sm-block">'+f+'</div>      </div>      <div class="col-12 col-sm-3 col-md-3 class-actions-wrap">        <button disabled="disabled" class="btn btn-reserve d-none d-sm-inline-block"                 data-mt-reserve-btn data-location-id="'+p.locId+'"                data-class-session-id="'+p.classId+'">'+u+'</button>      </div>      <div class="visible-xs arrow-wrap" data-class-collapse-button><span class="ico-arrow"></span></div>    </div>    <div class="row class-details-wrap">      <div class="col-12">        <div class="class-title">'+p.title+'</div>        <div class="class-teacher-name">'+f+'</div>        <div class="class-desc">'+p.desc+'</div>        <button class="btn btn-reserve"                 data-mt-reserve-btn data-location-id="'+p.locId+'"                data-class-session-id="'+p.classId+'">'+u+"   </button>      </div>    </div>  </div></div>"),t.scheduleHtmlForPrint+='<tr>  <td>      <span class="time">'+p.startTime+'</span><span class="midday">'+p.startMeridien+'</span> -       <span class="time">'+p.endTime+'</span><span class="midday">'+p.endMeridien+'</span>  </td>  <td class="title">'+p.title+'</span><div class="instructor">'+f+"</div></td></tr>")}0<l?(t.$resultTotalWrap.html("<span>"+l+"</span> Results Match the Search"),t.$actionsWrap.fadeIn(1e3),t.instructorListJson=n,t.initInstructorAutocomplete(),t.getReservationsStatus(null)):t.displayErrorMessage(t.notFoundText)}else t.displayErrorMessage(t.notFoundText);t.scheduleHtmlForPrint+="</table>"},renderClassDayWrap:function(e,t,a){return'<div class="schedule-day" data-date="'+e+'">  <div class="class-row day-header">    <div class="container">      <div class="row">        <div class="col-12">          <div class="day-copy">'+t+' <span class="day-of-week">'+a+"</span></div>        </div>      </div>    </div>  </div></div>"},initInstructorAutocomplete:function(){var a=this;a.$instructorAutocomplete.on("focus",function(){i(this).select()}).on("keyup",function(){0===a.$instructorAutocomplete.val().length&&a.$selectedInstructorId.val("")}).autocomplete({source:a.instructorListJson,minLength:0,appendTo:"#filter-instructor-container",open:function(){navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&i(".ui-autocomplete").off("menufocus hover mouseover"),i("#filter-instructor-container").find("> ul").css({left:"15px"})},select:function(e,t){e.preventDefault(),t.item&&(a.$selectedInstructorId.val(t.item.id),a.$instructorAutocomplete.val(t.item.label),a.initClassSchedule())}}).focus(function(){i(this).autocomplete("search",i(this).val())}).autocomplete("widget").addClass("select-dropdown"),a.$instructorAutocomplete.autocomplete("option",{source:a.instructorListJson})},getScheduleClasses:function(t){var n=this,e=n.options.locationId,a=n.getCurrFormattedDate(),i=n.useBrowserTime?moment(a,"YYYY-MM-DD").tz("America/Los_Angeles").format("YYYY-MM-DD"):a,a=n.options.formCheck;e&&(n.$scheduleClasses.html(""),n.$actionsWrap.hide(),n.processing(!0),n.callAjax({url:yahAjax.ajaxurl,dataType:"json",method:"GET",data:{action:"get_class_schedule",locationId:e,startDate:i,sortBy:n.useBrowserTime?"timestamp":"starttime",formCheck:a},loader:!0}).done(function(e){e.success?"function"==typeof t&&t(e.data):n.displayErrorMessage(n.notFoundText),n.processing(!1)}).fail(function(e,t,a){n.processing(!1),n.displayErrorMessage(n.errorMessage)}))},getReservationsStatus:function(t){var n=this;setTimeout(function(){n.$scheduleClasses.find(".btn-reserve").prop("disabled",!0),n.callAjax({url:yahAjax.ajaxurl,dataType:"json",method:"POST",data:{action:"mt_get_user_reservations",scheduleDate:n.getCurrFormattedDate(),formCheck:mtVars.formCheck},loader:!1}).done(function(e){n.$scheduleClasses.find(".btn-reserve").prop("disabled",!1),e.success&&(n.resetReserveButtons(),e=void 0!==e.data.reservations?e.data.reservations:[],i.each(e,function(e,t){var a=i('[data-mt-class-id="'+t.classId+'"]');a.length&&(a.addClass("reserved-class"),a.find(".btn-reserve").parent(".class-actions-wrap").prepend('<div class="reserved-copy">Reserved</div>'),a.find(".btn-reserve").removeClass("btn-reserve").addClass("btn-cancel").text("Cancel").removeAttr("data-mt-reserve-btn").attr({"data-mt-cancel-reserve-btn":"","data-reservation-id":t.id}),"check in"===t.status&&(a.find(".reserved-copy").text("Checked In"),a.find(".btn-reserve, .btn-cancel").prop("disabled",!0).attr("disabled")))})),"function"==typeof t&&t()}).fail(function(e,t,a){n.$scheduleClasses.find(".btn-reserve").prop("disabled",!1)})},500)},resetReserveButtons:function(){this.$scheduleClasses.find(".class-row").removeClass("reserved-class"),this.$scheduleClasses.find(".btn-cancel").removeClass("btn-cancel").addClass("btn-reserve").text("Reserve").attr("data-mt-reserve-btn","").removeAttr("data-mt-cancel-reserve-btn data-reservation-id"),this.$scheduleClasses.find(".reserved-copy").remove()},callAjax:function(e){var t=this.$ajaxLoader;return i.ajax({url:e.url,method:e.method||"GET",data:e.data||{},dataType:"json",beforeSend:function(){e.loader&&t.fadeIn()},complete:function(){e.loader&&t.fadeOut("slow")}})},displayErrorMessage:function(e){this.$scheduleClasses.html('<div class="container">  <div class="row">    <div class="col-12"><div class="error-wrap">'+e+"</div></div>  </div></div>").fadeIn()},getCurrFormattedDate:function(){if(this.isHideFilter)return moment().format("YYYY-MM-DD");var e=this.$filterDate.datepicker("getDate");return(e?moment(e):moment()).format("YYYY-MM-DD")},processing:function(e){this.$filterDate.prop("disabled",e),this.$instructorAutocomplete.prop("disabled",e),this.$filterResetBtn.prop("disabled",e)},destroy:function(){i.removeData(this.element[0],s)}},i.fn[s]=function(t,a){return this.each(function(){var e=i.data(this,s);e?e[t]&&e[t](a):i.data(this,s,new o(this,t))})},i.fn[s].defaults={},i(function(){i("[data-"+s+"]")[s]()})}(jQuery,window),function(o){"use strict";var n="comment",a="input."+n,e="click."+n,l=null,i=null;function s(e,t){this.element=o(e),this.options=o.extend({},o.fn[n].defaults,this.element.data(),t),this.options.url=this.options.url||yahAjax.ajaxurl,this.init()}s.prototype={init:function(){this.cacheDOM(),this.renderCommentList(),this.handleEvents(),this.convertCommentDate()},cacheDOM:function(){this.$blockDetail=this.element.find("[data-comment-block-detail]"),this.$commentItems=this.element.find("[data-comment-item]"),this.$inputComment=this.element.find("[data-enter-comment]"),this.$btnSave=this.element.find("[data-btn-save-comment]"),this.$btnTotal=this.element.find("[data-total]"),this.$modalReply=o("#reply-comment"),this.$inputReply=this.$modalReply.find("[data-reply-content]"),this.$btnReplyModal=this.$modalReply.find("[data-btn-submit]"),this.totalComment=this.$commentItems.length},handleEvents:function(){var t=this;this.element.on("click","[data-comment-item] .btn-reply",function(e){e.preventDefault(),i=o(this).closest("[data-comment-item]"),l=i.data("comment-id")}),this.$modalReply.on("hidden.bs.modal",function(){t.$inputReply.val(""),l=null}),this.$btnReplyModal.off(e).on(e,function(e){e.preventDefault(),t.handleReplyComment()}),this.$inputComment.off(a).on(a,function(){var e=o(this).val();t.$btnSave.toggleClass("active",0<e.length)}),this.$btnSave.off(e).on(e,function(e){e.preventDefault(),t.handleAddComment()}),this.$btnTotal.off(e).on(e,function(e){e.preventDefault(),t.showAllComments()})},handleReplyComment:function(){var t=this;0!==this.$inputReply.val().length&&this.postComment(this.$inputReply,function(e){t.renderComment(e,i,"append"),t.$modalReply.modal("hide"),t.updateHistoryState()})},handleAddComment:function(){var t=this;this.postComment(this.$inputComment,function(e){t.renderComment(e,t.$blockDetail,"prepend"),t.$inputComment.val("").trigger(a),t.updateHistoryState()})},updateHistoryState:function(){history.pushState("",document.title)},postComment:function(e,t){var a=e.data("video-id"),n=o.trim(e.val()),i=e.data("form-check"),s=!1;e.val(""),0<n.length&&!s&&(s=!0,o.fn.callAjaxGlobal({type:this.options.method,url:this.options.url,method:"POST",data:{action:"post_comment",videoId:a,commentId:l,comment:n,formCheck:i},cache:!1,loader:!0}).done(function(e){"function"==typeof t&&t(e),s=!1}).fail(function(e,t,a){}))},renderComment:function(e,t,a){var n,i,s;e.success?(n=e.data.commentData,i=t[0].hasAttribute("data-comment-item"),s='<div class="comment-item d-block" id="comment-'+n.commentId+'" data-comment-item="" data-comment-id="'+n.commentId+'">    <div class="comment-item-wrapper">        <div class="comment-item-wrapper__author">            <div class="comment-item-name">                <p>'+n.name+'</p>            </div>            <div class="comment-item-date">                <p data-comment-date="'+n.date+'">'+n.date+'</p>            </div>        </div>        <div class="comment-item-content">            <p>'+n.comment+"</p>        </div>"+(i?"":'<a class="btn-reply" href="#" data-toggle="modal" data-target="#reply-comment">Reply</a>')+"            </div></div>",e="",e=i?'<div class="comment-item-reply" style="display: none;" id="comment-'+n.commentId+'">'+s+"</div>":'<div class="comment-item" id="comment-'+n.commentId+'" data-comment-item     data-comment-id="'+n.commentId+'">'+s+"</div>",t[a](e),o("#comment-"+n.commentId).fadeIn(1e3),this.convertCommentDate()):console.log("Error scenario here...")},renderCommentList:function(){for(var e,t=Math.min(this.options.itemsToShow,this.totalComment),a=0;a<t;a++)this.$commentItems.eq(a).addClass("d-block");this.options.itemsToShow>=this.totalComment||0===this.totalComment.length?this.$btnTotal.hide():(e=parseInt(this.totalComment)-parseInt(this.options.itemsToShow),this.$btnTotal.children().text("Rest "+e+" Comments"))},showAllComments:function(){for(var e=this.options.itemsToShow;e<this.totalComment;e++)this.$commentItems.eq(e).fadeIn(1e3);this.$btnTotal.fadeOut(500)},convertCommentDate:function(){var t=this;o("[data-comment-date]").each(function(){var e=o(this).data("comment-date"),e=moment(e);o(this).html(e.format(t.options.dateFormat))})},destroy:function(){o.removeData(this.element[0],n)}},o.fn[n]=function(t,a){return this.each(function(){var e=o.data(this,n);e?e[t]&&e[t](a):o.data(this,n,new s(this,t))})},o.fn[n].defaults={method:"POST",itemsToShow:3,dateFormat:"MM/DD/YYYY",url:yahAjax.ajaxurl},o(function(){o("[data-"+n+"]")[n]()})}(jQuery,window);var Myw=Myw||{};Myw.Member={updateLike:function(e,t,a){jQuery.ajax({url:mywajax.ajaxurl,dataType:"json",method:"POST",data:{action:"like_video",wpId:e,liked:t},success:function(e){a(e)}})},updateArticleLike:function(e,t,a){jQuery.ajax({url:mywajax.ajaxurl,dataType:"json",method:"POST",data:{action:"like_article",wpId:e,liked:t},success:function(e){a(e)}})},postComment:function(e,t,a,n){jQuery.ajax({url:mywajax.ajaxurl,dataType:"json",method:"POST",data:{action:"post_comment",asset_id:e,title:t,comment:a},success:function(e){n(e)}})}},Myw.Common={post:function(e,t){jQuery.ajax({url:mywajax.ajaxurl,dataType:"json",method:"POST",data:e,success:function(e){t(e)}})},postConfirmPage:function(e,t,a){$title=jQuery("<input>").attr("name","title").attr("type","text").val(e),$tagline=jQuery("<input>").attr("name","tagline").attr("type","text").val(t),$form=jQuery("<form>").attr("method","post").attr("action",a).attr("style","display:none;").append($title).append($tagline).appendTo("body").submit()},postReactivatePage:function(e,t,a){$plan=jQuery("<input>").attr("name","plan").attr("type","text").val(e),$promo=jQuery("<input>").attr("name","promoCode").attr("type","text").val(t),$form=jQuery("<form>").attr("method","post").attr("action",a).attr("style","display:none;").append($plan).append($promo).appendTo("body").submit()},formatAuthorName:function(e,t){if(void 0===e||e.length<1)return"";var a=e.split(" ");return 1===a.length?e:a[0]+" "+a[1].substring(0,1)+(t?".":"")}},Myw.Reply={postReplyComment:function(e,t,a,n){jQuery.ajax({url:mywajax.ajaxurl,dataType:"json",method:"POST",data:{action:"myw_reply_comment",reply:e,commentId:t,postId:a},success:function(e){n(e)}})}},Myw.Edit={postEditComment:function(e,t,a,n,i){jQuery.ajax({url:mywajax.ajaxurl,dataType:"json",method:"POST",data:{action:"myw_edit_comment",reply:e,commentId:t,postId:a,userId:n},success:function(e){i(e)}})}},Myw.Delete={postDeleteComment:function(e,t,a){jQuery.ajax({url:mywajax.ajaxurl,dataType:"json",method:"POST",data:{action:"myw_delete_comment",commentId:e,userId:t},success:function(e){a(e)}})}},function(l,n){"use strict";var r,d="custom-select",c=l(n),h=l(document),u=(l("body"),40),p=38,m=27;function i(e,t){this.element=l(e),this.options=l.extend({},l.fn[d].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){var e,a,t,n,i=this,s=this.element,o=this.options;r=d+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4),o.cusStyle=s.data(d),this.vars={wrapper:s.closest(o.wrapper),dropdown:(e=s,t=l('<ul class="pay__formgroup-select-drop '+(a=o).dropdown+" "+a.cusStyle+'"></ul>'),n=[],e.children().each(function(){var t,e=l(this);e.is("option")?n.push('<li class="pay__formgroup-selectoption '+(e.is(":selected")?a.selected:"")+'" data-value="'+e.val()+'">'+e.text()+"</li>"):(t=['<li class="'+a.optGroup+'"><p>'+e.attr("label")+"</p><ul>"],e.children().each(function(){var e=l(this);t.push('<li class="'+(e.is(":selected")?a.selected:"")+'" data-value="'+e.val()+'">'+e.text()+"</li>")}),t.push("</ul></li>"),n.push(t.join("")))}),t.html(n.join("")).appendTo(l.fn[d].defaults.wrapper)),toggleBtn:s.siblings(o.button),optionLen:s.find("option").length-1,idx:0,isChange:!1,nameSp:r},this.vars.displayText=this.vars.wrapper.find(o.textDisplay),this.vars.toggleBtn.on("keydown."+r,function(e){var t=i.vars.idx;switch(e.which){case u:e.preventDefault(),i.setSelected(++t);break;case p:e.preventDefault(),i.setSelected(--t);break;case m:i.hideDropdown()}}),this.vars.dropdown.on("click."+r,"li",function(){var e=l(this),t=i.vars.dropdown.find("li:not(."+o.optGroup+")");e.hasClass(o.selected)||i.setSelected(t.index(e)),i.hideDropdown()}).on("focusin."+r,function(){i.vars.toggleBtn.addClass(o.focus)}).on("focusout."+r,function(){i.vars.toggleBtn.removeClass(o.focus)}),s.off("change."+r).on("change."+r,function(){i.vars.isChange=!0,i.setSelected(s.find("option").index(s.find(":selected")))}).trigger("change."+r)},showDropdown:function(){var e=this,t=this.element,a=this.options,n=this.vars.dropdown,i=this.vars.toggleBtn,s=t.data("width-override"),o=this.vars.wrapper.hasClass("disabled");n.is(":animated")||o||(e.vars.wrapper.addClass(a.focus),n.fadeIn(a.duration).add(i).addClass(a.focus),c.on("resize."+e.vars.nameSp,function(){"undefined"===s&&(s=t.outerWidth()),n.css({"max-width":s,"min-width":t.outerWidth(),top:e.calculateTop(t),left:t.next().offset().left})}).trigger("resize."+e.vars.nameSp),h.on("click."+e.vars.nameSp,function(){e.hideDropdown()}))},hideDropdown:function(){},setSelected:function(e,t){var a,n,i,s,o,l;void 0!==e&&(n=(a=this).element,i=a.options,s=a.vars.dropdown,o=a.vars.displayText,l=a.vars.optionLen,e=e<0?l:l<e?0:e,this.vars.isChange?this.vars.isChange=!1:n.find("option:eq("+e+")").prop("selected",!0).trigger("change"),o.text(n.find("option:eq("+e+")").text()),s.find("."+i.selected).removeClass(i.selected).end().find("li[data-value]:eq("+e+")").addClass(i.selected),a.vars.idx=e,t||a.element.triggerHandler("cusAfterChange"))},reInit:function(){var e=this,t=this.element;return e.vars.dropdown.remove(),e.vars.dropdown={},e.vars.toggleBtn.add(e.vars.dropdown).add(t).off("."+e.vars.nameSp),e.init(),this},destroy:function(){l.removeData(this.element[0],r)}},l.fn[d]=function(t,a){return this.each(function(){var e=l.data(this,d);e?e[t]?e[t](a):n.console&&console.log(t?t+" method is not exists in "+d:d+" plugin has been initialized"):l.data(this,d,new i(this,t))})},l.fn[d].defaults={optGroup:"group-select",wrapper:".pay__formgroup-select",dropdown:"select-dropdown",textDisplay:".select-text",button:".select-text",selected:"selected",focus:"focus",duration:400},l(function(){l("[data-"+d+"]")[d]()})}(jQuery,window),function(g,s){"use strict";var n="form-validate",a=/^(?!\s)(?!.*\s$)[a-zA-Z0-9\s()-]+$/,o=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[\w\W]{8,}$/,l=/^([a-zA-Z0-9_.+-])+\@(?!-)+(([a-zA-Z0-9-])+[a-z0-9]\.)+([a-zA-Z0-9]{2,4})+$/,r=/^([a-zA-Z0-9_.-])+\@(?!-)+(([a-zA-Z0-9-])+[a-z0-9]\.)+([a-zA-Z0-9]{2,4})+$/,d=/^[A-Za-z0-9 ]+$/,c="disabled",b="d-none",h="MM/YY",i=null,u=null,p=null,e="click."+n;function m(e,t){this.element=g(e),this.options=g.extend({},g.fn[n].defaults,this.element.data(),t),this.options.url=this.options.url||yahAjax.ajaxurl,this.init()}m.prototype={init:function(){this.initValidate(),this.cacheDOM(),this.handleEvent()},initValidate:function(){var i=s.moment().format(h);g.validator.addMethod("regexName",function(e,t){return a.test(e)}),g.validator.addMethod("regexPwd",function(e,t){return o.test(e)}),g.validator.addMethod("regexEmail",function(e,t){return(void 0!==yahAjax.allowPlus&&yahAjax.allowPlus?l:r).test(e)}),g.validator.addMethod("regexZip",function(e,t){return d.test(e)}),g.validator.addMethod("expiration",function(e,t){var a,n=!1;return 4<e.length&&(a=s.moment(e,h),e=s.moment(i,h),n=-1<a.diff(e,"months")),n})},cacheDOM:function(){this.$form=this.element,this.$btnSubmit=this.element.find("[data-btn-submit]"),this.$btnGiftCode=this.element.find("[data-btn-gift-code]"),this.$btnRedeemGiftCardCode=this.element.find("[data-btn-redeem-gift-card-code]"),this.$onboardingStart=this.element.find("[data-btn-onboarding-start]"),this.$onboardingCheckout=this.element.find("[data-btn-onboarding-checkout]"),this.$btnUpdatePassword=this.element.find("[data-btn-update-password]"),this.$btnCouponCode=this.element.find("[data-btn-coupon]"),this.$btnSettingsPaymentMethod=this.element.find("[data-btn-settings-payment-method]"),this.$btnSettingsGiftCardCode=this.element.find("[data-btn-settings-redeem-gift-card-code]"),this.$btnSettingsRedeemCode=this.element.find("[data-btn-settings-redeem-code]"),this.$btnCheckoutRedeemCode=this.element.find("[data-btn-checkout-redeem-code]"),this.$btnUpdatePlan=this.element.find("[data-btn-update-plan]"),this.$btnUpdateOnetimePlan=this.element.find("[data-btn-update-onetime-plan]"),this.$chbxIntlPayment=this.element.find("[data-intl-payment]"),this.$btnTfaConfirm=this.element.find("[data-btn-tfa-confirm]"),this.$btnTfaRequestCode=this.element.find("[data-btn-tfa-request-again]"),this.$btnTfaUpdatePhone=this.element.find("[data-btn-tfa-update-phone-number]"),this.$btnTfaSettingsConfirm=this.element.find("[data-btn-tfa-settings-confirm]"),this.$btnTfaSettingsRequestCode=this.element.find("[data-btn-tfa-settings-request-again]")},handleEvent:function(){var i=this;this.$btnSubmit.off(e).on(e,function(){i.handleValidate()}),this.$onboardingStart.off(e).on(e,function(){i.handleValidate(ywah_onboarding_helper.submit_onboarding_start)}),this.$onboardingCheckout.off(e).on(e,function(){var t=g(this);i.element.find(".general-error").html(""),i.handleValidate(function(e){t.prop("disabled",!0).addClass(c),ywah_onboarding_helper.submit_onboarding_checkout(e,function(){t.prop("disabled",!1).removeClass(c)})})}),this.$btnGiftCode.off(e).on(e,function(e){var a=g(this);i.handleValidate(function(t){a.prop("disabled",!0).addClass(c),ywah_onboarding_helper.submit_onboarding_gift_code(t,function(e){i.redeemCouponCode(t,e),a.prop("disabled",!1).removeClass(c)},function(){a.prop("disabled",!1).removeClass(c)})})}),this.$btnRedeemGiftCardCode.off(e).on(e,function(e){var t=g(this),a=g(".ywah-onboarding-checkout"),n=a.find(".title-wrapper");i.handleValidate(function(e){t.prop("disabled",!0).addClass(c),ywah_onboarding_helper.submit_onboarding_redeem_gift_card_code(e,function(e){g("#giftCardCode").modal("hide"),void 0!==helper_gateway.isNewSubscribeFlow&&helper_gateway.isNewSubscribeFlow?(a.find('input[name="gift_card_code"]').val(e.gift_code),a.find('input[name="plan_code"]').val(e.plan_code),a.find(".title-wrapper").html(e.cart_detail),a.find(".wrap-apple").hide(),a.find("[data-apple-pay-wrap]").hide(),a.find(".onboarding-subscription").hide(),g(".onboarding-checkout-plan-list").hide(),g(".onboarding-checkout").show()):(g("[data-cart-detail-wrap]").html(e.cart_detail).show(),a.find('input[name="gift_card_code"]').val(e.gift_code),a.find('input[name="plan_code"]').val(e.plan_code),g('.checkout-form-promo input[name="plan_code"]').val(e.plan_code),t.prop("disabled",!1).removeClass(c),g(".apply-code span").trigger("click"),g("[data-promo-code-open-popup-btn]").removeClass("d-inline-block").addClass("d-none"),g(".onboarding-subscription-item").removeClass("active"),g(".onboarding-plan-item").removeClass("active").removeAttr("data-subscribe-tab").find("input").remove(),g(".onboarding-plan-primary .title-wrapper").hide(),g(".onboarding-plan-secondary").hide(),g("[data-onboarding-other-plan]").hide(),g(".onboarding-subscription-switch").hide(),n.find("[data-step-title]").html(e.plan_name),n.find("[data-step-desc]").html(e.plan_desc),a.find(".cc-form-inputs").hide(),a.find(".intl-payment-wrap").hide(),g("[data-apple-pay-wrap]").hide(),g("[data-btn-onboarding-checkout]").text("Start Now"))},function(){t.prop("disabled",!1).removeClass(c)})})}),this.$btnUpdatePassword.off(e).on(e,function(e){i.handleValidate(function(e){i.handleUpdatePassword(e)})}),this.$btnCouponCode.off(e).on(e,function(e){i.handleValidate(function(e){i.handleCouponCode(e)})}),this.$btnSettingsPaymentMethod.off(e).on(e,function(e){i.handleValidate(ywah_settings_payments_helper.submit_settings_payment_method)}),this.$btnSettingsGiftCardCode.off(e).on(e,function(e){i.handleValidate(ywah_settings_payments_helper.submit_settings_redeem_gift_card_code)}),this.$btnSettingsRedeemCode.off(e).on(e,function(e){i.handleValidate(ywah_settings_payments_helper.submit_settings_redeem_code)}),this.$btnCheckoutRedeemCode.off(e).on(e,function(e){var t=g(this);i.handleValidate(function(e){t.prop("disabled",!0).addClass(c),ywah_onboarding_helper.submit_onboarding_gift_code(e,function(e){g("[data-account-plan-management]")["account-plan-management"]("applyPromoCodeEvent",e),t.prop("disabled",!1).removeClass(c)},function(){t.prop("disabled",!1).removeClass(c)})})}),this.$btnUpdatePlan.off(e).on(e,function(e){i.handleValidate(ywah_settings_payments_helper.submit_update_plan)}),this.$btnUpdateOnetimePlan.off(e).on(e,function(e){i.handleValidate(ywah_settings_payments_helper.submit_add_onetime_plan)}),i.$chbxIntlPayment.off(e).on(e,function(){var e=g(this).is(":checked"),t=i.element.find('.cc-form-inputs [name="zip"]');t.closest(".form-group").parent().toggle(!e).find("label.error").remove(),t.removeClass("error").val("")}),i.$btnTfaConfirm.off(e).on(e,function(){i.handleValidate(ywah_onboarding_helper.submit_onboarding_tfa_verify)}),i.$btnTfaRequestCode.off(e).on(e,function(e){e.preventDefault(),ywah_onboarding_helper.submit_onboarding_tfa_request(i.$form)}),i.$btnTfaSettingsConfirm.off(e).on(e,function(){i.handleValidate(ywah_settings_payments_helper.submit_setting_tfa_verify)}),i.$btnTfaSettingsRequestCode.off(e).on(e,function(e){e.preventDefault(),ywah_settings_payments_helper.submit_setting_tfa_request_again(i.$form)}),i.$btnTfaUpdatePhone.off(e).on(e,function(){i.handleValidate(ywah_settings_payments_helper.submit_setting_tfa_request)}),this.element.closest(".modal").on("hidden.bs.modal",function(){var e=g(this).find("form");e[0].reset(),e.find("label.error").html(""),e.find(".general-error").remove()})},handleValidate:function(e){var a=this;"function"==typeof e&&(p=e),this.$form.validate({rules:{name:{required:!0,regexName:!0,maxlength:100},first_name:{required:!0,regexName:!0,maxlength:50},last_name:{required:!0,regexName:!0,maxlength:50},email:{required:!0,regexEmail:!0,maxlength:100},password:{required:!0,regexPwd:!0},newPassword:{required:!0,regexPwd:!0},confirmPassword:{required:!0,regexPwd:!0,equalTo:"#newPassword"},agree:{required:!0},card_number:{required:!0,creditcard:!0},card_exp:{required:!0,expiration:!0},card_cvv:{required:!0,minlength:3,number:!0},gift_code:{required:!0},zip:{regexZip:!0,required:!0,minlength:5,maxlength:5},phone_number:{required:!0,minlength:4,number:!0},otp_code:{required:!0,number:!0,minlength:6,maxlength:6}},messages:{name:"Please enter a valid name",first_name:"Please enter a valid first name",last_name:"Please enter a valid last name",email:"Please enter a valid email address",password:"Password should be at least 8 characters, with at least 1 upper case, 1 lower case, and 1 number",confirmPassword:"Passwords don't match",newPassword:{required:"Please enter a valid password",regexPwd:"Password should be at least 8 characters, with at least 1 upper case, 1 lower case, and 1 number"},agree:"Please agree to our policy",card_number:"Please enter valid credit card number",card_exp:"Please enter a valid expiration",card_cvv:"Please enter a valid CVV Code",gift_code:"Please enter a valid number",zip:"Please enter a valid Zip Code",phone_number:"Please enter a valid Phone Number",otp_code:"Invalid Code."},submitHandler:function(e,t){a.options.useRecaptcha&&"function"==typeof p?(t.preventDefault(),g.fn.reCaptchaExecute(),i=p,u=e,a.resetCallBackFunc()):"function"==typeof p?(p(e),a.resetCallBackFunc()):a.callAjax(e)},errorPlacement:function(e,t){t.closest(".form-group-wrap").after(e.addClass("validate-error"))}})},resetCallBackFunc:function(){setTimeout(function(){p=null},0)},onSubmitEvents:function(e){var t,a;"function"==typeof i&&null!==u&&((a=(t=g(u)).find('input[name="recaptcha_token"]')).length?a.val(e):t.append('<input type="hidden" name="recaptcha_token" value="'+e+'">'),i(t.get(0)),i=u=null,g.fn.reCaptchaReset())},redeemCouponCode:function(e,t){var a=this,n=g(".ywah-onboarding-checkout"),i=n.find(".cc-form-inputs"),s=n.find('input[name="plan_code"]'),o=n.find("[data-subscribe-promo]"),l=n.find(".intl-payment-wrap"),r=l.find("[data-intl-payment]"),d=g(".ywah-onboarding-checkout-new").find('input[name="gift_code"]'),c=g(e),h=c.find('input[name="gift_code"]'),u=h.val(),p=c.find('input[name="one_checkout"]'),m=p?parseInt(p.val()):0,e=c.closest(".modal-gift-code"),p=e.attr("id"),f=g('[data-target="#'+p+'"]'),v=g('<div class="apply-code"></div>'),c=void 0!==helper_gateway.isNewSubscribeFlow&&helper_gateway.isNewSubscribeFlow,p=c?"div":"p",p=["<"+p+">"+(c?"PROMO CODE: ":"APPLIED: ")+"<span>"+u+"</span></"+p+">",c?'<span class="cancel-icon">&times;</span>':'<span class="cancel-text">CANCEL</span>','<input type="hidden" name="gift_code" value="'+u+'">'].join("");h.val(""),e.modal("hide"),v.append(p),f.hide().after(v),d.val(u),c?(g("[data-gift-card-open-popup-btn]").parent().addClass(b),g("[data-promo-code-open-popup-btn]").parent().addClass("col-12").removeClass("col-6")):g("[data-gift-card-open-popup-btn]").addClass(b).removeClass("d-inline-block"),f.hasClass("d-inline-block")&&f.removeClass("d-inline-block").addClass(b),void 0!==t.planPriceP&&t.planPriceP&&g("[data-ns-plan-item]:checked").parent("label").find("[data-ns-plan-item-price]").html("$"+t.planPriceP),m?void 0!==t.noccrequired&&t.noccrequired&&(a.noCcRequired=!0,s.val(t.plan_code),o.html(t.plan_data.name?"<h5>  <span>SUBSCRIPTION: </span>  "+t.plan_data.name+"</h5>":"").removeClass(b).css("display","block"),i.addClass(b),n.find(".validate-error").hide(),l.addClass(b)):g("[data-onboarding-subscribe]").trigger("applied-code",t),v.find("span").bind("click",function(){v.remove(),f.show(),d.val(""),void 0!==helper_gateway.isNewSubscribeFlow&&helper_gateway.isNewSubscribeFlow?(f.removeClass(b).addClass("d-inline-block"),g("[data-gift-card-open-popup-btn]").parent().removeClass(b),g("[data-promo-code-open-popup-btn]").parent().addClass("col-6").removeClass("col-12")):(g("[data-promo-code-open-popup-btn]").removeClass(b).addClass("d-inline-block"),g("[data-gift-card-open-popup-btn]").removeClass(b).addClass("d-inline-block")),m?a.noCcRequired&&(a.noCcRequired=!1,s.val(n.find('input[name="original_plan_code"]').val()),o.addClass(b).css("display","none"),n.find(".validate-error").hide(),i.removeClass(b),i.find("label.error").hide(),i.find("input[type=text]").val("").removeClass("error"),i.find(".ico.ico-cards").removeClass().addClass("ico ico-cards"),l.removeClass(b),r.prop("checked",!1).triggerHandler("click")):g("[data-onboarding-subscribe]").trigger("cancel-code")})},callAjax:function(e){var t=g(e),e=t.serializeArray(),n=t.find('button[type="submit"]'),a=t.find(".general-error");n.prop("disabled",!0),g.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:this.options.method,data:e,cache:!1,loader:!0}).done(function(e){e.success?g(".modal").modal("hide"):(a.remove(),t.append('<label class="general-error text-danger">'+e.data.message+"</label>")),n.prop("disabled",!1)}).fail(function(e,t,a){n.prop("disabled",!1)})},handleCouponCode:function(t){var e=g(t).serializeArray();g(t).find(".text-danger").remove(),g.ajax({type:this.options.method,url:this.options.url,data:e,cache:!1,success:function(e){e.success&&(g("#couponCode").modal("hide"),g("#couponCode").trigger("coupon-code-apply",e))},error:function(e){console.log(e);e='<label class="text-danger">'+e.statusText+"</label>";g(t).append(e)}})},handleUpdatePassword:function(e){var t=g(e),e=t.serializeArray(),n=t.find('button[type="submit"]'),a=t.find(".general-error");a.html(""),n.prop("disabled",!0),g.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:this.options.method,data:e,cache:!1,loader:!0}).done(function(e){e.success?(g(".modal").modal("hide"),s.location.reload()):a.html(e.data.message).show(),n.prop("disabled",!1)}).fail(function(e,t,a){n.prop("disabled",!1)})},destroy:function(){g.removeData(this.element[0],n)}},g.fn[n]=function(t,a){return this.each(function(){var e=g.data(this,n);e?e[t]&&e[t](a):g.data(this,n,new m(this,t))})},g.fn[n].defaults={method:"POST",url:yahAjax.ajaxurl},g(function(){g("[data-"+n+"]")[n]()})}(jQuery,window),function(o,l){"use strict";var n="get-teacher",e="click."+n;function i(e,t){this.element=o(e),this.options=o.extend({},o.fn[n].defaults,this.element.data(),t),this.$instructorAutocomplete=this.element.find("#filter-teacher-auto"),this.$selectedInstructorId=this.element.find("#filter-teacher-id"),this.$actionsWrap=this.element.find(".teacher-list-actions-wrap"),this.$sortBy=this.$actionsWrap.find(".sort-by-asc .sort__item-drop .sort__item-option"),this.$resultTotal=this.$actionsWrap.find("#total-count"),this.$itemsPerPageLinks=this.$actionsWrap.find(".sort__item-option"),this.$pageSize=this.$actionsWrap.find("#items-show"),this.$ajaxLoader=this.element.find(".teacher-list-loader-wrap .location-loader"),this.$teacherListWrap=this.element.find(".instructor-wrap"),this.$paginationWrap=this.element.find(".teacher-list-pagination-wrap"),this.$seeMoreWrap=this.element.find(".teacher-list-see-more-wrap"),this.teacherPagination=null,this.clearList=!0,this.init()}i.prototype={init:function(){var t=this;t.initInstructorAutocomplete(),t.initPagination(),t.$itemsPerPageLinks.on("click",function(e){e.preventDefault(),t.$pageSize.val(o(this).data("total")),t.$itemsPerPageLinks.removeClass("active"),o(this).addClass("active"),t.$sortBy.removeClass("active"),o(this).addClass("active"),o(".sort__item-option.active").closest(".sort__item-val").children(".sort__item-view").text(o(".sort__item-option.active").text()),t.initPagination()}),t.$seeMoreWrap.off(e).on(e,function(e){e.preventDefault(),t.clearList=!1,t.teacherPagination.pagination("next")})},initPagination:function(){var s=this;s.teacherPagination=s.$paginationWrap.pagination({dataSource:function(e){for(var t=[],a=s.$pageSize.val()?parseInt(s.$pageSize.val()):12,n=Math.ceil(parseInt(s.options.totalTeachers)/a),i=1;i<=n;i++)t.push(i);e(t)},pageSize:1,autoHidePrevious:!0,autoHideNext:!0,hideWhenLessThanOnePage:!0,callback:function(e,t){s.getTeachers(t.pageNumber,null)}})},initInstructorAutocomplete:function(){var a=this;a.$instructorAutocomplete.on("focus",function(){o(this).select()}).on("keyup",function(){0===a.$instructorAutocomplete.val().length&&a.$selectedInstructorId.val("")}).autocomplete({source:teacherStaffJson,minLength:1,appendTo:"#filter-teacher-container",position:{my:"left+0 top+8"},open:function(){navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&o(".ui-autocomplete").off("menufocus hover mouseover")},select:function(e,t){e.preventDefault(),t.item&&(a.$selectedInstructorId.val(t.item.id),a.$instructorAutocomplete.val(t.item.label),a.initPagination())}}).focus(function(){o(this).autocomplete("search",o(this).val())}).focusout(function(){""===a.$instructorAutocomplete.val()&&a.initPagination()}).autocomplete("widget").addClass("select-dropdown")},getTeachers:function(e,n){var i=this,s=12==o(".sort-by-count .sort__item-view").text().trim()?12:24,t="First Name(A to Z)"==o(".sort-by-asc .sort__item-view").text().trim()?1:2;i.clearList&&i.$teacherListWrap.html(""),i.callAjax({url:yahAjax.ajaxurl,dataType:"json",method:"GET",data:{action:"get_studio_teachers",staff_id:i.$selectedInstructorId.val(),page:e,items_per_page:s,sort:t},loader:!0}).done(function(e){if(i.processing(!1),e.success&&""!==e.teachersHtml&&(i.$actionsWrap.fadeIn(),i.$resultTotal.text(e.totalTeachers),i.clearList?(i.$teacherListWrap.html(e.teachersHtml),o("html, body").animate({scrollTop:i.$instructorAutocomplete.offset().top})):i.$teacherListWrap.append(e.teachersHtml),i.setHeightTeacherBox(),l.Modernizr.mq("(max-width: 991px)")&&e.hasMore?(i.$seeMoreWrap.find(".mb-page-size").text(s),i.$seeMoreWrap.show()):i.$seeMoreWrap.hide(),"function"==typeof n)){for(var t=[],a=1;a<=e.totalPages;a++)t.push(a);n(t)}}).fail(function(e,t,a){i.processing(!1),"function"==typeof n&&n([])})},setHeightTeacherBox:function(){var e=this;setTimeout(function(){var a=0;e.$teacherListWrap.find(".instructor .instructor__pic").each(function(e,t){a=o(t).outerHeight()>a?o(t).outerHeight():a}),0<a&&e.$teacherListWrap.find(".instructor .instructor__pic").css("height",a+"px").find("img").css("height","100%")},1500)},processing:function(e){this.$instructorAutocomplete.prop("disabled",e)},callAjax:function(e){var t=this.$ajaxLoader;return o.ajax({url:e.url,method:e.method||"GET",data:e.data||{},dataType:"json",beforeSend:function(){e.loader&&t.fadeIn()},complete:function(){e.loader&&t.hide()}})},destroy:function(){o.removeData(this.element[0],n)}},o.fn[n]=function(t,a){return this.each(function(){var e=o.data(this,n);e?e[t]&&e[t](a):o.data(this,n,new i(this,t))})},o.fn[n].defaults={},o(function(){o("[data-"+n+"]")[n]()})}(jQuery,window),function(n,i){"use strict";var s,o="global-search",f="d-none",l=0,v=0,g=!1,r=!1;function d(e,t){this.element=n(e),this.options=n.extend({},n.fn[o].defaults,this.element.data(),t),this.searchKey=void 0!==this.options.searchKey?this.options.searchKey:null,this.options.allowedSearch&&this.init()}d.prototype={init:function(){var a=this;a.$searchNotFound=a.element.find(".search-not-found"),a.$ondemandSearchResultWrapper=a.element.find("[data-ondemand-global-search]"),a.$ondemandSearchResultCount=a.$ondemandSearchResultWrapper.find("[data-ondemand-search-count]"),a.$ondemandSearchResults=a.$ondemandSearchResultWrapper.find("[data-ondemand-search-results]"),a.$liveSearchResultWrapper=a.element.find("[data-live-global-search]"),a.$liveSearchResultCount=a.$liveSearchResultWrapper.find("[data-live-search-count]"),a.$liveSearchResults=a.$liveSearchResultWrapper.find("[data-live-search-results]"),null!==a.searchKey?(a.getOnDemandVideos(1,function(e,t){a.renderOnDemandVideos(e,t),n(i).on("scrolled",function(){a.initWaypoints()})},!1),a.getLivestreamClasses(function(e){a.renderLiveClasses(e)})):a.$searchNotFound.removeClass(f)},getOnDemandVideos:function(t,a,e){this.destroyWaypoints(),n.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"GET",data:{action:this.options.videoAction,keyword:this.searchKey,page:t,videosPerPage:12,formCheck:this.options.videoNonce},loader:e}).done(function(e){g=!0,e&&e.success&&(v=e.data.total,"function"==typeof a&&a(t,e.data.ondemandVideos))}).fail(function(e,t,a){})},getLivestreamClasses:function(t){n.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"GET",data:{action:this.options.liveAction,keyword:this.searchKey,formCheck:this.options.liveNonce},loader:!0}).done(function(e){r=!0,e&&e.success&&(l=e.data.total,"function"==typeof t&&t(e.data.liveClasses))}).fail(function(e,t,a){})},renderOnDemandVideos:function(t,e){var a=this,n=12*t;g&&r&&v<1&&l<1?a.$searchNotFound.removeClass(f):0<v&&(a.$ondemandSearchResultWrapper.removeClass(f),a.$ondemandSearchResultCount.html(v+" results"),1<t?a.$ondemandSearchResults.append(e):a.$ondemandSearchResults.html(e),n<v?s=new Waypoint({element:a.$ondemandSearchResults,handler:function(e){"down"===e&&a.getOnDemandVideos(t+1,function(e,t){a.renderOnDemandVideos(e,t)},!0)},enabled:!1,offset:"bottom-in-view"}):a.destroyWaypoints())},renderLiveClasses:function(e){g&&r&&v<1&&l<1?this.$searchNotFound.removeClass(f):0<l&&this.prepareLiveClassData(e)},prepareLiveClassData:function(e){for(var t=this,a=void 0!==e&&e?e:[],n=a.length,i=moment.tz.guess(),s=moment(),o=moment().add(1,"day"),l=s.unix(),r=[],d=0;d<n;d++){var c=a[d],h=c.endTimeZonedStamp,u=!c.isCanceled&&l<h,p=c.startTimeZonedStamp-l,m=s.isSame(moment(c.startTimeZonedStamp,"X"),"day"),h=o.isSame(moment(c.startTimeZonedStamp,"X"),"day");u&&u&&(c.diffInSeconds=p,c.enableCtaBtn=!1,c.showComingSoon=!1,void 0!==c.startDateTimeZoned&&(u=moment(c.startDateTimeZoned),c.dayOfWeek=u.tz(i).format("dddd"),c.startTime=u.tz(i).format("h:mm").replace(":00",""),c.startMeridien=u.tz(i).format("a"),c.locationTimeZone=u.tz(i).format("z"),m?c.dayOfWeek="Today":h&&(c.dayOfWeek="Tomorrow"),p<=t.options.timeAccess?(c.startMeridien="min",0<(h=Math.floor(p/60))?(c.dayOfWeek="Starts In",c.startTime=h):(c.dayOfWeek="Ends In",c.startTime=c.duration+h),c.enableCtaBtn=!0):p<=t.options.timeComingSoon&&(c.showComingSoon=!0)),r.push(c))}0<r.length?(t.$liveSearchResultWrapper.removeClass(f),t.$liveSearchResultCount.html(r.length+" results"),t.$liveSearchResults.html(t.renderSlickItems(r)),setTimeout(function(){t.initSlick()},500)):g&&v<1&&t.$searchNotFound.removeClass(f)},renderSlickItems:function(e){var d=this,c="";return e.forEach(function(e){var t="item-"+e.siteId+"_"+e.classId,a=e.level?"<span>"+e.level+"</span>":"",n=e.isSub?'<span class="substitute">'+e.subStaff+"</span><br>"+e.teacherName:e.teacherName,i=" avoid-click",s='<a href="#"'+d.prepareCtaBtnAttrs(e)+">"+d.options.ctaLiveText+"</a>",o='<a href="'+d.options.ctaUpgradeUrl+'">'+d.options.ctaUpgradeText+"</a>",l="",r=" no-cta";e.enableCtaBtn&&(i=" clickable",l=d.options.allowedAccess?s:o,r=""),e.showComingSoon&&(l="<span>"+d.options.comingSoonText+"</span>",r=" coming-soon"),c+='<div class="col-md-4">  <div class="live-content-item'+i+'" data-target="'+t+'">    <div class="live-content-item__info">      <div class="live-content__avatar"><img src="'+e.teacherImg+'" alt=""></div>      <div class="live-content-item__description">        <h5>'+e.title+'</h5>        <p class="context-1">'+n+'</p>        <p class="context-1">'+a+"<span>"+e.duration+' min</span></p>        <p class="live-content-item__description-watch'+r+'">'+l+'</p>      </div>    </div>    <div class="live-content-item__schedule">      <p class="context-3">'+e.dayOfWeek+'</p>      <p class="live-content-item__schedule-time">'+e.startTime+"<span>"+e.startMeridien+'</span></p>      <p class="context-3 live-content-item__schedule-zone">'+e.locationTimeZone+'</p>    </div>  </div>  <div class="search-cta-result d-none"></div></div>'}),c},prepareCtaBtnAttrs:function(e){var t=parseInt(e.duration),t=isNaN(t)?-1800:-60*t,t=parseInt(e.startTimeZonedStamp)-t;return' data-btn-livestream-join data-site-id="'+e.siteId+'" data-class-id="'+e.classId+'"data-class-schedule-id="'+e.classSchedId+'" data-room-name="'+e.resourceName+'"data-loc-id="'+e.locId+'" data-loc-name="'+e.location+'"data-title="'+e.title+'" data-teacher="'+e.teacherName+'"data-is-free="0" data-level="'+e.level+'" data-yoga-type="'+e.yogaType+'"data-start-stamp="'+e.startTimeZonedStamp+'" data-duration="'+e.duration+'"data-end-stamp="'+t+'" data-plugin-name="'+o+'"'},initSlick:function(){var e=this.$liveSearchResults,t=this.$liveSearchResultWrapper.find(".slider-control .slider-nav");l<=3||e.slick({slidesToShow:3,slidesToScroll:1,dots:!0,infinite:!1,arrows:!0,appendArrows:t,appendDots:t,prevArrow:'<span class="slick-prev" role="button"></span>',nextArrow:'<span class="slick-next" role="button"></span>',responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:768,settings:{dots:!1,arrows:!1,slidesToShow:1,centerMode:!0,centerPadding:"20%"}}]})},initWaypoints:function(){s&&s.enable()},destroyWaypoints:function(){s&&s.destroy()},renderErrorMessage:function(e){var t=e.message;n('[data-target="item-'+e.itemId+'"]').parent().find(".search-cta-result").html(t).toggleClass(f,void 0===t||""===t)},destroy:function(){n.removeData(this.element[0],o)}},n.fn[o]=function(t,a){return this.each(function(){var e=n.data(this,o);e?e[t]&&e[t](a):n.data(this,o,new d(this,t))})},n.fn[o].defaults={ctaLiveText:"Live Now",comingSoonText:"Coming Soon",ctaUpgradeText:"Upgrade",ctaUpgradeUrl:"/account/#payments",timeAccess:300,timeComingSoon:7200,allowedAccess:0,allowedSearch:1},n(function(){n("[data-"+o+"]")[o]()})}(jQuery,window),function(n,e){"use strict";var i="imagecycle";n("body"),n(e);function s(e,t){this.element=n(e),this.options=n.extend({},n.fn[i].defaults,this.element.data(),t),this.init()}s.prototype={init:function(){function s(e,t){return Math.floor(Math.random()*(t-e+1))+e}var e,t,o,l=this,r=this.element.find("li").length;e=l.element.find("li:nth-child("+s(1,16)+")"),t=l.element.find("li:nth-child("+s(17,r)+")"),(o=function(e,t){var a,n=180,i=0;e.find("img").addClass("old"),t.find("img").addClass("new").appendTo(e),a=function(){--i,--n,e.find(".old").css("transform","rotateY("+i+"deg)"),e.find("img:not(.old)").css("transform","rotateY("+n+"deg)"),-90===i&&(e.find(".old").removeClass("old").appendTo(t),e.find(".new").removeClass("new")),0===n?(n=180,i=0,e=l.element.find("li:nth-child("+s(1,16)+")"),t=l.element.find("li:nth-child("+s(17,r)+")"),o(e,t)):setTimeout(a,10)},setTimeout(a,2e3)})(e,t)},destroy:function(){this.element.find("img").removeClass("new old").css("transform",""),n.removeData(this.element[0],i)}},n.fn[i]=function(t,a){return this.each(function(){var e=n.data(this,i);e?e[t]&&e[t](a):n.data(this,i,new s(this,t))})},n.fn[i].defaults={},n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(n,i){"use strict";var s="journey-series",e="click."+s;function o(e,t){this.element=n(e),this.options=n.extend({},n.fn[s].defaults,this.element.data(),t),this.init()}o.prototype={init:function(){var t=this;n("[data-journey-series-video-item]").off(e).on(e,function(e){e.preventDefault();e=n(this);t.getFeaturedVideo(e.data("video-id"),e.data("leg-id"),e.data("video-slug"))}),n(".js-item-day-number").off(e).on(e,function(){var e=n(this);t.updateDayWatched(e.data("js-id"),e.data("js-day-watched"),e.data("form-check"))})},getFeaturedVideo:function(e,t,a){n.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"GET",data:{action:"yah_js_get_video",videoId:e,formCheck:this.options.formCheck},loader:!0}).done(function(e){e.success&&(e=n("[data-journey-series-featured-video]"),n(i).trigger("scrollmagic:change"),n.fn.JWPlayer.init(a),n.fn.handleActionOnDemand(),n("html, body").animate({scrollTop:e.offset().top},1e3,"swing"))}).fail(function(e,t,a){})},updateDayWatched:function(e,a,t){n.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:"yah_js_update_log",jsId:e,jsDayData:a,formCheck:t},loader:!0}).done(function(e){var t;e.success&&((t=n('[data-js-day-watched="'+a+'"]')).toggleClass("watched"),e=t.find("img").attr("src"),e=t.hasClass("watched")?e.replace("unchecked","checked"):e.replace("checked","unchecked"),t.find("img").attr("src",e))}).fail(function(e,t,a){})},destroy:function(){n.removeData(this.element[0],s)}},n.fn[s]=function(t,a){return this.each(function(){var e=n.data(this,s);e?e[t]&&e[t](a):n.data(this,s,new o(this,t))})},n.fn[s].defaults={},n(function(){n("[data-"+s+"]")[s]()})}(jQuery,window),function(n){"use strict";n.fn.JWPlayerClass=function(e,t){this.element=e,this.options=Object.assign({},this.element.data(),t),this.currentPosition=0,this.percentObj={percent:0,flag:!1,logId:0},this.init()},n.fn.JWPlayerClass.prototype={init:function(){if(!this._checkStructure())return!1;this.jwinit(),this.actionsinit()},actionsinit:function(e){var a=this;a.jwPlayerInstance.on("time",function(e){var t=Math.floor(e.position),e=Math.floor(e.duration);a.currentPosition<t&&(n.fn.jsVars.isValidUser&&a.logVideo(t,e),!n.fn.jsVars.isFreeVideo&&!n.fn.jsVars.videoEnabled&&n.fn.jsVars.videoPreviewDuration<t&&(a.element.find("#preview-end").show(),a.element.find("#video-content").remove())),a.currentPosition=t})},jwinit:function(){var t=this;t.jwPlayerInstance=jwplayer("video-content"),t.jwPlayerInstance.setup({playlist:[{sources:[{default:!1,type:"hls",file:this.options.videoUrl,label:"0"}],image:this.options.videoImg,title:this.options.videoName}],primary:"html5",hlshtml:!0,autostart:!0,width:"100%",aspectratio:"16:9",image:"image"}),t.jwPlayerInstance.on("ready",function(e){t.element.find(".jw-logo-button").remove(),t.element.find(".video-cont-preview").hide()})},_checkStructure:function(e){return"undefined"==typeof jwplayer?(console.log("JwPlayer Library is not connected"),console.log("add it src='https://cdn.jwplayer.com/libraries/V9pQI8Ot.js'"),!1):this.element.find("#video-content").length?!!this.element.find("#preview-end").length||(console.log("JwPlayerClass no .preview-end block found"),!1):(console.log("JwPlayerClass no #video-content block found"),!1)},logVideo:function(e,t){var a=this,t=e/t*100;return 5<e&&!a.percentObj.flag&&(a.percentObj.flag=!0,a.wpAjax({action:"video_played",asset_id:a.options.assetId,percent:t,log_id:a.percentObj.logId,nonce:n.fn.jsVars.logNonce},function(e){a.percentObj.logId=e.data.logId})),2<t-a.percentObj.percent&&(a.percentObj.flag=!1,a.percentObj.percent=t),a.percentObj},wpAjax:function(e,t){n.ajax({url:n.fn.jsVars.wpAjaxUrl,data:e,dataType:"json",method:"POST",success:function(e){t(e)},error:function(e){console.log("error:"),console.log(e)}})}}}(jQuery,window),function(o){o(document).ready(function(){function e(){o("#signin-btn").toggleClass("selected"),o("html, body").animate({scrollTop:o("body").offset().top},300,"easeInOutQuad"),i.hasClass("open-panel")?(o("#search-btn").toggleClass("selected"),i.slideToggle(150,"easeInOutQuad",function(){s.slideToggle(a,"easeInOutQuad",function(){o("#password-form-container").hasClass("active-form")&&(n.toggleClass("active-form"),n.toggle())}).toggleClass("open-panel")}).toggleClass("open-panel")):s.slideToggle(a,"easeInOutQuad",function(){o("#password-form-container").hasClass("active-form")&&(n.toggleClass("active-form"),n.toggle())}).toggleClass("open-panel")}function t(e){return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}var a="300",n=o(".signin-wrapper .form-container"),i=o(".search-wrapper"),s=o(".signin-wrapper");"account-settings"!==t("dl")&&"account-subscription"!==t("dl")||e(),o(".signin-trigger").on("click",function(){return e(),!1}),o(".form-toggle").on("click",function(){return n.toggleClass("active-form"),n.toggle(),!1}),o(".search-trigger").on("click",function(){return o("#search-btn").toggleClass("selected"),s.hasClass("open-panel")?(o("#signin-btn").toggleClass("selected"),s.slideToggle(a,"easeInOutQuad",function(){i.slideToggle(150,"easeInOutQuad").toggleClass("open-panel"),o("#password-form-container").hasClass("active-form")&&(n.toggleClass("active-form"),n.toggle())}).toggleClass("open-panel")):i.slideToggle(150,"easeInOutQuad").toggleClass("open-panel"),!1}),o(".signin-wrapper .cancel-link").click(function(){o(".signin-wrapper form").each(function(){o("input",this).removeClass("error"),o("label.error",this).css("display","none"),this.reset()})}),o("ul.dropdown-menu [data-toggle=dropdown]").on("click",function(e){e.preventDefault(),e.stopPropagation(),o(this).parent().hasClass("open")?o(this).parent().removeClass("open"):(o(this).parent().siblings().removeClass("open"),o(this).parent().addClass("open"));var t=o(this).parent().find("ul"),e=0,e=t.offset().left+t.width()+30>o(window).width()?-t.width():o(this).parent().width();t.css({left:e})});o("#signup-content").css("background-color","rgba(48, 55, 56, 0.65)"),o("#intro-video-outer").css("background-color","rgba(48, 55, 56, 0.65)"),o("[data-utc-date]").each(function(){var e=o(this).data("utc-date"),e=new Date(e);o(this).html(e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear())}),o("[data-utc-date-2]").each(function(){var e=o(this).data("utc-date-2"),e=new Date(e);o(this).html(e.getMonth()+1+"/"+e.getDate())})})}(jQuery),function(T,b){"use strict";var i,n="live-schedule",s="records-list",I=T(document),f="MM-DD-YYYY",v="active",o={teacher:"teacherName",class:"title",level:"level"},P=!0;function D(){return 1200<=T(b).innerWidth()}function g(e,a,n){return-1<e.findIndex(function(e,t){if(e[o[n]].trim().toLowerCase()===a.trim().toLowerCase())return!0})}function l(e,t){this.liveClasses=[],this.liveFilterData=[],this.liveBgImages=[],this.dayActiveData=[],this.element=T(e),this.options=T.extend({},T.fn[t.pluginName].defaults,this.element.data(),t),this.click="click."+this.options.pluginName,this.documentClick="document-click."+this.options.pluginName,this.isShowFilter=this.element.find("[data-filter-search]").length,this.$btnControl=this.element.find("[data-filter-control]"),this.$btnSelectAll=this.element.find("[data-select-all]"),this.$searchInput=this.element.find("[data-search-input]"),this.allowedAccess=this.options.allowedAccess||!1,this.allowedNewTemplate=this.options.allowedNewTemplate||!1,this.isPromoPage=this.options.promoPage||!1,this.init()}l.prototype={init:function(){var n=this;"livepage"===n.options.pagetype&&n.getLiveClasses(function(){n.aditionalHeaderForFilterWidget.init(n),n.initSchedule()}),n.options.useParallax&&T(b).on("resized",function(){D()?n.renderScrollbar():n.destroyScrollbar()}),I.on("click","[data-search-icon]",function(e){e.preventDefault(),n.element.find("#search_tag").trigger(T.Event("keypress",{which:13})),n.element.find("#live-content-wrap").html("<h3>No classes match your search criteria.</h3>")}),I.on("click",function(e){var t=T(".addtocalendar");t.is(e.target)||t.has(e.target).length||t.removeClass(v)}),this.element.off(this.click,".atcb-item").on(this.click,".atcb-item",function(e){var t=T(this),a=t.closest(".addtocalendar"),n=a.find(".atcb-link"),i='<div class="atcb-checkmark"></div>',s=a.data().classId,o=a.data().classScheduleId,l=moment(a.data().endTimestamp,"X").toDate(),r=[];t.find(".atcb-checkmark").length||t.prepend(i),a.removeClass(v).addClass("added"),n.html(i+" Added to Calendar"),a.find(".atcb-item .atcb-checkmark").each(function(){var e=T(this).siblings(".atcb-item-link");r.push(e.text())}),T.cookie("addtocalendar_"+s+o,r,{expires:l,path:"/"})}),n.element.off(this.click,".atcb-link").on(this.click,".atcb-link",function(e){var t=T(this).closest(".addtocalendar"),a=t.hasClass(v);n.element.find(".addtocalendar").removeClass(v),a||t.addClass(v)}),this.$btnControl.off(this.click).on(this.click,function(){var e=T(this),t=n.element.find("[data-select-day]").filter(".active").last(),a=parseInt(e.data("filter-control")),e=t.prev();a&&(e=t.next()),e.length&&(e.trigger("click"),t.trigger("click"))}),this.$btnSelectAll.off(this.click).on(this.click,function(){n.element.find("[data-select-day]").addClass(v),n.showHideControl(),n.renderSchedule(),n.handleSetHash()}),this.element.on(this.click,".live-content-item__content",function(e){1200<=T(b).innerWidth()||(e.stopPropagation(),T(this).closest(".live-content-item__content").toggleClass(n.options.classViewDescription))}),T(b).on("resized",function(){n.checkInitTextOverflow()}).on("scrolled",function(){i&&i.enable()})},checkInitTextOverflow:function(){var i=this,e=T(b).innerWidth()<1200,t=!e,a=this.element.find(".live-content-item__content");e||a.removeClass(this.options.classViewDescription),a.each(function(){var e=T(this),t=e.find(".view-more"),a=e.find(".description-paragraph"),n=e.data("line-clamp");a.find("span").length&&a.text(a.find("span").text()),n=a.height()<=n*i.options.heightTextTablet,t.toggleClass("d-none",n),e.data("not-init-clamp",n)}),this.element.data("not-init-text-overflow",t),T(b).trigger("hero:ready",[this.element])},showHideControl:function(){var e=this.element.find("[data-select-day]").filter(".active"),t=e.last();if(this.element.find("[data-select-all]").toggleClass("hidden",1!=e.length),1==e.length)return this.element.find('[data-filter-control="0"]').toggleClass("hidden",!t.prev().length),void this.element.find('[data-filter-control="1"]').toggleClass("hidden",!t.next().length);this.element.find('[data-filter-control="0"]').addClass("hidden"),this.element.find('[data-filter-control="1"]').addClass("hidden")},initSchedule:function(){var t=this;t.element.find(".schedule-header").removeClass("d-none"),I.on(t.click,t.options.scheduleEventItem,function(e){T(e.target).is("a")||(e.preventDefault(),t.activeEventDetailBlock(T(this)))}),t.isShowFilter&&(t.searchTagList=[],t.element.find(".search-wrapper").removeClass("d-none"),t.element.find(".filter-date-wrapper").removeClass("d-none"),t.renderDateFilter(),t.renderTagFilter(),t.handleHashFilter(),t.element.find("[data-select-day]").off(t.click).on(t.click,function(){var e=t.element.find("[data-select-day].active");if(7==e.length&&e.removeClass(v),T(this).toggleClass("active",!T(this).hasClass("active")),t.showHideControl(),!t.element.find("[data-select-day].active").length)return t.renderErrorBlock(t.options.msgFilterDay),void t.destroyWaypoint();t.renderSchedule(),t.handleSetHash()})),this.renderSchedule()},initRecords:function(){var e=this;e.isShowFilter&&(e.searchTagList=[],e.element.find(".search-wrapper").removeClass("d-none"),e.renderTagFilter(),e.handleHashFilter()),this.renderRecordsList()},handleHashFilter:function(){var e=T.fn.getHashValue(),t=e.date,a=e.tname,n=e.cname,i=e.level,s=[],o=[],l=this,e=function(e,a){var n;switch(a){case"class":n="Class Name";break;case"teacher":n="Teacher";break;case"level":n="Level"}e&&e.length&&e.split(",").forEach(function(e,t){e=e.replace(/-(?![0-9])/g," ").replace(/-/," ");g(l.liveClasses,e,a)&&(s.push({label:e,category:n}),o.push(e))})};if(t&&t.length){var r=[],d=[],c=l.element.find("[data-select-day]");t.split(",").forEach(function(e,t){var a=moment(e,f),e=moment(a).format("dddd");r.push(a),d.push(e)}),c.removeClass(v);for(var h=0;h<c.length;h++){var u=T(c[h]),p=u.data().selectDay,m=u.attr("title"),p=moment(p,"X");-1!==T.inArray(m,d)&&function(e,t){return e.some(function(e){return e.isSame(t,"days")})}(r,p)&&u.addClass(v)}this.showHideControl()}e(n,"class"),e(a,"teacher"),e(i,"level"),this.searchTagList=s,this.$searchInput.importTags(o.join()),(void 0===t||t&&!t.length)&&this.handleSetHash()},handleSetHash:function(){var e=this.element.find("[data-select-day].active"),t=[],a=Object.keys({tname:"",cname:"",level:"",date:""}),n=[],i={},s=[],o=[],l=[];this.searchTagList.forEach(function(e,t){var a=e.label.trim().replace(/ /g,"-").toLowerCase();switch(e.category){case"Teacher":s.push(a);break;case"Class Name":o.push(a);break;case"Level":l.push(a)}}),e.each(function(){var e=T(this).data().selectDay,e=moment(e,"X").format("lll"),e=moment(new Date(e)).format(f);t.push(e)}),i.tname=s,i.cname=o,i.level=l,i.date=t,(a=a.filter(function(e){return i[e].length})).forEach(function(e,t){n.push(a[t]+"="+i[e])}),P||(b.location.hash=n.join("&"))},getLiveClasses:function(e){this.liveClasses=LIVE_SCHEDULE_FROM_PAGE.liveClasses,this.liveFilterData=LIVE_SCHEDULE_FROM_PAGE.liveFilterData,this.liveBgImages=LIVE_SCHEDULE_FROM_PAGE.bgImages,e()},getRecordsClasses:function(e){var t,a,n,i=this.getBrightcoveToken();t=middlewareGetBrightcoveVideos,i={token:i},a=e,n=this,T.ajax({url:t,data:i,crossDomain:!0,type:"POST",success:function(e){n.liveClasses=e.data.liveClasses,n.liveFilterData=e.data.liveFilterData,n.liveBgImages=e.data.bgImages,a(e)},error:function(e){console.log("error:"),console.log(e)}})},getBrightcoveToken:function(){return this.element.attr("data-token")},activeEventDetailBlock:function(e){var t=this.element.find(this.options.scheduleEventItem),a=this.element.find(".live-thumbnail-item"),n=e.attr("data-target"),n=this.element.find("#"+n);t.removeClass(this.options.scheduleEventActiveClass),a.removeClass(this.options.scheduleEventDetailActiveClass),e.addClass(this.options.scheduleEventActiveClass),n.addClass(this.options.scheduleEventDetailActiveClass),this.renderJoinButton(n)},renderJoinButton:function(e){var t=this.element.find(".bubble-join-wrap"),a=e.find(".bubble-join-wrap"),n=e.find("[data-btn-livestream-join]"),i=n.data("start-stamp"),s=n.data("duration"),e=parseInt(s),s=isNaN(e)?-1800:-60*e,e=parseInt(i)-s,s=parseInt(this.options.timeAccess);i-moment().unix()<=s&&(t.addClass("d-none"),a.removeClass("d-none"),this.allowedAccess?n.attr("data-end-stamp",e):n.attr("href",this.options.ctaUpgradeUrl).find("h5").text(this.options.ctaUpgradeText).removeAttr("data-btn-livestream-join"))},renderSchedule:function(){function o(e,a){var n=[];return T.each(e,function(e,t){t.category===a&&n.push(t.label.toLowerCase())}),n}var e=this.isShowFilter,t=e?this.element.find("[data-select-day].active"):null,a=e?this.searchTagList:null,n=I[this.options.pluginName].additionalSearchTagList,i=this.options.defaultFilterClasses,s=parseInt(this.options.timeAccess),l=parseInt(this.options.timeComingSoon),r=!!this.options.useEndDate,d=void 0!==this.liveClasses&&this.liveClasses?this.liveClasses:[],c=d.length,h=moment(),u=moment().add(1,"day"),p=h.unix(),m=e?function(e){var t=[];if(e.length)return e.each(function(){var e=T(this).attr("data-select-day");t.push(moment(e,"X"))}),t}(t):[h],f=p,v=moment.tz.guess(),g=[],b=0,y={duration:[],level:[],teacherName:[]};this.dayActiveData=[];for(var w=0;w<c;w++){var C=d[w],$=r?C.endTimeZonedStamp:C.startTimeZonedStamp,k=moment(C.startTimeZonedStamp,"X"),x=!e||function(e,i){return e.some(function(e){var t=moment(),a=t.unix(),n=e.isSame(i,"day"),t=e.isSame(t,"day");return n&&(f=t?a:e.startOf("day").unix()),n})}(m,k),S=!e||function(e,t){if(void 0===t||t.length<=0)return!0;var a=e.teacherName.toLowerCase(),n=e.title.toLowerCase(),i=e.level.toLowerCase(),s=o(t,"Teacher"),e=o(t,"Class Name"),t=o(t,"Level"),s=s.length<=0||0<s.length&&-1!==T.inArray(a,s),e=e.length<=0||0<e.length&&-1!==T.inArray(n,e),t=t.length<=0||0<t.length&&-1!==T.inArray(i,t);return s&&e&&t}(C,a),_=!e||function(a,e){var n=!0;return void 0===e||e.length<=0||(T.each(e,function(e,t){a[t.category]!=t.value&&(n=!1)}),n)}(C,n),k=!C.isCanceled&&S&&_&&x&&f<$,S=C.startTimeZonedStamp-p,_=h.isSame(moment(C.startTimeZonedStamp,"X"),"day"),$=u.isSame(moment(C.startTimeZonedStamp,"X"),"day");if(x&&this.dayActiveData.push(C),!e&&i<=b)break;k&&(C.diffInSeconds=S,C.enableCtaBtn=!1,C.showComingSoon=!1,void 0!==C.startDateTimeZoned&&(k=moment(C.startDateTimeZoned),C.dayOfWeek=k.tz(v).format("dddd"),C.startTime=k.tz(v).format("h:mm").replace(":00",""),C.startMeridien=k.tz(v).format("a"),C.locationTimeZone=k.tz(v).format("z"),this.isPromoPage&&(C.startTime=k.tz(v).format("hh:mm"),C.startMeridien=k.tz(v).format("A"),k=k.add(C.duration,"minutes"),C.endTime=k.tz(v).format("hh:mm"),C.endMeridien=k.tz(v).format("A")),_?C.dayOfWeek="Today":$&&(C.dayOfWeek="Tomorrow"),S<=s?(this.isPromoPage||(C.startMeridien="min",0<($=Math.floor(S/60))?(C.dayOfWeek="Starts In",C.startTime=$):(C.dayOfWeek="Remaining",C.startTime=C.duration+$)),C.enableCtaBtn=!0):S<=l&&(C.showComingSoon=!0)),g.push(C),y.duration.push(C.duration),y.level.push(C.level),y.teacherName.push(C.teacherName),b++)}this.rerenderTopFilterSelects(y),P=!1,this.destroyScrollbar(),this.renderClasses(g,1),D()&&this.options.useParallax&&this.renderScrollbar(),this.element.find(this.options.scheduleEventItem).first().trigger("click")},renderRecordsList:function(){function o(e,a){var n=[];return T.each(e,function(e,t){t.category===a&&n.push(t.label.toLowerCase())}),n}var e=this.isShowFilter,t=(e&&this.element.find("[data-select-day].active"),e?this.searchTagList:null),a=I[this.options.pluginName].additionalSearchTagList,n=this.options.defaultFilterClasses,i=(parseInt(this.options.timeAccess),parseInt(this.options.timeComingSoon),this.options.useEndDate,void 0!==this.liveClasses&&this.liveClasses?this.liveClasses:[]),s=i.length,l=moment(),r=moment().add(1,"day"),d=moment.tz.guess(),c=[],h=0,u={duration:[],level:[],teacherName:[]};this.dayActiveData=[];for(var p=0;p<s;p++){var m=i[p],f=(moment(m.startTimeZonedStamp,"X"),!e||function(e,t){if(void 0===t||t.length<=0)return!0;var a=e.teacherName.toLowerCase(),n=e.title.toLowerCase(),i=e.level.toLowerCase(),s=o(t,"Teacher"),e=o(t,"Class Name"),t=o(t,"Level"),s=s.length<=0||0<s.length&&-1!==T.inArray(a,s),e=e.length<=0||0<e.length&&-1!==T.inArray(n,e),t=t.length<=0||0<t.length&&-1!==T.inArray(i,t);return s&&e&&t}(m,t)),v=function(a,e){var n=!0;return void 0===e||e.length<=0||(T.each(e,function(e,t){a[t.category]!=t.value&&(n=!1)}),n)}(m,a),g=!m.isCanceled&&f&&v,f=l.isSame(moment(m.startTimeZonedStamp,"X"),"day"),v=r.isSame(moment(m.startTimeZonedStamp,"X"),"day");if(this.dayActiveData.push(m),!e&&n<=h)break;g&&(m.enableCtaBtn=!1,m.showComingSoon=!1,void 0!==m.startDateTimeZoned&&(g=moment(m.startDateTimeZoned),m.dayOfWeek=g.tz(d).format("dddd"),m.startTime=g.tz(d).format("h:mm").replace(":00",""),m.startMeridien=g.tz(d).format("a"),m.locationTimeZone=g.tz(d).format("z"),f?m.dayOfWeek="Today":v&&(m.dayOfWeek="Tomorrow"),m.showComingSoon=!0),c.push(m),u.duration.push(m.duration),u.level.push(m.level),u.teacherName.push(m.teacherName),h++)}this.rerenderTopFilterSelects(u),P=!1,this.destroyScrollbar(),this.renderRecords(c,1),D()&&this.options.useParallax&&this.renderScrollbar(),this.element.find(".schedule-header").removeClass("d-none"),this.element.find(".play-record").on("click",function(e){b.location=T(e.target).find("a").attr("href")}),this.element.find(this.options.scheduleEventItem).first().trigger("click")},uniqueArrEls:function(e){return e.filter(function(e,t,a){return t==a.indexOf(e)}).filter(Boolean)},rerenderTopFilterSelects:function(t){var s=this;Object.keys(t).forEach(function(a){t[a]=s.uniqueArrEls(t[a]).sort();var e=s.element.find(".filter-demand-item[data-group-name='"+a+"']").find(".dropdown-menu"),n="",i="duration"==a?" mins":"";T.each(t[a],function(e,t){n+='<div class="dropdown-item" data-category="'+a+'" data-label="'+t+i+'" data-value="'+t+'">'+t+i+"</div>"}),e.html(n)}),this.aditionalHeaderForFilterWidget.handleEvent()},renderClasses:function(e,t){var a,n=this,i=this.element.find(".live-content-wrap"),s=this.element.find(".live-thumbnail-wrap"),o=this.options.limitScroll,l=this.options.classesPerPage||20,r=this.options.defaultFilterClasses||5,l=this.isShowFilter?l:r,d=e.slice((t-1)*l,t*l);this.destroyWaypoint(),n.options.useParallax?(a=n.renderClassesV1(d),1==t?(i.html(a.htmlSchedule),s.html(a.htmlClassDetail)):(i.append(a.htmlSchedule),s.append(a.htmlClassDetail)),s=1==t,D()&&this.renderScrollbar(s),n.element.find(".live-content-item").length<e.length&&this.renderWaypoint(n.element.find(".live-content-item:last-child"),function(){n.destroyScrollbar(),n.renderClasses(e,t+1)},n.element.find(".live-content-wrap"))):(n.element.find(".live-content-item").length<e.length&&(!o||1<o&&t<o)&&this.renderWaypoint(n.element.find(".live-content-wrap"),function(){n.renderClasses(e,t+1)}),a=n.renderClassesV2(d),1==t?i.html(a):i.append(a),n.checkInitTextOverflow()),n.options.ctaLink&&n.options.ctaText&&1==t&&(n.isShowFilter?(a=n.element.find("[data-view-schedule-cta]")).length&&(a.prev().remove(),a.remove()):i.append('<div class="line-separator"></div><div class="live-content-item" data-view-schedule-cta>  <a href="'+n.options.ctaLink+'"      class="heading-small-section link-hover-effect">'+n.options.ctaText+"</a></div>")),setTimeout(function(){n.element.find(".atcb-list").remove(),addtocalendar.load(),n.element.find(".addtocalendar a.atcb-item-link").each(function(e,t){T(t).attr("title","Add to "+T(t).text()),T(t).addClass("stretched-link")}),n.element.find(".addtocalendar.added").each(function(){var e=T(this),t=e.data(),e=e.find(".atcb-item-link"),n=T.cookie("addtocalendar_"+t.classId+t.classScheduleId).split(",");T.each(e,function(e,t){var a=T(t).text();-1!==T.inArray(a,n)&&T(t).before('<div class="atcb-checkmark"></div>')})})},500)},renderRecords:function(e,t){var a=this.element.find(".live-content-wrap"),n=(this.element.find(".live-thumbnail-wrap"),this.options.limitScroll,e.slice(20*(t-1),20*t));this.destroyWaypoint(),n=this.buildRecordHtml(n),1==t?a.html(n):a.append(n),this.checkInitTextOverflow()},prepareCtaBtnAttrs:function(e){var t=parseInt(e.duration),t=isNaN(t)?-1800:-60*t,t=parseInt(e.startTimeZonedStamp)-t;return this.isHasZoomTag(e)?'data-zoom="true" data-btn-livestream-join data-site-id="'+e.siteId+'" data-class-id="'+e.classId+'"data-class-schedule-id="'+e.classSchedId+'" data-room-name="'+e.resourceName+'"data-loc-id="'+e.locId+'" data-loc-name="'+e.location+'"data-title="'+e.title+'" data-teacher="'+e.teacherName+'"data-is-free="0" data-level="'+e.level+'" data-yoga-type="'+e.yogaType+'"data-start-stamp="'+e.startTimeZonedStamp+'" data-duration="'+e.duration+'"data-end-stamp="'+t+'" data-plugin-name="'+this.options.pluginName+'"':'data-site-id="'+e.siteId+'" data-class-id="'+e.classId+'"data-class-schedule-id="'+e.classSchedId+'" data-room-name="'+e.resourceName+'"data-loc-id="'+e.locId+'" data-loc-name="'+e.location+'"data-title="'+e.title+'" data-teacher="'+e.teacherName+'"data-is-free="0" data-level="'+e.level+'" data-yoga-type="'+e.yogaType+'"data-start-stamp="'+e.startTimeZonedStamp+'" data-duration="'+e.duration+'"data-end-stamp="'+t+'" data-plugin-name="'+this.options.pluginName+'"'},isHasZoomTag:function(e){var t=!1;if(void 0!==e.tags)for(var a=0;a<e.tags.length;a++)if(e.tags[a].slug==ZOOM_TAG){t=!0;break}return t},renderClassesV1:function(e){var h=this,t={},u="",p="";return e.forEach(function(e){var t="item-"+e.siteId+"_"+e.classId,a=1===e.isNewClass?" content-new":"",n=e.level?"<span>"+e.level+"</span>":"",i=e.isSub?'<span class="substitute">'+e.subStaff+"</span><br>"+e.teacherName:e.teacherName,s=h.liveBgImages[Math.floor(Math.random()*h.liveBgImages.length)],o=e.enableCtaBtn?"":" d-none",l=h.prepareCtaBtnAttrs(e),r='<a href="#"'+l+">"+h.options.ctaJoinText+"</a>",d='<a href="'+h.options.ctaUpgradeUrl+'">'+h.options.ctaUpgradeText+"</a>",c="";e.enableCtaBtn&&(h.allowedAccess?c=r:(c=d,l="")),u+='<div class="line-separator"></div><div class="live-content-item'+a+' row no-gutters" data-target="'+t+'" data-live-item> <div class="live-content-item__info">   <div class="live-content__avatar"><img src="'+e.teacherImg+'" alt=""></div>   <div class="live-content-item__description">     <h5>'+e.title+'</h5>     <p class="context-1"><span>'+i+"</span>"+n+'</p>     <p class="live-content-item__description-watch link-hover-effect">'+c+'</p>   </div> </div> <div class="live-content-item__schedule">   <p class="context-3">'+e.dayOfWeek+'</p>   <p class="live-content-item__schedule-time">'+e.startTime+"<span>"+e.startMeridien+'</span></p>   <p class="context-3 live-content-item__schedule-zone">'+e.locationTimeZone+'</p> </div> <div class="col-12 schedule-cta-result d-none"></div></div>',p+=' <div id="'+t+'" class="live-thumbnail-item"       style="background-image: url('+s+');">   <div class="live-thumbnail__content">     <div class="live-thumbnail__content-title"><h5>'+e.title+'</h5></div>     <div class="live-thumbnail__content-description">       <p class="description-paragraph">'+e.desc+'</p>     </div>   </div>   <div class="bubble-wrap bubble-join-wrap zoom-effect'+o+'">     <div class="fuzzy-bubble"></div>     <div class="description-bubble">       <div class="description-bubble__content description-bubble__text">         <a href="#"'+l+'>           <h5 class="text-in-bubble text-white">'+c+"</h5>         </a>       </div>     </div>   </div> </div>"}),t.htmlSchedule=u,t.htmlClassDetail=p,t},renderClassesV2:function(e){var v=this,g=v.options.lineClamp||3,b="",y="";return e.forEach(function(e){var t,a="item-"+e.siteId+"_"+e.classId,n=e.level?"<span>"+e.level+"</span>":"",i=e.isSub?'<span class="substitute">'+e.subStaff+"</span><br>"+e.teacherName:e.teacherName,s=" avoid-click",o=v.prepareCtaBtnAttrs(e),l='<a href="'+v.options.ctaUpgradeUrl+'" class="btn-upgrade"><span class="button-circle"></span><span class="button-title">'+v.options.ctaUpgradeText+"</span></a>",r="",d=" no-cta",c="",h="Add to Calendar",u="",p=""==e.desc?"d-none":"",m=v.isHasZoomTag(e),f="",f=m?'<a href="#"'+o+' data-zoom="true"><span class="button-circle"></span><span class="button-title">'+v.options.ctaLiveText+"</span></a>":'<a target="_blank" href="'+WP_LIVESTREAM_PAGE+e.classId+'"'+o+'><span class="button-circle"></span><span class="button-title">'+v.options.ctaLiveText+"</span></a>";e.enableCtaBtn&&(s=" clickable",r=v.allowedAccess?f:l,d=""),e.showComingSoon&&(r='<a href="#">'+v.options.comingSoonText+"</a>",d=" coming-soon"),e.enableCtaBtn||(o=T.cookie("addtocalendar_"+e.classId+e.classSchedId),l=-1!==(f=v.options.livePlayerUrl).indexOf("?")?"&":"?",f=void 0!==f&&f?f+l+"id="+e.classId:"",o&&(u="added",h='<div class="atcb-checkmark"></div> Added to Calendar'),c='<span class="addtocalendar '+u+'" data-class-id="'+e.classId+'" data-class-schedule-id="'+e.classSchedId+'" data-end-timestamp="'+e.endTimeZonedStamp+'">  <button type="button" class="btn-transparent atcb-link">'+h+'</button>  <var class="atc_event">    <var class="atc_date_start">'+e.startDateTime+'</var>    <var class="atc_date_end">'+e.endDateTime+'</var>    <var class="atc_timezone">'+e.timeZone+'</var>    <var class="atc_title">'+e.title+'</var>    <var class="atc_location">'+e.location+'</var>    <var class="atc_organizer">'+e.staff+'</var>    <var class="atc_description">'+f+"</var>  </var></span>"),y=m?' <p class="live-content-item__description-watch'+d+'" data-zoom="true">'+r+"</p>":' <p class="live-content-item__description-watch live-modal '+d+'">'+r+"</p>",v.allowedNewTemplate?(t="")!=(t=e.showComingSoon||""==r?'<div class="live-class-item-btn-secondary">'+c+"</div>":'<div class="live-class-item-btn-primary">'+r+"</div>")&&(b+='<div class="live-class-item'+s+'" data-target="'+a+'"><div class="live-class-item-left"> <div class="live-class-item-left-wrapper">   <div class="live-class-item-time-wrapper">     <div class="live-class-item-time">'+e.startTime+"<span>"+e.startMeridien+'</span></div>     <div class="live-class-item-text">Starts</div>   </div>   <div class="live-class-item-time-wrapper last">     <div class="live-class-item-time">'+e.endTime+"<span>"+e.endMeridien+'</span></div>     <div class="live-class-item-text">Ends</div>   </div>   <div class="live-class-item-teacher">     <div class="live-class-item-teacher-avatar">       <img src="'+e.teacherImg+'" alt="Avatar">     </div>     <div class="live-class-item-teacher-info">       <div class="live-class-item-style">         <span>'+e.title+'</span>         <img src="'+LIVESTREAM_IMAGE_BASE_URL+'exclamation-mark.svg" alt="">         <div class="live-class-item-description">                  '+e.desc+'         </div>       </div>       <div class="live-class-item-teacher-name">'+i+'</div>     </div>   </div> </div> <div class="live-class-item-info class-duration-level">   <div class="live-class-item-info-el">     <img src="'+LIVESTREAM_IMAGE_BASE_URL+'clock.svg" alt="Clock">     <span>'+e.duration+' min</span>   </div>   <div class="live-class-item-info-el">     <img src="'+LIVESTREAM_IMAGE_BASE_URL+'level.svg" alt="Level">     '+n+'   </div> </div></div><div class="live-class-item-right"> '+t+"</div></div>"):(t=e.subStaff?'<span class="substitute">'+e.subStaff+"</span>":"",!e.showComingSoon&&""!==r||(y='<div class="live-content-item__description-watch coming-soon"><div class="live-content-item__schedule">'+c+"</div></div>"),b+='<div class="line-separator"></div><div class="live-content-item__level">'+n+'</div><div class="live-content-item'+s+'" data-target="'+a+'"> <div class="live-content-item__info">   <div class="live-content-item__description">     <h5>'+e.title+"</h5>     "+t+'     <div class="context-1 live-content-item__description-row">       <div class="live-content__avatar"><img src="'+e.teacherImg+'" alt=""></div>       <div class="live-content-item__teacher-name">'+e.teacherName+'</div>       <div class="context-1 live-content-item__lesson-length">         <img src="'+v.options.imageBaseUrl+'clock.svg" alt="clock icon">         <span class="pl-1">'+e.duration+' min</span>       </div>     </div>   </div> </div> <div class="live-content-item__content" data-text-overflow-clamp data-line-clamp="'+g+'">   <p class="description-paragraph">'+e.desc+'</p>   <button type="button" class="view-more '+p+'" data-view-description aria-label="See more description">     <span class="inner">       <span>Show more</span>       <span>Show less</span>     </span>   </button> </div> <div class="live-content-item__schedule">   <p class="context-3">'+e.dayOfWeek+'</p>   <p class="live-content-item__schedule-time">'+e.startTime+"<span> "+e.startMeridien+"</span></p> </div>"+y+' <div class="col-12 schedule-cta-result d-none"></div></div>')}),b},buildRecordHtml:function(e){var c=this,h=c.options.lineClamp||3,u="";return e.forEach(function(e){var t="item-"+e.siteId+"_"+e.classId,a=e.level?"<span>"+e.level+"</span>":"",n=e.isSub?'<span class="substitute">'+e.subStaff+"</span><br>"+e.teacherName:e.teacherName,i=" avoid-click",s=c.prepareCtaBtnAttrs(e),o='<a href="'+c.options.ctaUpgradeUrl+'">'+c.options.ctaUpgradeText+"</a>",l="",r=" no-cta",d=""==e.desc?"d-none":"",s='<a href="#"'+s+' data-zoom="true">'+c.options.ctaLiveText+"</a>";e.enableCtaBtn&&(i=" clickable",l=c.allowedAccess?s:o,r=""),e.showComingSoon&&(l='<a href="#">'+c.options.comingSoonText+"</a>",r=" coming-soon"),u+='<div class="line-separator"></div><div class="live-content-item'+i+'" data-target="'+t+'"> <div class="live-content-item__info">   <div class="live-content__avatar"><img src="'+e.teacherImg+'" alt=""></div>   <div class="live-content-item__description">     <h5>'+e.title+'</h5>     <p class="context-1">'+n+'</p>     <p class="context-1">'+a+"       <span>"+e.duration+' min</span>     </p>   </div> </div> <div class="live-content-item__content" data-text-overflow-clamp data-line-clamp="'+h+'">   <p class="description-paragraph">'+e.desc+'</p>   <button type="button" class="view-more '+d+'" data-view-description aria-label="See more description">     <span class="inner">       <span></span>       <span></span>     </span>   </button> </div> <div class="live-content-item__schedule">   <p class="context-3">'+e.dayOfWeek+'</p>   <p class="live-content-item__schedule-time">'+e.startTime+"<span>"+e.startMeridien+'</span></p>   <p class="context-3 live-content-item__schedule-zone">'+e.locationTimeZone+'</p> </div><p class="live-content-item__description-watch play-record"><a href="/records/?video_id='+e.brightcoveId+'">Play</a></p> <div class="col-12 schedule-cta-result d-none"></div></div>'}),u},destroyScrollbar:function(){var e=this.element.find(".live-content-wrap").data("jsp");e&&e.destroy()},renderScrollbar:function(e){e=e||!1;this.isShowFilter&&this.element.find(".live-content-wrap").jScrollPane({autoReinitialise:e})},destroyWaypoint:function(){i&&i.destroy()},renderWaypoint:function(e,t,a){i=new Waypoint({element:e,handler:function(e){"down"===e&&"function"==typeof t&&t()},enabled:!1,offset:a?"100%":"bottom-in-view",context:a})},aditionalHeaderForFilterWidget:{init:function(e){this.plugun=e,I[this.plugun.options.pluginName]={},I[this.plugun.options.pluginName].additionalSearchTagList=[],this.grabFromLocalStorage(),this.renderTags(),this.handleEvent()},handleEvent:function(){var t=this,e="records-list"==this.plugun.options.pluginName?".records-tab":".live-tab ",a=this.plugun;T(e).length||(e=".live-schedule-block"),T(e).find(".dropdown-menu .dropdown-item").unbind("click").on("click",function(e){t.plugun=a,t.onAddTag(e,t)}),this.plugun.element.find(".additional-tags-box").unbind("click").on("click",".tag a",function(e){e.preventDefault(),T('#search_tagsinput span.tag[data-title="'+T(e.target).parent().data("title")+'"] a').trigger("click"),t.onRemoveTag(e,t)}),I.on("click","[data-reset-filter]",function(e){e.preventDefault(),T.each(t.plugun.element.find(".additional-tags-box .tag a"),function(e,t){T(t).trigger("click"),T('#search_tagsinput span.tag[data-title="'+T(t).parent().find("span").text()+'"] a').trigger("click")})})},renderTags:function(){var a=this;T.each(I[this.plugun.options.pluginName].additionalSearchTagList,function(e,t){a.addOrUpdateTagHtml("add",t.category,t.value,t.label)})},updateLocalStorage:function(){I[this.plugun.options.pluginName].additionalSearchTagList;localStorage.setItem("searchStorage",JSON.stringify(I[this.plugun.options.pluginName].additionalSearchTagList))},grabFromLocalStorage:function(){localStorage.getItem("searchStorage")?I[this.plugun.options.pluginName].additionalSearchTagList=T.parseJSON(localStorage.getItem("searchStorage")):I[this.plugun.options.pluginName].additionalSearchTagList=[]},onAddTag:function(e,t){var a=T(e.target),n=a.attr("data-label"),i=a.attr("data-value"),e=a.attr("data-category"),a=t.addOrUpdateTagList(e,i,n);switch(t.addOrUpdateTagHtml(a,e,i,n),t.updateLocalStorage(),t.plugun.options.pagetype){case"livepage":t.plugun.renderSchedule();break;case"records":t.plugun.renderRecordsList()}},getTagIcon:function(e){return"duration"===e?"clock":"teacherName"===e?"person":"level"===e?"level_up":""},addOrUpdateTagHtml:function(e,t,a,n){var i=this.getTagIcon(t),i='<span class="tag" data-label="'+n+'" data-value="'+a+'" data-category="'+t+'">'+(i?'<img src="'+this.plugun.options.imageBaseUrl+i+'.svg" alt="'+t+'">':"")+"<span>"+n+'</span><a href="#">✕</a></span>';switch(e){case"add":this.plugun.element.find(".additional-tags-box").append(i);break;case"update":var s=this.plugun.element.find(".additional-tags-box").find(T('*[data-category="'+t+'"]')).first();s.attr("data-label",n),s.attr("data-value",a),s.find("span").html(n)}s=this.plugun.element.find(".additional-tags-box [data-reset-filter]"),n=this.plugun.element.find(".additional-tags-box [data-category]").length;!s.length&&0<n&&this.plugun.element.find(".additional-tags-box").prepend('<span class="btn-negative-transparent" data-reset-filter tabindex="1">Reset filters</span>')},addOrUpdateTagList:function(e,t,a){var n=this.getIndexByCategory(e);return-1<n?(I[this.plugun.options.pluginName].additionalSearchTagList[n].label=a,I[this.plugun.options.pluginName].additionalSearchTagList[n].value=t,"update"):(I[this.plugun.options.pluginName].additionalSearchTagList.push({label:a,value:t,category:e}),"add")},removeFromTagList:function(e){e=this.getIndexByCategory(e);I[this.plugun.options.pluginName].additionalSearchTagList.splice(e,1)},getIndexByCategory:function(t){return I[this.plugun.options.pluginName].additionalSearchTagList.findIndex(function(e){return e.category===t})},onRemoveTag:function(e,t){var a=T(e.target).closest(".tag"),e=(a.attr("data-label"),a.attr("data-category"));switch(t.removeFromTagList(e),t.updateLocalStorage(),a.remove(),t.plugun.options.pagetype){case"livepage":t.plugun.renderSchedule();break;case"records":t.plugun.renderRecordsList()}a=t.plugun.element.find(".additional-tags-box [data-reset-filter]");t.plugun.element.find(".additional-tags-box [data-category]").length<1&&a.remove()}},renderTagFilter:function(){T.widget("custom.autocomplete",T.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items","> :not(.ui-autocomplete-category)")},_renderMenu:function(n,e){var i=this,s="";T.each(e,function(e,t){var a;t.category!==s&&(n.append("<li class='ui-autocomplete-category'>"+t.category+"</li>"),s=t.category),a=i._renderItemData(n,t),t.category&&a.attr("aria-label",t.category+" : "+t.label)})}}),this.renderTagList()},renderTagList:function(){var n=this,a=n.options.filterLimitItems||4,i=this.options.pagetype,e="records"==i?".records-tab":".live-tab ";this.$searchInput.tagsInput({placeholder:n.options.tagsInputPlaceholder,limit:a,maxChars:50,autocomplete:{appendTo:e+" .ui-autocomplete-wrapper",autoFocus:!0,delay:500,source:function(e,t){t(n.filterTags(n.getSourceTags(),e.term))},select:function(e,t){if(n.searchTagList.length<a&&!function(e,t,a){for(var n=0;n<e.length;n++)if(e[n].label===t&&e[n].category===a)return!0}(n.searchTagList,t.item.label,t.item.category))switch(n.searchTagList.push({label:t.item.label,category:t.item.category}),n.handleSetHash(),i){case"livepage":n.renderSchedule();break;case"records":n.renderRecordsList()}},open:function(e,t){T.fn.handleHeightAutoComplete(!0)}},onAddTag:function(e,t){n.processSearchBoxTags(t)},onChange:function(e,t){n.processSearchBoxTags(t)},onRemoveTag:function(e,t){n.processSearchBoxTags(t,!0);var a=n.searchTagList.findIndex(function(e){return e.label===t});switch(n.searchTagList.splice(a,1),i){case"livepage":n.renderSchedule();break;case"records":n.renderRecordsList()}n.handleSetHash()}}),T(".ui-autocomplete-input").css("font-size","26px")},processSearchBoxTags:function(e,t){var i=this,s=i.element.find(".additional-tags-box");"string"==typeof e&&t?s.find('span[data-title="'+e+'"]').remove():(T("#search_tagsinput span.tag").each(function(e,t){var a=T(t),n=a.find("span").text(),t="search-box";a.attr({"data-category":t,"data-title":n}),a.find("a").text("✕"),s.find('span[data-title="'+n+'"]').length<1&&s.append(a.clone().prepend('<img src="'+i.options.imageBaseUrl+'magnifier.svg" alt="'+t+'">')),a.hide()}),t=s.find("[data-reset-filter]"),e=s.find("[data-category]").length,!t.length&&0<e&&s.prepend('<span class="btn-negative-transparent" data-reset-filter tabindex="1">Reset filters</span>'))},getSourceTags:function(){var i=[],s=this;return this.dayActiveData&&this.dayActiveData.length&&this.liveFilterData.forEach(function(e,t){var a,n=e.label;switch(e.category){case"Teacher":a="teacher";break;case"Class Name":a="class";break;case"Level":a="level"}g(s.dayActiveData,n,a)&&i.push(e)}),i},filterTags:function(e,t){var a=t.trim().toLowerCase();return e.filter(function(e){return 0<=e.label.trim().toLowerCase().indexOf(a)})},renderDateFilter:function(){for(var e=this.element.find(".filter-wrapper"),t="",a=0;a<=6;a++){var n=moment().add(a,"days"),i=n.format("X"),s=n.format("dddd"),o=s.slice(0,1),n=n.format("Do");0===a?n="Today":1===a&&(n="Tomorrow"),t+='<div class="filter-item active" title="'+s+'" data-select-day="'+i+'"> <div class="filter-content mx-auto"><h5>'+o+'</h5></div> <div class="filter-description"><p>'+n+"</p></div></div>"}e.empty().append(t),this.showHideControl()},renderErrorMessage:function(e){var t=e.message;this.element.find('[data-target="item-'+e.itemId+'"] .schedule-cta-result').html(t).toggleClass("d-none",void 0===t||""===t)},renderErrorBlock:function(e){this.element.find(".filter-day-result").remove(),this.element.find(".live-content-wrap").html('<label class="text-danger filter-day-result">'+e+"</label>")},destroy:function(){T.removeData(this.element[0],this.options.pluginName)}},T.fn[n]=function(t,a){return this.each(function(){var e=T.data(this,n);e?e[t]&&e[t](a):T.data(this,n,new l(this,t))})},T.fn[s]=function(t,a){return this.each(function(){var e=T.data(this,s);e?e[t]&&e[t](a):T.data(this,s,new l(this,t))})},T.fn[n].defaults={pluginName:n,pagetype:"livepage",scheduleEventActiveClass:"item-active",scheduleEventDetailActiveClass:"thumbnail-active",scheduleEventItem:"[data-live-item]",classViewDescription:"opened-description",filterLimitItems:4,useParallax:0,lineClamp:3,useEndDate:0,classesPerPage:10,defaultFilterClasses:5,timeAccess:300,timeComingSoon:7200,tagsInputPlaceholder:"Start typing a teacher, level, or class name...",allowedAccess:!1,allowedNewTemplate:!1,ctaJoinText:"Join Now",ctaLiveText:"Live Now",comingSoonText:"Coming Soon",ctaUpgradeText:"Upgrade",ctaUpgradeUrl:"/account/#payments",msgFilterDay:"No days selected",limitScroll:0,heightTextTablet:24},T.fn[s].defaults={pluginName:s,pagetype:"records",scheduleEventActiveClass:"item-active",scheduleEventDetailActiveClass:"thumbnail-active",scheduleEventItem:"[data-live-item]",classViewDescription:"opened-description",filterLimitItems:4,useParallax:0,lineClamp:3,useEndDate:0,classesPerPage:10,defaultFilterClasses:5,timeAccess:300,timeComingSoon:7200,tagsInputPlaceholder:"Start typing a teacher, or class name...",allowedAccess:!1,allowedNewTemplate:!1,ctaJoinText:"Join Now",ctaLiveText:"Live Now",comingSoonText:"Coming Soon",ctaUpgradeText:"Upgrade",ctaUpgradeUrl:"/account/#payments",msgFilterDay:"No days selected",limitScroll:0,heightTextTablet:24,promoPage:!1},T(function(){T("[data-"+n+"]")[n]({pluginName:n}),T("[data-"+s+"]")[s]({pluginName:s})})}(jQuery,window),function(n,i){var s="login-nav";function o(e,t){this.element=n(e),this.options=n.extend({},n.fn[s].defaults,this.element.data(),t),this.init()}o.prototype={init:function(){var e=this.element,t=this.options,a=e.find("."+t.container);e.on("click",function(){a.stop().fadeIn()}),e.hover(function(){a.stop().fadeIn()},function(){a.stop().fadeOut()})},destroy:function(){n.removeData(this.element[0],s)}},n.fn[s]=function(t,a){return this.each(function(){var e=n.data(this,s);e?e[t]?e[t](a):i.console&&console.log(t?t+" method is not exists in "+s:s+" plugin has been initialized"):n.data(this,s,new o(this,t))})},n.fn[s].defaults={container:"login-nav",control:"login-control"},n(function(){n("[data-"+s+"]")[s]()})}(jQuery,window),function(s,e){"use strict";var n="menu-header",t="click."+n,a="document-click."+n,o="active";function i(e,t){this.element=s(e),this.options=s.extend({},s.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.cacheDOM(),this.handleEvent()},cacheDOM:function(){this.$doc=s(document),this.$btn=this.element.find("[data-menu-btn]"),this.$navList=this.element.find("[data-menu-list]"),this.$navbarAvatar=this.element.find("[data-navbar-avatar]"),this.$actionList=this.element.find("[data-action-list]"),this.$iconSearch=this.element.find(".global-search-icon"),this.$iconCloseSearch=this.element.find(".close-global-search")},handleEvent:function(){var i=this;this.$btn.off(t).on(t,function(){i.handleShowMenu()}),this.$navbarAvatar.off(t).on(t,function(e){e.preventDefault(),i.handleAction()}),s(e).on("breakpoint:change."+n,function(){i.hideMenu(),i.hideAction()}),this.$doc.off(a).on(a,function(e,t){i.clickOuside(t)}),this.$iconSearch.off(t).on(t,function(){var e=s(".header-main-mobile").is(":visible"),t=s(this).closest(".navbar").find(".overlay-search"),a=s("header"),n=a.height(),a=a.find(".sub-header"),a=void 0!==a&&a.length?a.height():0;e&&i.handleShowMenu(),t.css({height:n-a,top:a}).toggleClass(o)}),this.$iconCloseSearch.off(t).on(t,function(){s(this).parents(".overlay-search").toggleClass(o),s(this).siblings(".overlay-content").find("input").val("")})},clickOuside:function(e){var a=e.target,e=function(e,t){return!e.is(a)&&0===e.has(a).length&&e.hasClass(o)&&!t.is(a)&&0===t.has(a).length&&t.hasClass(o)};e(this.$navbarAvatar,this.$actionList)&&this.hideAction(),e(this.$btn,this.$navList)&&this.hideMenu()},handleShowMenu:function(){this.$btn.hasClass(o)?this.hideMenu():this.showMenu()},showMenu:function(){this.$btn.addClass(o),this.$navList.addClass(o)},hideMenu:function(){this.$btn.removeClass(o),this.$navList.removeClass(o)},handleAction:function(){this.$navbarAvatar.hasClass(o)?this.hideAction():this.showAction()},showAction:function(){this.$navbarAvatar.addClass(o),this.$actionList.addClass(o)},hideAction:function(){this.$navbarAvatar.removeClass(o),this.$actionList.removeClass(o)},destroy:function(){s.removeData(this.element[0],n)}},s.fn[n]=function(t,a){return this.each(function(){var e=s.data(this,n);e?e[t]&&e[t](a):s.data(this,n,new i(this,t))})},s.fn[n].defaults={},s(function(){s("[data-"+n+"]")[n]()})}(jQuery,window),function(){var n={};this.tmpl=function e(t,a){t=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):n[t]=n[t]||e(document.getElementById(t).innerHTML);return a?t(a):t}}(),function(o){"use strict";var n="playlist-framework-modal",a="click."+n,e="input."+n,l="d-none",r=!1,d=null;function i(e,t){this.element=o(e),this.options=o.extend({},o.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){var e=this;e.$form=e.element.find("form.form"),e.$loading=e.element.find(".img-loading"),e.$modalErrorMessage=e.element.find(".general-error"),e.$newPlaylistNameInput=e.element.find("[data-input-new-playlist]"),e.$btnAddPlaylist=e.element.find("[data-btn-add-playlist]"),e.$btnUpdatePlaylist=e.element.find("[data-btn-update-playlist]"),e.selectedPlaylists="[data-radiobox]",e.currentModalId=null,e.$modalDeletePlaylist=o("[ data-playlist-delete-modal]"),e.modalDeletePlaylistId=e.$modalDeletePlaylist.attr("id"),e.$modalBtnDelete=e.$modalDeletePlaylist.find("[data-btn-accept]"),e.$modalDeleteMessage=e.$modalDeletePlaylist.find(".general-error"),e.$modalBtnDeleteCached=null,e.handleEvents()},handleEvents:function(){var t=this;t.element.on("show.bs.modal",function(){d=t.$btnUpdatePlaylist.attr("data-video-id"),t.$modalErrorMessage.html(""),t.getAllPlaylistsEvent(function(e){t.renderUserPlaylist(e,!0)})}),t.$modalDeletePlaylist.on("hidden.bs.modal",function(){o("body").addClass("modal-open")}),t.$newPlaylistNameInput.off(e).on(e,function(){t.$modalErrorMessage.html(""),t.$btnAddPlaylist.toggleClass("d-none",!o(this).val().length)}),t.$newPlaylistNameInput.on("keypress",function(e){13===e.which&&(e.preventDefault(),t.$btnAddPlaylist.trigger(a))}),t.$btnAddPlaylist.off(a).on(a,function(){t.$modalErrorMessage.html(""),t.addPlaylistEvent(function(e){t.renderUserPlaylist(e,!1)})}),t.$btnUpdatePlaylist.off(a).on(a,function(e){e.preventDefault(),t.$modalErrorMessage.html(""),t.updatePlaylistEvent(o(this))}),t.element.on(a,"[data-btn-delete-playlist]",function(e){e.preventDefault(),t.$modalBtnDeleteCached=o(this),t.$modalErrorMessage.html(""),t.$modalDeleteMessage.html("").removeClass("mb-3")}),t.$modalBtnDelete.off(a).on(a,function(e){e.preventDefault(),t.$modalDeleteMessage.html("").removeClass("mb-3"),t.deletePlaylistEvent()})},getAllPlaylistsEvent:function(t){var a=this;a.showLoadingImg(),o.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"GET",data:{action:"get_playlists",videoId:d,formCheck:this.$btnUpdatePlaylist.data("form-check")},loader:!0}).done(function(e){e&&e.success&&"function"==typeof t&&t(e.data),a.hideLoadingImg()}).fail(function(e,t,a){})},getSelectedPlaylists:function(){var a=[],e=o(this.selectedPlaylists).filter(":checked");return o.each(e,function(e,t){t=o(t).data("playlist-id");t&&a.push(t)}),a},updateVideoMenuContext:function(e){},addPlaylistEvent:function(t){var n=this,e=n.$newPlaylistNameInput;r||(r=!0,n.showLoadingImg(),o.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:e.data("action"),playlistName:e.val(),formCheck:e.data("form-check")},loader:!0}).done(function(e){e&&e.success?"function"==typeof t&&t(e.data):n.$modalErrorMessage.html(e.data.message),r=!1,n.hideLoadingImg()}).fail(function(e,t,a){r=!1,n.hideLoadingImg(),n.$modalErrorMessage.html("Invalid request.")}))},updatePlaylistEvent:function(e){var n=this,t=n.getSelectedPlaylists();n.$btnUpdatePlaylist.prop("disabled",!0),r||(r=!0,n.showLoadingImg(),o.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:e.data("action"),videoId:e.attr("data-video-id"),playlistIds:t?t.join():null,formCheck:e.data("form-check")},loader:!0}).done(function(e){e&&e.success?(n.hideModal(),n.updateVideoMenuContext(e.data.inPlaylist)):n.$modalErrorMessage.html(e.data.message),r=!1,n.hideLoadingImg(),n.$btnUpdatePlaylist.prop("disabled",!1)}).fail(function(e,t,a){r=!1,n.hideLoadingImg(),n.$btnUpdatePlaylist.prop("disabled",!1),n.$modalErrorMessage.html("Invalid request.")}))},deletePlaylistEvent:function(){var n=this,i=n.$modalDeletePlaylist.find("form.form"),s=n.$modalDeletePlaylist.find(".img-loading"),t=n.$modalBtnDeleteCached,e=t.parents("form").find('[name="delete-nonce"]').val();n.$modalBtnDelete.prop("disabled",!0),r||(r=!0,i.addClass(l),s.removeClass(l),o.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:t.data("action"),playlistId:t.data("playlist-id"),videoId:d,formCheck:e},loader:!0}).done(function(e){e&&e.success?(n.$modalDeletePlaylist.modal("hide"),t.closest(".form-checkbox").remove(),n.updateVideoMenuContext(e.data.inPlaylist)):n.$modalDeleteMessage.html(e.data.message).addClass("mb-3"),n.$modalBtnDelete.prop("disabled",!1),r=!1,i.removeClass(l),s.addClass(l)}).fail(function(e,t,a){n.$modalDeleteMessage.html("Invalid request.").addClass("mb-3"),n.$modalBtnDelete.prop("disabled",!1),r=!1,i.removeClass(l),s.addClass(l)}))},renderUserPlaylist:function(e,t){var a=this.element.find(".playlist-wrapper"),n=e.playlistData,i="",s=!1;t&&a.empty();for(var o=0;o<n.length;o++){var l=n[o].playlistId,r=n[o].playlistName,d=n[o].inList;i+='<div class="form-checkbox">  <div class="form-group-wrap">    <div class="title-wrap">      <label for="playlist_name_'+l+'">        <input type="checkbox" name="playlist" id="playlist-item-'+l+'"'+(d?" checked ":"")+'               data-radiobox data-playlist-id="'+l+'">        <span class="radiomark"></span>        <span>'+r+'</span>      </label>      <div class="radio-detail">        <div class="button-rectangle-clear-md" data-btn-delete-playlist data-action="delete_playlist" data-playlist-id="'+l+'" data-toggle="modal" data-target="#'+this.modalDeletePlaylistId+'">          <div class="delete-text">Delete</div>\n          <div class="delete-icon">\n            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">\n              <path fill-rule="evenodd" clip-rule="evenodd" d="M8.32501 5.25C8.67247 3.53832 10.1858 2.25 12 2.25C13.8142 2.25 15.3275 3.53832 15.675 5.25H20C20.4142 5.25 20.75 5.58579 20.75 6C20.75 6.41421 20.4142 6.75 20 6.75H18.6505L16.8038 19.6768C16.7158 20.2926 16.1884 20.75 15.5664 20.75H8.43365C7.81158 20.75 7.28418 20.2926 7.19621 19.6768L5.34953 6.75H4C3.58579 6.75 3.25 6.41421 3.25 6C3.25 5.58579 3.58579 5.25 4 5.25H8.32501ZM9.87803 5.25C10.1869 4.37611 11.0203 3.75 12 3.75C12.9797 3.75 13.8131 4.37611 14.122 5.25H9.87803ZM8.65047 19.25L6.86476 6.75H17.1352L15.3495 19.25H8.65047Z" fill="black"/>\n            </svg>\n          </div>        </div>      </div>    </div>  </div></div>',s=!!d}a.append(i),s||this.updateVideoMenuContext(!1),this.resetForm()},showModal:function(e){var t=this;t.currentModalId=e.modalId,o(t.currentModalId).modal("show"),o(t.currentModalId).on("hide.bs.modal",function(){t.resetForm()})},hideModal:function(){o(this.currentModalId).modal("hide")},showLoadingImg:function(){this.$loading.removeClass(l),this.$form.addClass(l)},hideLoadingImg:function(){this.$loading.addClass(l),this.$form.removeClass(l)},resetForm:function(){this.$newPlaylistNameInput.val(""),this.$btnAddPlaylist.addClass("d-none")},destroy:function(){o.removeData(this.element[0],n)}},o.fn[n]=function(t,a){return this.each(function(){var e=o.data(this,n);e?e[t]&&e[t](a):o.data(this,n,new i(this,t))})},o.fn[n].defaults={method:"POST",url:yahAjax.ajaxurl},o(function(){o("[data-"+n+"]")[n]()})}(jQuery,window),function(c,h){var u="navigation",p=c(h),m=c("html"),f=m.find("body");function n(e,t){this.element=c(e),this.options=c.extend({},c.fn[u].defaults,this.element.data(),t),this.init()}function v(e,t){var a=e.options,e=t,t=e.parent();t.parents(a.liParent).find("."+a.open).hide(),t.siblings().hide(),e.addClass(a.open).next().show()}n.prototype={init:function(){var e,i=this,s=this.options,t=this.element,a=t.find(s.container),n=t.find(s.btnOpen),o=t.find(s.btnClose),l=t.find(s.scrollAble),r=t.find(s.liParent),d={};e=s.overlay,(t=f.find("."+e)).length||(t=c('<div class="'+e+'"></div>'),f.append(t)),d=t,n.on("click."+u,function(){c(this).attr("aria-expanded","true"),m.addClass(s.pinBody),d.show(),a.css("display",""),p[0].setTimeout(function(){a.addClass(s.navTransition+" "+s.active),l.scrollTop(1)},401)}),o.add(d).on("click."+u,function(){n.attr("aria-expanded","false"),m.removeClass(s.pinBody),a.removeClass(s.active),p[0].setTimeout(function(){a.removeClass(s.navTransition),l.scrollTop(1),a.css("display","none")},401),d.hide()}),a.find(s.navCtrls).on("click."+u,function(e){var t,a,n;h.Modernizr.mq("(max-width: 991px)")&&(t=c(this),e.preventDefault(),e.stopPropagation(),t.is("."+s.open)?(n=t,e=(a=i).options,(n=(a=n).parent()).parents(e.liParent).find("."+e.open).show(),a.removeClass(e.open).next().hide(),n.siblings().show()):v(i,t))}),a.find(s.menuItem).on("click."+u,function(e){h.Modernizr.mq("(min-width: 992px)")&&(a.find("ul.sub-menu").hide(),c(this).find("ul").stop().fadeIn()),h.Modernizr.mq("(max-width: 991px)")&&o.click()}),r.hover(function(){h.Modernizr.mq("(min-width: 992px)")&&c(this).find("ul").stop().fadeIn()},function(){h.Modernizr.mq("(min-width: 992px)")&&c(this).find("ul").stop().fadeOut()}),p.on("resize."+u,function(){h.Modernizr.mq("(max-width: 767px)")?a.css("display","none"):(o.trigger("click."+u),l.removeAttr("style"),a.find("[style]").removeAttr("style"))}).trigger("resize."+u)},destroy:function(){c.removeData(this.element[0],u)}},c.fn[u]=function(t,a){return this.each(function(){var e=c.data(this,u);e?e[t]?e[t](a):h.console&&console.log(t?t+" method is not exists in "+u:u+" plugin has been initialized"):c.data(this,u,new n(this,t))})},c.fn[u].defaults={scrollAble:".scrollable",overlay:"overlay",btnOpen:".btn-nav-open",btnClose:".btn-close",pinBody:"pin-body",container:".navigation",liParent:".has-child",menuItem:".menu-item",navCtrls:".has-child > a",navTransition:"transform-transition",open:"open",active:"active"},c(function(){c("[data-"+u+"]")[u]()})}(jQuery,window),function(l,r){"use strict";var s,n="filter-demand",e="click."+n,o="";function i(e,t){this.element=l(e),this.options=l.extend({},l.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.$dropdownItem=this.element.find(".dropdown-item:not(.empty-line)"),this.$demandVideosList=l("[data-demand-videos-list]"),this.$filterListItems=l(".filter-demand-selections"),this.$boxFilter=l("[data-box-filter]"),this.hashPrefixLength=this.options.hashPrefix.length,this.allVideosHash=this.options.hash.substring(this.hashPrefixLength),this.itemsPerPage=this.options.itemsPerPage?parseInt(this.options.itemsPerPage):12,this.$boxFilter.addClass("box-filter"),this.keywordInputSelector="[data-video-search-keyword]",this.$keywordInput=l(this.keywordInputSelector),this.$keywordBtn=l("[data-video-search-btn]"),o=l.trim(this.options.keyword),this.renderFilterList(),this.handleFilterEvents()},renderFilterList:function(){var i=this,e=(r.location.hash.length<=0?i.options:r.location).hash,t=i.options.hash===e,e=e.substring(i.hashPrefixLength).split("/"),s=0;if(t)return o.length>=i.options.minLength?void i.getVideos(1):void i.renderAllVideosFilter();l.each(e,function(e,t){var a=l('.dropdown-item[data-filter-slug="'+t+'"]'),n=a.closest(".filter-demand-item");a.length&&(a.addClass("active"),i.renderFilterListItem(a.text(),t,n.attr("data-group-name")),s++)}),s<1?(i.updateLocationHash(i.options.hash),i.renderFilterList()):i.getVideos(1)},renderFilterListItem:function(e,t,a,n){var i=this,s=i.$filterListItems.find('[data-filter-slug="'+t+'"]'),e='<span class="filter-demand-label" data-filter-group="'+a+'"      data-filter-slug="'+t+'">'+i.getTagIcon(a)+'  <span class="filter-demand-slug">'+e+'</span>  <span class="filter-demand-close" data-remove-filter-item>    <span class="icon-bar"></span>    <span class="icon-bar"></span>  </span></span>';return s.length?n?(s.remove(),i.$filterListItems.find('[data-filter-slug="all-videos"]').remove(),i.$filterListItems.find("[data-reset-filter]").after(e)):void l(r).trigger("scrollmagic:change"):n?(i.$filterListItems.find('[data-filter-slug="all-videos"]').remove(),i.$filterListItems.find("[data-reset-filter]").after(e)):i.$filterListItems.append(e)},handleFilterEvents:function(){var t,a,s=this;l("[data-filter-group-items-rd]").on("show.bs.dropdown",function(){s.$boxFilter.css({overflow:"hidden"})}).on("shown.bs.dropdown",function(){var e=l(this).find(".dropdown-menu");e.find('[class^="dropdown"]').wrapAll(l('<div class="scroll-panel"></div>').css({"max-height":e.css("max-height"),width:e.width()})),t=e.find(".scroll-panel").jScrollPane(),a=t.data("jsp"),l(".jspVerticalBar").remove(),l(".jspPane").css("width","100%")}).on("hidden.bs.dropdown",function(){s.$boxFilter.removeAttr("style");var e=l(this).find(".dropdown-menu").find(".dropdown-item");a.destroy(),t=void 0,e.unwrap()}),l(".dropdown-menu").on("click.bs.dropdown",function(e){e.stopPropagation()}),s.$dropdownItem.off(e).on(e,function(){var e=l(this),t=e.data("filter-slug"),a=e.closest("[data-filter-group-items-rd]"),n=a.data("group-name"),i=s.$filterListItems.find('[data-filter-group="'+n+'"]');a.find(".dropdown-toggle").dropdown("toggle"),i.length?(n=i.attr("data-filter-slug"),n=r.location.hash.replace(n,t),a.find(".dropdown-item").removeClass("active"),i.attr("data-filter-slug",t),i.find(".filter-demand-slug").text(e.text()),s.updateLocationHash(n),s.renderFilterList()):s.updateHash(t,!0)}),s.$filterListItems.off(e).on(e,"[data-remove-filter-item]",function(){var e=l(this).parent(".filter-demand-label"),t=e.data("filter-group"),a=e.data("filter-slug");"all-videos"===a&&s.resetKeywordSearch(),e.remove(),"keyword"===t?s.resetKeywordSearch():l('[data-group-name="'+t+'"]').find(".dropdown-item").removeClass("active"),s.updateHash(a,!1)}),l("[data-reset-filter]").off(e).on(e,function(){s.resetKeywordSearch(),l("[data-filter-group-items-rd] .dropdown-item").removeClass("active"),s.updateHash(s.allVideosHash,!1)}),l(document).on("keyup",s.keywordInputSelector,function(e){var t=l(this),a=l.trim(t.val()),n=s.options.minLength,i=o===a;13===e.keyCode&&(o.length<1&&a.length<1||(a.length>=n?(o=a,t.val("").trigger("change"),s.setKeywordSearch(a),i||s.getVideos(1)):(s.resetKeywordSearch(),s.renderAllVideosFilter())))}),s.$keywordBtn.on("click",function(){l.trim(s.$keywordInput.val()).length>=s.options.minLength&&s.$keywordInput.trigger(l.Event("keyup",{keyCode:13}))})},setKeywordSearch:function(e){var t=new URL(r.location);t.searchParams.set("keyword",e),r.history.pushState(null,"",t.toString())},resetKeywordSearch:function(){var e;0<o.length&&(o="",(e=new URL(r.location)).searchParams.delete("keyword"),r.history.pushState(null,"",e.toString()))},renderAllVideosFilter:function(){this.$filterListItems.find(".filter-demand-label:not([data-reset-filter])").remove(),this.updateLocationHash(this.options.hash),this.renderFilterListItem("All Videos",this.allVideosHash,""),this.getVideos(1)},updateLocationHash:function(e){r.location.hash=e},updateHash:function(e,t){var a,n=this,i=r.location.hash,s=i.substring(n.hashPrefixLength).split("/"),o=l.inArray(e,s);if(e===n.allVideosHash)return n.updateLocationHash(n.options.hash),void n.renderFilterList();0<s.length&&(-1!==(a=l.inArray(n.allVideosHash,s))&&(s.splice(a,1),n.$filterListItems.find('.filter-demand-label[data-filter-slug="'+n.allVideosHash+'"]').remove(),r.location.hash=n.options.hashPrefix+s.join("/"))),t&&-1===o&&s.push(e),t||-1===o||s.splice(o,1),s=n.options.hashPrefix+s.join("/"),i!==n.options.hashPrefix+s&&(n.updateLocationHash(s),n.renderFilterList())},renderErrorBlock:function(e,t){this.element.find(".filter-result").remove(),t?this.$demandVideosList.html('<label class="text-danger filter-message">'+e+"</label>"):(t=l("input.hidden-asset-path").val(),this.$demandVideosList.html('<div class="no-results__wrapper"><img src="'+t+'/images/ondemand-no-results.png" alt="no-results-image">'+e+"</div>"))},getVideos:function(t){var n=this,e=l(".filter-demand-selections").find('[data-filter-group="teacher"]').length;n.$keywordInput.prop("disabled",!0),n.$keywordBtn.prop("disabled",!0),o.length>=n.options.minLength&&n.renderFilterListItem(o,"keyword","keyword",!0),l.fn.callAjaxGlobal({url:yahAjax.ajaxurl,data:{action:n.options.action,hash:r.location.hash,staff:e?1:0,itemsPerPage:n.itemsPerPage,page:t,keyword:o},loader:!0}).done(function(e){n.$keywordInput.prop("disabled",!1),n.$keywordBtn.prop("disabled",!1),e&&e.success&&(s&&s.destroy(),0===parseInt(e.data.total)?n.renderErrorBlock('<span class="no-results__title">There are no results matching your filters</span><span class="no-results__subtitle">Please change your selection</span>',!1):n.renderVideoItems(e.data.asset_list_html,e.data.total,t))}).fail(function(e,t,a){n.$keywordInput.prop("disabled",!1),n.$keywordBtn.prop("disabled",!1),n.renderErrorBlock(e.responseText,!0)})},getTagIcon:function(e){if(0===e.length)return"";return'<img src="'+l("input.hidden-asset-path").val()+{vibe:"/images/ondemand-vibe.svg",duration:"/images/ondemand-duration.svg",teacher:"/images/ondemand-teacher.svg",focus:"/images/ondemand-focus.svg",yogaStyle:"/images/ondemand-style.svg",level:"/images/ondemand-level.svg",keyword:"/images/magnifier.svg"}[e]+'" alt="filter icon">'},renderVideoItems:function(e,t,a){var n=this,i=a*n.itemsPerPage;t<i&&(i=t),n.element.find(".filter-result").remove(),n.$filterListItems.before('<label class="filter-result">Showing <span>'+i+"</span> of "+t+" videos</label>"),1===a?n.$demandVideosList.html(e):n.$demandVideosList.append(e),l(r).trigger("scrollmagic:change"),l("[data-toggle-action]")["toggle-action"]("init"),l.fn.handleActionOnDemand(),i<t&&(s=new Waypoint({element:n.$demandVideosList,handler:function(e){"down"===e&&n.getVideos(a+1)},offset:"bottom-in-view"}))},destroy:function(){l.removeData(this.element[0],n)}},l.fn[n]=function(t,a){return this.each(function(){var e=l.data(this,n);e?e[t]&&e[t](a):l.data(this,n,new i(this,t))})},l.fn[n].defaults={hashPrefix:"#/",hash:"#/all-videos",minLength:2,keyword:""},l(function(){l("[data-"+n+"]")[n]()})}(jQuery,window),function(o,i){"use strict";var n="onboarding-process",l=".step-content",e="click."+n;function s(e,t){this.element=o(e),this.options=o.extend({},o.fn[n].defaults,this.element.data(),t),this.init()}s.prototype={init:function(){this.itemImage=this.element.find("[data-thumb-image]"),this.itemRedesigned=this.element.find("[data-redesigned-item]"),this.closeBtn=this.element.find("[data-notification-close]"),this.continueBtn=this.element.find("[data-continue-btn]"),this.backBtn=this.element.find("[data-back-btn]"),this.handleEvent()},handleEvent:function(){var s=this;s.itemImage.on("click",function(e){var t=o(this),a=t.find('input[type="checkbox"]'),n=a.prop("checked"),i="unchecked";t.toggleClass("item-checked").removeClass(i),a.prop("checked",!n),n&&t.addClass(i);t=o(this).closest(l),i=t.find('input[type="hidden"]'),t=t.find('input[type="checkbox"]:checked');s.storeCheckedValue(t,i),e.preventDefault()}),s.itemRedesigned.on("click",function(e){var t=o(this).find("input"),a=t.closest(l),n=a.find('input[type="hidden"]'),a=a.find('input[type="checkbox"]:checked');t.closest(".redesigned-checkbox").toggleClass("active",t.prop("checked")),s.storeCheckedValue(a,n)}),s.closeBtn.on("click",function(){o(this).closest(".top-notification-wrapper").slideUp()}),s.backBtn.off(e).on(e,function(e){e.preventDefault();var t=o(this).closest("[data-onboarding-step]"),e=t.prev(".step-content");e.length&&(t.hide(),e.show())}),s.continueBtn.off(e).on(e,function(e){e.preventDefault();var t=o(this).closest("[data-onboarding-step]"),a=t.next(),e=t.find('input[type="hidden"]').val(),n={action:"ywah__onboarding__process_step",nonce:helper_gateway.nonce};e.length&&(a.length?(t.hide(),a.show()):(s.element.find('[data-onboarding-step] input[type="hidden"]').each(function(){var e=o(this);n[e.attr("name")]=e.val()}),o.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:n,loader:!0}).done(function(e){i.location=s.options.onboardingRedirect}).fail(function(e,t,a){})))})},storeCheckedValue:function(e,t){e=e.map(function(){return this.value}).get().join(",");t.val(e)},destroy:function(){o.removeData(this.element[0],n)}},o.fn[n]=function(t,a){return this.each(function(){var e=o.data(this,n);e?e[t]&&e[t](a):o.data(this,n,new s(this,t))})},o.fn[n].defaults={},o(function(){o("[data-"+n+"]")[n]()})}(jQuery,window),function(s){"use strict";var n="onboarding-subscribe",o="active",a="d-none",e="click."+n,t="change."+n,l=null;function i(e,t){this.element=s(e),this.options=s.extend({},s.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.$subscriptionTab=this.element.find("[data-subscribe-tab]"),this.$subscriptionContent=this.element.find("[data-subscribe-content]"),this.$subscriptionSwitch=this.element.find("[data-subscribe-switch-title]"),this.$subscriptionPromo=this.element.find("[data-subscribe-promo]"),this.$subscriptionPromoImg=this.element.find("[data-subscribe-promo-image]"),this.$subscriptionPlanNextBtn=this.element.find("[data-btn-onboarding-plan-next-btn]"),this.$subscriptionBackBtn=this.element.find("[data-onboarding-subscribe-back-btn]"),this.$ccFormInputs=this.element.find(".cc-form-inputs"),this.$chbxIntlPayment=this.element.find(".intl-payment-wrap"),this.$intlPayment=this.$chbxIntlPayment.find("[data-intl-payment]"),this.noCcRequired=!1,this.handleEvent(),this.initSwitch()},handleEvent:function(){var i=this;this.$subscriptionTab.off(e).on(e,function(){var e=s(this),t=e.data().subscribeTab,a=e.find('input[name="switch_plan"]').val(),n=s(".ywah-onboarding-checkout");void 0===a||a.length<1||(l=a,i.element.find('input[name="plan_code"]').val(a),s('.checkout-form-promo input[name="plan_code"]').val(a),s("[data-cart-detail-wrap]").hide(),i.element.find('input[name="gift_card_code"]').val(""),s("[data-promo-code-open-popup-btn]").removeClass("d-none").addClass("d-inline-block"),n.find(".title-wrapper").show(),n.find(".cc-form-inputs").show(),n.find(".intl-payment-wrap").show(),e.hasClass("active")||(i.$subscriptionTab.removeClass(o),e.addClass(o),i.$subscriptionContent.removeClass(o),i.element.find('[data-subscribe-content="'+t+'"]').addClass(o),s(".apply-code span").trigger("click"),"function"==typeof recurlyData.previewPurchase&&recurlyData.previewPurchase()))}),this.$subscriptionSwitch.off(t).on(t,function(e){e.preventDefault(),i.element.find('[data-subscribe-tab="tab-'+s(this).val()+'"]').trigger("click")}),this.element.off("applied-code").on("applied-code",function(e,t){e.preventDefault(),void 0!==t.noccrequired&&t.noccrequired&&(i.element.find('input[name="plan_code"]').val(t.plan_code),i.noCcRequired=!0,i.element.find(".validate-error").hide(),i.$ccFormInputs.addClass(a),i.$chbxIntlPayment.addClass(a),i.$subscriptionTab.addClass(a),i.$subscriptionContent.addClass(a),i.$subscriptionPromo.html(t.plan_data.name?"<h5>  <span>SUBSCRIPTION: </span>  "+t.plan_data.name+"</h5>":"").removeClass(a).css("display","block"),i.$subscriptionPromoImg.removeClass(a).css("display","block"),i.$subscriptionSwitch.parent().css("display","none")),"function"==typeof recurlyData.previewPurchase&&recurlyData.previewPurchase()}).off("cancel-code").on("cancel-code",function(e){e.preventDefault(),i.noCcRequired&&(i.element.find('input[name="plan_code"]').val(l),i.noCcRequired=!1,i.element.find(".validate-error").hide(),i.$ccFormInputs.removeClass(a),i.$ccFormInputs.find("label.error").hide(),i.$ccFormInputs.find("input[type=text]").val("").removeClass("error"),i.$ccFormInputs.find(".ico.ico-cards").removeClass().addClass("ico ico-cards"),i.$chbxIntlPayment.removeClass(a),i.$intlPayment.prop("checked",!1).triggerHandler("click"),i.$subscriptionTab.removeClass(a),i.$subscriptionContent.removeClass(a),i.$subscriptionPromo.addClass(a).css("display","none"),i.$subscriptionPromoImg.addClass(a).css("display","none"),i.$subscriptionSwitch.parent().css("display","block"),i.element.find(".onboarding-plan-item.onboarding-plan-primary").trigger("click")),"function"==typeof recurlyData.previewPurchase&&recurlyData.previewPurchase()}),this.$subscriptionBackBtn.off(e).on(e,function(e){e.preventDefault();e=s(this).data("to-step");void 0!==e&&2===parseInt(e)?(s(".onboarding-start-profile").hide(),s(".onboarding-checkout-plan-list").show()):(s(".onboarding-start-profile").show(),s(".onboarding-checkout-plan-list").hide()),s(".onboarding-checkout").hide()}),this.$subscriptionPlanNextBtn.off(e).on(e,function(e){e.preventDefault();var t=s(".ywah-onboarding-plan-list"),a=t.find('input[name="switch_plan"]:checked'),n=a.parent("label"),i=s(".ywah-onboarding-checkout-new"),e=n.find("[data-subscribe-title]").html().replace(/<[^>]+>/gi," "),n=n.find("[data-subscribe-desc]").html();i.find('input[name="plan_code"]').val(a.val()),i.find("[data-onboarding-plan-detail-wrap]").html("<h5><span>SUBSCRIPTION:</span>"+e+"</h5>"+n),t.closest(".onboarding-checkout-plan-list").hide(),s(".onboarding-checkout").show()})},updatePlanTitleBox:function(){var e=this.element.find("[data-subscribe-tab]:not(.active)").find("[data-subscribe-title]").html().replace(/<[^>]+>/gi," ");this.$subscriptionSwitch.text("SWITCH TO "+s("<p>"+e+"</p>").text())},initSwitch:function(){this.element.find("[data-subscribe-tab].active").trigger("click")},destroy:function(){s.removeData(this.element[0],n)}},s.fn[n]=function(t,a){return this.each(function(){var e=s.data(this,n);e?e[t]&&e[t](a):s.data(this,n,new i(this,t))})},s.fn[n].defaults={},s(function(){s("[data-"+n+"]")[n]()})}(jQuery,window),function(n,a){"use strict";var i="onboarding-tabs",s="active";function o(e,t){this.element=n(e),this.options=n.extend({},n.fn[i].defaults,this.element.data(),t),this.init()}o.prototype={init:function(){this.$formProcess=n("#form-onboarding-process"),this.$processContainer=n("[data-onboarding-process]"),this.$contentTabs=this.$processContainer.find("[data-content]"),this.$btnSkipStep=this.$processContainer.find("[data-skip-step]"),this.$btnNextStep=this.$processContainer.find("[data-next-step]"),this.$btnBackStep=this.$processContainer.find("[data-back-step]"),this.$headerDesktop=this.element.find(".header-main-desktop"),this.$headerMobile=this.element.find(".header-main-mobile"),this.$headerCurrent=n.fn.isMobile()?this.$headerMobile:this.$headerDesktop,this.$navTabs=this.element.find("[data-item]"),this.$navTabStart=this.element.find("[data-onboarding-start]"),this.handleEvent(),this.handleShowBack()},handleEvent:function(){var a=this;this.$navTabStart.on("click",function(e){e.preventDefault(),a.$navTabs.eq(0).click()}),this.$navTabs.on("click",function(e){var t=n(e.currentTarget),e=t.data("item");t.hasClass(s)||(a.$navTabs.removeClass(s),a.$contentTabs.addClass("d-none"),a.$processContainer.find('[data-content="'+e+'"]').removeClass("d-none"),a.element.find('[data-item="'+e+'"]').addClass(s).removeClass("disabled"),n.fn.isMobile()&&(n(".onboarding-thumbnail .row").hasClass("slick-initialized")&&n(".onboarding-thumbnail .row").slick("unslick"),n.fn.initSliderOnBoardingProcess(n('[data-content="'+e+'"]'))),a.handleShowBack())}),this.$btnNextStep.on("click",function(e){n(this).closest("[data-content]").find('input[type="hidden"]').val().length&&a.handleNextStep(!0)}),this.$btnSkipStep.on("click",function(e){e.preventDefault(),a.handleNextStep(!1)}),this.$btnBackStep.on("click",function(e){e.preventDefault();e=a.$headerCurrent.find("[data-item].active").prev();0<e.length&&e.trigger("click")})},handleNextStep:function(e){var t=this.$headerCurrent.find("[data-item].active").next(),a=this.element.find("[data-item].active");0<t.length?(e&&a.addClass("completed"),t.trigger("click")):this.submitForm()},handleShowBack:function(){void 0!==this.$headerCurrent.find("[data-item].active").prev().data("item")?this.$btnBackStep.find("span").show():this.$btnBackStep.find("span").hide()},submitForm:function(){var e=this,t=this.generateDataSend();ywah_onboarding_helper.submit_onboarding_process_step(e.$formProcess,t,function(){a.location=e.$formProcess.data("onboarding-redirect")})},generateDataSend:function(){var a={};return this.$formProcess.find('input[type="hidden"]').each(function(){var e=n(this),t=e.val(),e=e.attr("name");a[e]=t}),a},destroy:function(){n.removeData(this.element[0],i)}},n.fn[i]=function(t,a){return this.each(function(){var e=n.data(this,i);e?e[t]&&e[t](a):n.data(this,i,new o(this,t))})},n.fn[i].defaults={},n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(s){"use strict";var e=s(".playlist-collection .action-wrapper"),t=s(".playlist-collection .action-wrapper p");e.click(function(){s(this).find("p").is(":hidden")?(t.hide(),t.closest(".demand-item").css("z-index","auto"),s(this).find("p").show(),s(this).closest(".demand-item").css("z-index",2)):(s(this).find("p").hide(),s(this).closest(".demand-item").css("z-index","auto"))}),s(document).click(function(){e.is(event.target)||e.has(event.target).length||(t.hide(),e.closest(".demand-item").css("z-index","auto"))});var n="playlist-action-control",i="click."+n,o="d-none",l=!1;function r(e,t){this.element=s(e),this.options=s.extend({},s.fn[n].defaults,this.element.data(),t),this.init()}r.prototype={init:function(){var e=this;e.$actionBtnDelete=e.element.find("[data-delete-playlist]"),e.$modalDeletePlaylist=s("[data-playlist-delete-modal]"),e.$modalBtnDelete=e.$modalDeletePlaylist.find("[data-btn-accept]"),e.$modalDeleteMessage=e.$modalDeletePlaylist.find(".general-error"),e.$formDelete=e.$modalDeletePlaylist.find("form.form"),e.$loadingDelete=e.$modalDeletePlaylist.find(".img-loading"),e.$actionBtnRename=e.element.find("[data-rename-playlist]"),e.$modalRenamePlaylist=s("[data-playlist-rename-modal]"),e.$modalBtnRename=e.$modalRenamePlaylist.find("[data-btn-rename-playlist]"),e.$modalNewPlaylistNameInput=e.$modalRenamePlaylist.find('[name="new-playlist-name"]'),e.$modalRenameMessage=e.$modalRenamePlaylist.find(".general-error"),e.$formRename=e.$modalRenamePlaylist.find("form.form"),e.$loadingRename=e.$modalRenamePlaylist.find(".img-loading"),e.$actionPlaylistRemoveVideo=e.element.find("[data-playlist-remove-video]"),e.$actionBtnDeleteCached=null,e.$actionBtnRenameCached=null,e.handleEvents()},handleEvents:function(){var a=this;a.$actionBtnRename.off(i).on(i,function(){a.$modalRenamePlaylist.modal("show");var e=s(this),t=e.data("playlist-name");return a.$modalRenameMessage.html(""),a.$actionBtnRenameCached=e,a.$modalRenamePlaylist.find('input[name="new-playlist-name"]').val(t).focus(),void 0!==t&&0<t.length&&a.$modalBtnRename.prop("disabled",!1),!1}),a.$modalBtnRename.off(i).on(i,function(e){e.preventDefault(),a.renamePlaylistNameEvent(s(this))}),a.$modalNewPlaylistNameInput.off("input").on("input",function(e){e.preventDefault(),a.$modalRenameMessage.html(""),0<a.$modalNewPlaylistNameInput.val().length?a.$modalBtnRename.prop("disabled",!1):a.$modalBtnRename.prop("disabled",!0)}),a.$actionBtnDelete.off(i).on(i,function(e){return e.preventDefault(),a.$modalDeletePlaylist.modal("show"),a.$modalDeleteMessage.html("").removeClass("mb-3"),a.$modalBtnDelete.prop("disabled",!1),a.$actionBtnDeleteCached=s(this),!1}),a.$modalBtnDelete.off(i).on(i,function(e){e.preventDefault(),a.$modalDeleteMessage.html("").removeClass("mb-3"),a.deletePlaylistEvent()}),a.$actionPlaylistRemoveVideo.off(i).on(i,function(){a.removeVideoFromPlaylist(s(this))}),s(".playlist-wrapper .nav-link").on("shown.bs.tab",function(){a.updateHeightHeader()}),s("[data-playlist-delete-modal], [data-playlist-rename-modal]").on("show.bs.modal hidden.bs.modal",function(){a.updateHeightHeader()}),s(".lists-accordion-collapse").on("shown.bs.collapse hidden.bs.collapse",function(){a.updateHeightHeader()})},renamePlaylistNameEvent:function(e){var n=this,t=n.$modalNewPlaylistNameInput.val(),a=n.$actionBtnRenameCached.parents(".lists-accordion-item").find(".lists-accordion-desc h5");void 0!==t&&t?(n.$modalBtnRename.prop("disabled",!0),l||(l=!0,n.$formRename.addClass(o),n.$loadingRename.removeClass(o),s.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:e.data("action"),playlistId:n.$actionBtnRenameCached.data("playlist-id"),playlistName:t,formCheck:e.data("form-check")},loader:!0}).done(function(e){e&&e.success?(n.$modalRenamePlaylist.modal("hide"),a.text(e.data.playlistName),n.$actionBtnRenameCached.data("playlist-name",e.data.playlistName)):(n.$modalRenameMessage.html(e.data.message),n.$modalNewPlaylistNameInput.focus()),n.$modalBtnRename.prop("disabled",!1),l=!1,n.$formRename.removeClass(o),n.$loadingRename.addClass(o)}).fail(function(e,t,a){n.$modalRenameMessage.html("Invalid request."),n.$modalNewPlaylistNameInput.focus(),n.$modalBtnRename.prop("disabled",!1),l=!1,n.$formRename.removeClass(o),n.$loadingRename.addClass(o)}))):(n.$modalRenameMessage.html("The playlist name is required."),n.$modalNewPlaylistNameInput.focus())},deletePlaylistEvent:function(){var n=this,t=n.$actionBtnDeleteCached;n.$modalBtnDelete.prop("disabled",!0),l||(l=!0,n.$formDelete.addClass(o),n.$loadingDelete.removeClass(o),s.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:t.data("action"),playlistId:t.data("playlist-id"),formCheck:t.data("form-check")},loader:!0}).done(function(e){e&&e.success?(n.$modalDeletePlaylist.modal("hide"),t.parents(".lists-accordion-item").remove()):n.$modalDeleteMessage.html(e.data.message).addClass("mb-3"),n.$modalBtnDelete.prop("disabled",!1),l=!1,n.$formDelete.removeClass(o),n.$loadingDelete.addClass(o)}).fail(function(e,t,a){n.$modalDeleteMessage.html("Invalid request.").addClass("mb-3"),n.$modalBtnDelete.prop("disabled",!1),l=!1,n.$formDelete.removeClass(o),n.$loadingDelete.addClass(o)}))},removeVideoFromPlaylist:function(e){var t=e.data(),a=e.parents(".demand-item-col"),n=s("#playlist-total-videos-"+t.playlistId),i=parseInt(n.text());s.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:t.action,videoId:t.videoId,playlistId:t.playlistId,formCheck:t.formCheck},loader:!0}).done(function(e){a.remove(),i--,n.text(0<i?i:0)}).fail(function(e,t,a){})},updateHeightHeader:function(){var e=s("header"),t=s(".header-main");setTimeout(function(){t.trigger("update-height",e)},0)},destroy:function(){s.removeData(this.element[0],n)}},s.fn[n]=function(t,a){return this.each(function(){var e=s.data(this,n);e?e[t]&&e[t](a):s.data(this,n,new r(this,t))})},s.fn[n].defaults={},s(function(){s("[data-"+n+"]")[n]()})}(jQuery,window),function(s,o){"use strict";var l,n="playlist-watched";function i(e,t){this.element=s(e),this.options=s.extend({},s.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.$win=s(o),this.$watchedWrapper=this.element.find("[data-playlist-watched-wrapper]"),this.itemsPerPage=this.options.itemsPerPage?parseInt(this.options.itemsPerPage):12,this.getVideos(1),this.handleEvent()},handleEvent:function(){var e=this;this.$win.on("scrolled",function(){l&&e.element.is(":visible")&&l.enable()})},getVideos:function(t){var n=this;s.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"GET",data:{action:n.options.action,ipp:n.itemsPerPage,page:t,formcheck:n.options.nonce},loader:!0}).done(function(e){e&&e.success&&(l&&l.destroy(),0===parseInt(e.data.total)?n.renderErrorBlock(n.options.errorMessage):n.renderVideoItems(e.data.watchedHtml,e.data.total,t))}).fail(function(e,t,a){n.renderErrorBlock(e.responseText)})},convertWatchedDate:function(){var t=this;this.element.find("[data-convert-to-date]").not(".convert-date").each(function(){var e=s(this).data("convert-to-date"),e=moment(e,"X").format("lll"),e=moment(new Date(e)).format(t.options.dateFormat);s(this).html(e).addClass("convert-date")})},renderVideoItems:function(e,t,a){var n=this,i=a*n.itemsPerPage;t<i&&(i=t),1===a?n.$watchedWrapper.html(e):n.$watchedWrapper.append(e),this.convertWatchedDate(),s(o).trigger("scrollmagic:change"),i<t&&(l=new Waypoint({element:n.$watchedWrapper,handler:function(e){"down"===e&&n.getVideos(a+1)},enabled:!1,offset:"bottom-in-view"}))},renderErrorBlock:function(e){this.$watchedWrapper.html('<label class="text-danger watched-message">'+e+"</label>")},destroy:function(){s.removeData(this.element[0],n)}},s.fn[n]=function(t,a){return this.each(function(){var e=s.data(this,n);e?e[t]&&e[t](a):s.data(this,n,new i(this,t))})},s.fn[n].defaults={dateFormat:"MM/DD/YYYY"},s(function(){s("[data-"+n+"]")[n]()})}(jQuery,window),function(r,d){var c="set-height";function n(e,t){this.element=r(e),this.options=r.extend({},r.fn[c].defaults,this.element.data(),t),this.init()}n.prototype={init:function(){var e,t,a=r(d),n=this.element,i=this.options,s=r(n.find(i.item)),o=s.find(i.inner),n=n.find(i.img),l=n.length?n[0].naturalWidth/n[0].naturalHeight:1;setTimeout(function(){a.on("resize."+c,function(){d.Modernizr.mq("(max-width: 991px)")?s.removeAttr("style"):(t=o.height()+80,e=i.type?s.filter(":eq(0)").outerHeight():s.width()/l,s.height(e<t?t:e))}).trigger("resize."+c)},250)},destroy:function(){r.removeData(this.element[0],c)}},r.fn[c]=function(t,a){return this.each(function(){var e=r.data(this,c);e?e[t]?e[t](a):d.console&&console.log(t?t+" method is not exists in "+c:c+" plugin has been initialized"):r.data(this,c,new n(this,t))})},r.fn[c].defaults={item:".one-half",inner:".inner",img:".img-block-1"},r(function(){r("[data-"+c+"]")[c]()})}(jQuery,window),function(r){"use strict";var n="subscription-plan";function i(e,t){this.element=r(e),this.options=r.extend({},r.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.$input=this.element.find("[data-radiobox]"),this.$btnPlanDetail=this.element.find("[data-btn-plan-detail]"),this.handleEvent()},handleEvent:function(){var n=this,i=n.options.classPlanDetail,s=n.options.classDescParagraph,o=n.options.classWrapForm,l=n.options.classHidden;this.$input.on("change",function(e){r(i).addClass(l),r(s).addClass(l);var t=r(this).closest(o).find(i),a=r(this).data("subs-id")||"";t.removeClass(l),n.element.find('input[name="subscription_id"]').val(a)}),this.$btnPlanDetail.on("click",function(e){r(this).closest(o).find(s).removeClass(l)}),r(".modal-subscription-plan").on("hidden.bs.modal",function(e){var t=r(this);t.find(".plan-detail").addClass("d-none"),t.find(".description-paragraph").addClass("d-none")}),r("#subscriptionPlan").on("shown.bs.modal",function(e){var t=r(this),a=t.find('input[name="subscription_id"]').val();void 0!==a&&a&&t.find(".deactivate-plan-group").show().find("input").attr("data-subs-id",a)})},handleUpdatePlan:function(t){var e=t.parents("form"),a=e.serializeArray();e.find(".text-danger").remove(),r.ajax({type:"POST",url:yahAjax.ajaxurl,data:a,cache:!1,success:function(e){e.success?r(".modal").modal("hide"):console.log("Fail scenario")},error:function(e){console.log(e);e='<label class="text-danger">'+e.statusText+"</label>";t.parents("form").append(e)}})},destroy:function(){r.removeData(this.element[0],n)}},r.fn[n]=function(t,a){return this.each(function(){var e=r.data(this,n);e?e[t]&&e[t](a):r.data(this,n,new i(this,t))})},r.fn[n].defaults={classPlanDetail:".plan-detail",classDescParagraph:".description-paragraph",classWrapForm:".form-group-wrap",classHidden:"d-none"},r(function(){r("[data-"+n+"]")[n]()})}(jQuery,window),function(r,l){"use strict";var i="tabs";function n(e,t){this.element=r(e),this.options=r.extend({},r.fn[i].defaults,this.element.data(),t),this.init()}n.prototype={init:function(){var e,t,a,s=this,n=this.element,o=this.options;this.vars={ctrlEls:n.find(o.tabControls),contentEls:n.find(o.contentEls),idx:0},t=e=s,a=l.location.hash,n=t.vars.contentEls,e=t.options,e=-1===n.index(n.filter("."+e.active))?0:n.index(n.filter("."+e.active)),""!==a&&(e=-1===n.index(n.filter(a))?e:n.index(n.filter(a))),t.goTo(e),this.vars.ctrlEls.on("click."+i,function(e){var t=r(this),a=s.vars.ctrlEls,n=t.attr("href"),i=o.offset;t.is("."+o.active)||t.is(o.disabled)||s.goTo(a.index(t)),o.scroll&&""!==n.replace("#","").trim()&&(history.pushState?(history.pushState(null,null,n),i=r(n).offset().top+i,r("html, body").animate({scrollTop:i},700)):l.location.hash=n),e.preventDefault()})},goTo:function(e,t){var a=this,n=a.options,i=a.vars.ctrlEls,s=a.vars.contentEls,o=s.filter(":eq("+e+")"),l=o.attr("id");a.vars.idx=e,i.add(s).removeClass(n.active).end().filter(":eq("+e+")").add(o).addClass(n.active),l&&r("#"+l+"-panel-key").addClass("openned");n=i.filter(":eq("+e+")"),l=n.parent(".dropdown-content");l.length&&(l.parent(".dropdown").find("a.dropdown-tabs span").html(n.text()),s.find(".simple-blk").data("set-height").init()),t||a.element.triggerHandler("cusAfterChange",[i[e]]),r("[data-get-teacher]")["get-teacher"]("setHeightTeacherBox")},destroy:function(){r.removeData(this.element[0],i)}},r.fn[i]=function(t,a){return this.each(function(){var e=r.data(this,i);e?e[t]?e[t](a):l.console&&console.log(t?t+" method is not exists in "+i:i+" plugin has been initialized"):r.data(this,i,new n(this,t))})},r.fn[i].defaults={active:"active",disabled:".disabled",tabControls:".control",contentEls:"> .tab-container > .tab-content",offset:0,scroll:!0},r(function(){r("[data-tabs]")[i]()})}(jQuery,window),function(l){"use strict";var n="teacher-training-events";function i(e,t){this.element=l(e),this.options=l.extend({},l.fn[n].defaults,this.element.data(),t),this.$eventLoader=this.element.find("[data-event-loader]"),this.$eventList=this.element.find("[data-event-list]"),this.init()}i.prototype={init:function(){this.getEvents()},getEvents:function(){var s=this,e=s.options,o=0;l.ajax({url:yahAjax.ajaxurl,dataType:"json",method:"GET",data:{action:e.action,formcheck:e.formCheck,region_id:"all",start_date:e.currentDate},success:function(e){if(s.$eventLoader.hide(),e.data&&e.data.events){var t,a=e.data.events,n=moment().unix(),i=function(e,t){t.startDate>n&&(o++,s.renderEventHtml(t))};for(t in a)a.hasOwnProperty(t)&&l.each(a[t],i)}0===o&&s.$eventList.html("We’re sorry, no events are available.")},error:function(){s.$eventLoader.hide(),s.$eventList.html("There was an error with this request. Please try again soon.")}})},renderEventHtml:function(e){e='<div class="table-tr">  <div class="table-tr__start">    <div class="table-tr__start-date">'+e.startDay+'</div>    <div class="table-tr__start-desc">Starts</div>  </div>  <div class="table-tr__start">    <div class="table-tr__start-date">'+e.endDay+'</div>    <div class="table-tr__start-desc">Ends</div>  </div>  <div class="table-tr__instructor table-tr__instructor_full">    <div class="table-tr__instructor-name">'+e.staff+'</div>    <div class="table-tr__start-desc">Instructor</div>  </div>  <div class="table-tr__location">    <div class="table-tr__location-name">'+e.location+'</div>    <div class="table-tr__start-desc">Location</div>  </div>  <div class="table-tr__btn">    <a href="'+e.slug+'" class="btn btn_green">'+this.options.ctaText+"</button>  </div></div>";this.$eventList.append(e)},destroy:function(){l.removeData(this.element[0],n)}},l.fn[n]=function(t,a){return this.each(function(){var e=l.data(this,n);e?e[t]&&e[t](a):l.data(this,n,new i(this,t))})},l.fn[n].defaults={},l(function(){l("[data-"+n+"]")[n]()})}(jQuery,window),function(f){"use strict";var n="teacher-training-schedule",v=3,e=f(document);function i(e,t){this.element=f(e),this.options=f.extend({},f.fn[n].defaults,this.element.data(),t),this.$scheduleLoader=this.element.find("[data-schedule-loader]"),this.$scheduleTable=this.element.find("[data-schedule-table]"),this.init()}i.prototype={init:function(){this.getEvents(),e.on("click","[data-btn-expand-details]",function(e){var t=f(this);t.parents(".table-tr").toggleClass("act"),t.toggleClass("less"),t.hasClass("less")?t.text("Collapse"):t.text("Expand details"),f(".slider").slick({slidesToShow:3,dots:3<v,arrows:!1,centerMode:!0,variableWidth:!1,infinite:!0,focusOnSelect:!1,adaptiveHeight:!0,responsive:[{breakpoint:1168,settings:{slidesToShow:1,dots:!0,arrows:!1,centerMode:!0,variableWidth:!0,infinite:!0,focusOnSelect:!0}},{breakpoint:590,settings:{dots:!0,arrows:!1,slidesToShow:1,slidesToScroll:1,variableWidth:!1,adaptiveHeight:!0,centerMode:!1}}]})}),e.on("click",".instruc__desc-more",function(){var e=f(this);e.parent(".instruc__desc").find(".instruc__desc-text").toggleClass("act"),e.toggleClass("less"),e.hasClass("less")?e.text("Less"):e.text("Read More")})},getEvents:function(){var s=this,e=s.options,o=e.currentEventId,l=!1,r=0;f.ajax({url:yahAjax.ajaxurl,dataType:"json",method:"GET",data:{action:e.action,formcheck:e.formCheck,isNewSchedule:1,ttid:e.currentEventId,region_id:"all",event_type_id:e.eventTypeId,start_date:e.currentDate},success:function(e){if(s.$scheduleLoader.hide(),e.data&&e.data.events){var t,a=e.data.events,n=moment().unix(),i=function(e,t){t.startDate>n&&(r++,o.toString().toLowerCase()===t.deepLinkId.toString().toLowerCase()&&(l=!0),s.renderEventHtml(t))};for(t in a)a.hasOwnProperty(t)&&f.each(a[t],i);l&&setTimeout(function(){var e=f('[data-tt="'+o+'"]');f("html, body").animate({scrollTop:e.offset().top-f("header").outerHeight()},1e3,"swing"),e.find("[data-btn-expand-details]").trigger("click")},750)}0===r&&s.$scheduleTable.html("We’re sorry, no events are available.")},error:function(){s.$scheduleLoader.hide(),s.$scheduleTable.html("There was an error with this request. Please try again soon.")}})},renderEventHtml:function(e){var t,a,n,i,s,o,l,r,d,c,h,u=this,p=function(e,t){return 0<e.length?"<h4>"+t+"</h4><div>"+e+"</div>":""},m='<div class="table-tr" data-event-id="'+e.classId+'" data-tt="'+e.deepLinkId+'">  <div class="table-tr__start">    <div class="table-tr__start-date">'+e.startDay+'</div>    <div class="table-tr__start-desc">Starts</div>  </div>  <div class="table-tr__start">    <div class="table-tr__start-date">'+e.endDay+'</div>    <div class="table-tr__start-desc">Ends</div>  </div>  <div class="table-tr__instructor">    <div class="table-tr__instructor-name">'+e.teacherNames+'</div>    <div class="table-tr__start-desc">Instructor</div>  </div>  <div class="table-tr__location">    <div class="table-tr__location-name">'+e.location+'</div>    <div class="table-tr__start-desc">Location</div>  </div>  <div class="table-tr__schedule">    '+(d=e.formatType,h=c="","weekend-fri-sun"===d||"weekend-sat-sun"===d?(c=u.options.iconWeekends,h="Weekends"):"weekday"===d?(c=u.options.iconWeekdays,h="Weekdays"):"all-inclusive"===d&&(c=u.options.iconAllInclusive,h="All-Inclusive"),c&&h?'<img src="'+c+'" alt="'+h+'" class="table-tr__schedule-weekday"><div class="table-tr__schedule-name">'+h+"</div>":"")+'  </div>  <div class="table-tr__btn">    '+(r="",0<(l=e).depositLink.length||0<l.payInFullLink.length?(0<l.payInFullLink.length&&(l.useMtPayInFull?r+='<a href="" class="btn btn_orange btn_hidden" data-is-mt-checkout="1" data-mt-product-btn data-yw-type="tt" data-location-id="'+l.mtLocationId+'" data-product-id="'+l.payInFullLink+'" data-membership-checkout="'+l.isMemPIF+'">Pay in full</a>':r+='<a href="'+l.payInFullLink+'" target="_blank" class="btn btn_orange btn_hidden">Pay in full</a>'),0<l.depositLink.length&&(l.useMtDeposit?r+='<a href="" class="btn btn_green btn_hidden" data-is-mt-checkout="1" data-mt-product-btn data-yw-type="tt" data-location-id="'+l.mtLocationId+'" data-product-id="'+l.depositLink+'" data-membership-checkout="'+l.isMemDeposit+'">Pay deposit</a>':r+='<a href="'+l.depositLink+'" target="_blank" class="btn btn_green btn_hidden">Pay deposit</a>')):r+='<a href="'+u.options.contactLink+'" target="_blank" class="btn btn_transparent btn_hidden">Contact us</a>',r+='<button class="btn btn_green btn_expand" data-btn-expand-details>Expand details</button>')+"  </div></div>",p='<div class="table-tr table-tr_expand bg_semilight" data-expanded-event-id="'+e.classId+'">  <div class="expand">    '+p(e.freeClassInfo,"Free information session")+"    "+((o=e).isModCurriculum&&0<o.modCurrNotice.length?"<h4>Modified Curriculum Notice</h4><div>"+o.modCurrNotice+"</div>":"")+"    "+(i=e.teachers,s="<h4>Instructors</h4>",f.each(i,function(e,t){s+='<div class="instruc'+((e+1)%2==0?" instruc_reverce":"")+'" data-teacher-id="'+t.teacherId+'">  <img src="'+t.teacherImg+'" alt="'+t.teacherName+'" class="instruc__img">  <div class="instruc__desc">    <div class="instruc__desc-name">'+t.teacherName+'</div>    <div class="instruc__desc-text">'+t.teacherBio+'</div>    <div class="instruc__desc-more">Read more</div>  </div></div>'}),s)+"    "+(0<(n=e.datesLocations).length?'<h4>Dates and location</h4><div class="col_50-wrap">'+n+"</div>":"")+"    "+p(e.pricingTuition,"Pricing and tuition")+"    "+p(e.classRequirements,"Class requirements")+"    "+(t=e.gallery,a="",v=t.length,0<t.length&&(a+='<div class="slider slider_big muted muted-bg_light">',f.each(t,function(e,t){a+='<div class="gal-item"><img src="'+t+'" alt="Event Gallery #'+(e+1)+'"></div>'}),a+="</div>"),a)+"  </div></div>";this.$scheduleTable.append(m+p)},destroy:function(){f.removeData(this.element[0],n)}},f.fn[n]=function(t,a){return this.each(function(){var e=f.data(this,n);e?e[t]&&e[t](a):f.data(this,n,new i(this,t))})},f.fn[n].defaults={},f(function(){f("[data-"+n+"]")[n]()})}(jQuery,window),function(e,t){var i,s,o,l,r,d,c,h,a,u=t.createElement.bind(t),p=t.createTextNode.bind(t),m=u("span");(a=m.style).position="absolute",a.whiteSpace="pre",a.visibility="hidden",a=function(a,n){var e=!a.ownerDocument;if(!e&&e!==t){for(o=r=0,h=!(l=1),s=a.clientWidth,i=(a.textContent||a.innerText).replace(/\n/g," ");null!==a.firstChild;)a.removeChild(a.firstChild);a.appendChild(m),i.replace(/ /g,function(e,t){l!==n&&(m.appendChild(p(i.substr(o,t-o))),s<m.clientWidth?(o=h?(c=i.substr(o,t+1-o),t+1):(c=i.substr(o,r-o),r),(d=u("span")).appendChild(p(c)),a.appendChild(d),h=!0,l++):h=!1,r=t+1,m.removeChild(m.firstChild))}),a.removeChild(m),d=u("span"),(e=d.style).display="inline-block",e.overflow="hidden",e.textOverflow="ellipsis",e.whiteSpace="nowrap",e.width="100%",d.appendChild(p(i.substr(o))),a.appendChild(d)}},e.clamp=a}(window,document),$(window).on("hero:ready resized",function(e,t){var a,n;t&&(a=t.find("[data-text-overflow-clamp]"),n=function(n){a.each(function(){var e=$(this),t=e.data("not-init-clamp"),a=e.find("p"),e=void 0!==n?n:parseInt(e.data("line-clamp"));t||clamp(a[0],e)})},t.data("not-init-text-overflow")||!1?n(0):n())}),function(n,e){"use strict";function i(e,t,a){a?e.removeClass("open"):(t.setPotstion(),e.addClass("open").css("height","auto"))}var s="textpanel",o=n("body"),l=n(e);function r(e,t){this.element=n(e),this.options=n.extend({},n.fn[s].defaults,this.element.data(),t),this.init()}r.prototype={init:function(){var e,t=this,a=this.options.extraStyles||"";this.element.wrap('<div class="textpanel-wrap based-styles '+a+'" style="height: '+this.options.maxHeight+'px"></div>'),this.element.height()>this.options.maxHeight&&((a=this.element.closest(".textpanel-wrap")).append('<button type="button" class="view-more"><span class="inner"><span></span><span></span><span></span></span></button>'),this.clonedEl=a.clone().addClass("cloned").appendTo(o),this.element.closest(".textpanel-wrap").on("click."+s,".view-more",function(){var e=n(".textpanel-wrap.open");e.length&&!e.is(t.clonedEl)&&i(e,t,!0),i(t.clonedEl,t,!1)}),this.clonedEl.on("click."+s,".view-more",function(){i(n(this).closest(".textpanel-wrap"),t,!0)})),l.on("resize."+s,function(){clearTimeout(e),e=setTimeout(function(){t.hide()},100)})},hide:function(){i(n(".textpanel-wrap.open"),this,!0)},setPotstion:function(){var e,t,a;this.clonedEl&&(e=(t=this.element.closest(".textpanel-wrap")).width(),t=(a=t.offset()).top,a=a.left,this.clonedEl.css({top:t,left:a,width:e+30}))},clean:function(){this.clonedEl&&this.clonedEl.remove(),this.element.unwrap().parent().find(".view-more").remove()},destroy:function(){this.clean(),n.removeData(this.element[0],s)},reInit:function(){this.clean(),this.init()}},n.fn[s]=function(t,a){return this.each(function(){var e=n.data(this,s);e?e[t]&&e[t](a):n.data(this,s,new r(this,t))})},n.fn[s].defaults={maxHeight:80,extraStyles:null},n(function(){n("[data-"+s+"]")[s]()})}(jQuery,window),function(n){"use strict";var i="time-line";function s(e,t){this.element=n(e),this.options=n.extend({},n.fn[i].defaults,this.element.data(),t),this.init()}s.prototype={init:function(){this.element.slick(this.options)},destroy:function(){n.removeData(this.element[0],i)}},n.fn[i]=function(t,a){return this.each(function(){var e=n.data(this,i);e?e[t]&&e[t](a):n.data(this,i,new s(this,t))})},n.fn[i].defaults={dots:!1,infinite:!1,slidesToShow:10,responsive:[{breakpoint:992,settings:{slidesToShow:3,slidesToScroll:3,dots:!1,arrows:!1}}]},n(function(){n("[data-"+i+"]")[i]()})}(jQuery,window),function(l){"use strict";var n="toggle-action",e="click."+n,t="document-click."+n,i="active";function s(e,t){this.element=l(e),this.options=l.extend({},l.fn[n].defaults,this.element.data(),t),this.options.url=this.options.url||yahAjax.ajaxurl,this.init()}s.prototype={init:function(){this.$doc=l(document),this.cacheDOM(),this.handleEvent()},cacheDOM:function(){this.$currentBtn=null,this.$currentList=null,this.dataSend={}},handleEvent:function(){var o=this;this.element.off(e).on(e,function(e){e.preventDefault(),e.stopPropagation(),o.handleActionList(l(this))}),l("[data-action-item]").off(e).on(e,function(e){e.preventDefault();var t=l(e.currentTarget),a=t.closest(".action-list").attr("id"),n=l('[data-target-action="#'+a+'"]'),i=t.data(),s=l("#"+a).is("[data-playlist-control]"),a=i.toggleModal;if(o.getCurrentAction(n),s)return e.stopPropagation(),o.hideAction(),void l(a).modal("show");o.dataSend=i,a&&a.length?(o.hideAction(),l(a)["playlist-framework-modal"]("showModal",{modalId:a,dataItem:o.dataSend})):o.callAjax(function(e){o.handleActionCall(e,t)})}),this.element.off("trigger-hide-action").on("trigger-hide-action",function(e){o.getCurrentAction(l(e.currentTarget)),o.hideAction()}),this.$doc.off(t).on(t,function(e,t){var a=l("[data-target-action].active");a.length&&(o.getCurrentAction(a),o.clickOuside(t))})},clickOuside:function(e){var t,a,n=e.target;t=this.$currentBtn,a=this.$currentList,!t.is(n)&&0===t.has(n).length&&t.hasClass(i)&&!a.is(n)&&0===a.has(n).length&&a.hasClass(i)&&this.hideAction()},handleActionCall:function(e,t){e.success&&e.data.text&&(t.data("is-save",e.data.saved?0:1),e.data.saved?(t.closest(".demand-item-actions").find(".heart-filled").show(),t.closest(".demand-item-actions").find(".heart-empty").hide()):(t.closest(".demand-item-actions").find(".heart-filled").hide(),t.closest(".demand-item-actions").find(".heart-empty").show())),this.hideAction()},handleActionList:function(e){var t=e.hasClass(i),a=l("[data-toggle-action]");this.getCurrentAction(e),a.not(e).each(function(){var e=l(this).parents(".demand-item-bubble-list").siblings(".action-list");l(this).removeClass(i),e.removeClass(i)}),t?this.hideAction():this.showAction()},getCurrentAction:function(e){var t=e.data("target-action");this.$currentBtn=e,this.$currentList=l(t)},hideAction:function(){this.$currentBtn.removeClass(i),this.$currentList.removeClass(i)},showAction:function(){this.$currentBtn.addClass(i),this.$currentList.addClass(i)},callAjax:function(t){var e=this.dataSend;l.ajax({type:this.options.method,url:this.options.url,data:e,cache:!1,success:function(e){"function"==typeof t&&t(e)},error:function(e){console.log(e)}})},destroy:function(){l.removeData(this.element[0],n)}},l.fn[n]=function(t,a){return this.each(function(){var e=l.data(this,n);e?e[t]&&e[t](a):l.data(this,n,new s(this,t))})},l.fn[n].defaults={method:"POST",url:yahAjax.ajaxurl},l(function(){l("[data-"+n+"]")[n]()})}(jQuery,window),function(h,a){"use strict";var s="upcoming-events",d={},l={},u=null;function n(e,t){this.element=h(e),this.options=h.extend({},h.fn[s].defaults,this.element.data(),t),this.allowedAccess=this.options.allowedAccess||!1,this.init()}n.prototype={init:function(){var e=this;e.$wrapperSlider=e.element.find("[data-slider]"),e.$bubble=h("[data-bubble-countdown]"),e.renderBubble(),e.getUpcomingEventData(function(){e.initUpcomingEvents()})},initUpcomingEvents:function(){var i=this,s=i.getUpcomingEvents();s&&s.length&&(i.renderUpcomingEvents(s),i.$wrapperSlider.on("init",function(e){i.renderCountdown(s[0])}),i.$wrapperSlider.on("beforeChange",function(e,t,a,n){i.$bubble.find(".bubble-wrap").addClass("d-none"),clearTimeout(u)}),i.$wrapperSlider.on("afterChange",function(e,t){var a=h(".slick-current").find("[data-event-id]").data("event-id"),n=h.grep(s,function(e){return e.eventId===a});0<n.length&&(i.$bubble.find(".bubble-wrap").addClass("d-none"),i.renderCountdown(n[0]))}))},getUpcomingEventData:function(t){h.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:this.options.action,siteIds:this.options.siteIds,formCheck:this.options.formCheck,marianatekLocations:this.options.marianatekLocations,marianatekShowLiveClasses:this.options.showLiveClasses,marianatekShowPhysicalStudios:this.options.showPhysicalStudios},loader:!0}).done(function(e){e&&e.success&&(d=e.data.upcomingClasses,l=e.data.bgImages,"function"==typeof t&&t())}).fail(function(e,t,a){})},getUpcomingEvents:function(){for(var e=this.options.numberOfClass?parseInt(this.options.numberOfClass):1,t=!!this.options.useEndDate,a=d?d.length:0,n=moment().unix(),i=[],s=0,o=0;o<a;o++){var l=d[o],r=n<(t?l.endTimeZonedStamp:l.startTimeZonedStamp)&&!l.isCanceled;if(e<=s)break;r&&(l.eventId=l.siteId+"-"+l.classId,i.push(l),s++)}return 1<i.length&&i.sort(function(e,t){return e.startTimeZonedStamp>t.startTimeZonedStamp}),i},renderUpcomingEvents:function(e){var t=this,s="",o=t.options.lineClamp||2;e.forEach(function(e){var t=e.siteId+"-"+e.classId,a=e.siteId+"_"+e.classId,n=l?l[Math.floor(Math.random()*l.length)]:"",i=e.level?"<span>"+e.level+"</span>":"";s+='<div class="slider-item" style="background-image: url('+n+');" data-slider-event-id="'+a+'">  <img src="'+n+'" alt="">  <div class="slider-caption d-md-block slider-description">    <div class="live-content-item__level">'+i+"</div>    <h2>"+e.title+"</h2>    <h5>"+e.teacherName+"<span>"+e.duration+' min</span></h5>    <div class="description-paragraph" data-text-overflow-clamp data-line-clamp="'+o+'">      <p>'+e.desc+'</p>    </div>    <div class="upcoming-cta-result"></div>    <div data-event-id="'+t+'"></div>  </div></div>'}),t.$wrapperSlider.html(s),h(a).trigger("hero:ready",[t.element]),setTimeout(function(){t.$wrapperSlider.slick({slidesToShow:1,dots:!0,autoplay:!0,autoplaySpeed:t.options.autoplaySpeed,pauseOnFocus:!0,pauseOnHover:!0,vertical:!0,arrows:!1,infinite:!0,useCSS:!1}).on("beforeChange",function(){h(".slider-item").removeClass("slide-prev slide-next")}).on("setPosition",function(){h(".slick-current.slick-active").prev().addClass("slide-prev"),h(".slick-current.slick-active").next().addClass("slide-next")})},500)},renderErrorMessage:function(e){var t=e.message;h('[data-slider-event-id="'+e.itemId+'"] .upcoming-cta-result').html(t).toggleClass("d-inline-block",!(void 0===t||""===t))},renderBubble:function(){function e(e){for(var t='<div class="number-grp-wrp">',a=e;0<=a;a--)t+='<div class="num num-'+a+'"><p>'+a+"</p></div>";return t+="</div>"}h("[data-bubble-countdown]").html('<div class="bubble-wrap d-none">  <div class="fuzzy-bubble solid-color"></div>  <div class="description-bubble">    <div class="description-bubble__content description-bubble__countdown d-none" data-start-countdown>      <p class="text-in-bubble context-3">LIVE IN</p>      <div class="timer">        <div class="timer--clock">          <div class="minutes-group clock-display-grp" data-minutes-group>            <div class="first number-grp" data-first-number>'+e(9)+'</div>            <div class="second number-grp" data-second-number>'+e(9)+'</div>          </div>          <div class="clock-separator"><p>m</p></div>          <div class="seconds-group clock-display-grp" data-seconds-group>            <div class="first number-grp" data-first-number>'+e(9)+'</div>            <div class="second number-grp" data-second-number>'+e(9)+'</div>          </div>          <div class="clock-separator"><p>s</p></div>        </div>      </div>    </div>    <div class="description-bubble__content description-bubble__text d-none" data-end-countdown>      <a href="#" class="button-join-class" data-btn-livestream-join>         <span class="button-circle"></span>         <span class="button-title">'+this.options.ctaJoinText+"</span>      </a>    </div>  </div></div>")},renderCountdown:function(e){var t,a,n,i;void 0!==e&&(t=this,a=e.startTimeZonedStamp-moment().unix(),n=this.options.timeShowCountdown?parseInt(this.options.timeShowCountdown):3600,i=this.options.timeShowCta?parseInt(this.options.timeShowCta):300,a<n&&n<this.options.limitTimeShowCountdown?t.allowedAccess?(t.startCountdownEvent(a,i),i=parseInt(e.duration),i=isNaN(i)?-1800:-60*i,h("[data-end-countdown] .button-join-class").attr({"data-site-id":e.siteId,"data-class-id":e.classId,"data-class-schedule-id":e.classSchedId,"data-room-name":e.resourceName,"data-loc-id":e.locId,"data-loc-name":e.location,"data-title":e.title,"data-teacher":e.teacherName,"data-is-free":0,"data-level":e.level,"data-yoga-type":e.yogaType,"data-start-stamp":e.startTimeZonedStamp,"data-end-stamp":parseInt(e.startTimeZonedStamp)-i,"data-plugin-name":s}).find("h5").removeClass("text-white").text(t.options.ctaJoinText)):(t.$bubble.find(".bubble-wrap").removeClass("d-none"),h("[data-end-countdown]").removeClass("d-none").find(".button-join-class").removeAttr("data-btn-livestream-join").attr("href",t.options.ctaUpgradeUrl).find("h5").addClass("text-white").text(t.options.ctaUpgradeText)):t.$bubble.find(".bubble-wrap").addClass("d-none"))},startCountdownEvent:function(a,n){function i(e,t){TweenMax.killTweensOf(e.find(".number-grp-wrp")[0]),TweenMax.to(e.find(".number-grp-wrp")[0],1,{y:-e.find(".num-"+t)[0].offsetTop})}var s=this,e=s.element,t=e.find("[data-minutes-group]"),e=e.find("[data-seconds-group]"),o=t.find("[data-first-number]"),l=t.find("[data-second-number]"),r=e.find("[data-first-number]"),d=e.find("[data-second-number]"),c=function(){var e,t;n=n||300,a<=0||a<=n?s.stopCountdownEvent():(h("[data-start-countdown]").removeClass("d-none"),--a,e=Math.floor(a/60),t=a-60*e,e=e<10?"0"+e:e.toString(),t=t<10?"0"+t:t.toString(),i(o,(t=e+t)[0]),i(l,t[1]),i(r,t[2]),i(d,t[3]),u=setTimeout(c,1e3))};setTimeout(function(){s.$bubble.find(".bubble-wrap").removeClass("d-none"),h("[data-start-countdown]").addClass("d-none"),h("[data-end-countdown]").addClass("d-none")},800),u=setTimeout(c,1e3)},stopCountdownEvent:function(){h("[data-start-countdown]").addClass("d-none"),h("[data-end-countdown]").removeClass("d-none")},destroy:function(){h.removeData(this.element[0],s)}},h.fn[s]=function(t,a){return this.each(function(){var e=h.data(this,s);e?e[t]&&e[t](a):h.data(this,s,new n(this,t))})},h.fn[s].defaults={autoplaySpeed:3e3,lineClamp:2,allowedAccess:!1,ctaJoinText:"Join",ctaUpgradeText:"Upgrade",ctaUpgradeUrl:"/account/#payments",limitTimeShowCountdown:6e3},h(function(){h("[data-"+s+"]")[s]()})}(jQuery,window),function(s){"use strict";var n="save-profile-validate",e="click."+n,a=/^(?!\s)(?!.*\s$)[a-zA-Z0-9\s()-]+$/,i=/^([a-zA-Z0-9_.+-])+\@(?!-)+(([a-zA-Z0-9-])+[a-z0-9]\.)+([a-zA-Z0-9]{2,4})+$/,o=/^([a-zA-Z0-9_.-])+\@(?!-)+(([a-zA-Z0-9-])+[a-z0-9]\.)+([a-zA-Z0-9]{2,4})+$/;function l(e,t){this.element=s(e),this.options=s.extend({},s.fn[n].defaults,this.element.data(),t),this.init()}l.prototype={init:function(){this.cacheDOM(),this.initSaveProfileValidate(),this.handleEvent()},initSaveProfileValidate:function(){s.validator.addMethod("regexName",function(e,t){return a.test(e)}),s.validator.addMethod("regexEmail",function(e,t){return(void 0!==yahAjax.allowPlus&&yahAjax.allowPlus?i:o).test(e)}),this.$form.validate({rules:{first_name:{required:!0,maxlength:50,regexName:!0},last_name:{required:!0,maxlength:50,regexName:!0},email:{required:!0,regexEmail:!0},address:{required:!0},postalcode:{required:!0}},messages:{first_name:"Please enter a valid first name",last_name:"Please enter a valid last name",email:"Please enter a valid email address",address:"Please enter an address",postalcode:"Please enter a postal code"},errorPlacement:function(e,t){t.closest(".form-group-wrap").after(e.addClass("validate-error"))}})},cacheDOM:function(){this.$form=this.element,this.$btnSaveProfile=this.element.find("[data-save-profile]")},handleEvent:function(){var t=this;this.$btnSaveProfile.off(e).on(e,function(e){e.preventDefault(),t.handleSaveProfileValidate(s(this),function(e){t.callAjaxSaveProfile(e)})})},handleSaveProfileValidate:function(e,t){var a=e.siblings("input, textarea");this.$form.validate().element(a)&&"function"==typeof t&&t(e)},callAjaxSaveProfile:function(n){var i=n.closest("form");s.fn.callAjaxGlobal({method:"POST",url:yahAjax.ajaxurl,dataType:"json",data:{action:i.find('input[name="wpAction"]').val(),first_name:i.find("#firstName").val(),last_name:i.find("#LastName").val(),email_addr:i.find("#email").val(),formcheck:i.find("input#checkForm").val()},loader:!0}).done(function(e){var t,a=n.siblings(".form-control");e.success?(a.data("text-content",a.val()),n.addClass("d-none"),a.removeClass("text-change")):("first_name"!==(a=a.data("input"))&&"last_name"!==a||(t='{"'+a+'":"'+e.data.message+'"}'),i.validate().showErrors(JSON.parse(t))),i.find("textarea").scrollTop(0)}).fail(function(e,t,a){})},destroy:function(){s.removeData(this.element[0],n)}},s.fn[n]=function(t,a){return this.each(function(){var e=s.data(this,n);e?e[t]&&e[t](a):s.data(this,n,new l(this,t))})},s.fn[n].defaults={method:"POST",url:yahAjax.upcomingLiveClasses},s(function(){s("[data-"+n+"]")[n]()})}(jQuery,window),function(l,e){"use strict";var n="vertical-line";function i(e,t){this.element=l(e),this.options=l.extend({},l.fn[n].defaults,this.element.data(),t),this.init()}i.prototype={init:function(){this.cacheDOM(),this.bindEvent()},cacheDOM:function(){this.$win=l(e),this.controller=null},bindEvent:function(){var e=this;this.$win.on("load resized scrollmagic:change",function(){e.handleScrollMagic()})},initScrollMagic:function(){var e,t,a,n,i=this.element,s=i.next(),o=i.closest("section");this.controller=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onLeave"}}),s.length&&new ScrollMagic.Scene({triggerElement:s[0],offset:"-"+l("[data-menu-header]").outerHeight(),duration:(t=o,a=s,n=(e=i).outerWidth(!0),e=t.outerHeight(!0),t=t.offset().top,e-n-(a.offset().top-t))}).setPin(i[0],{pushFollowers:!1}).addTo(this.controller)},destroyScrollMagic:function(){this.controller&&(this.controller.destroy(!0),this.controller=null)},handleScrollMagic:function(){l.fn.isMobile()?this.destroyScrollMagic():(this.destroyScrollMagic(),this.initScrollMagic())},destroy:function(){l.removeData(this.element[0],n)}},l.fn[n]=function(t,a){return this.each(function(){var e=l.data(this,n);e?e[t]&&e[t](a):l.data(this,n,new i(this,t))})},l.fn[n].defaults={},l(function(){l(".wrapper-vertical-line")[n]()})}(jQuery,window),function(d){function n(){return document.body.clientWidth}function i(){return window.innerHeight}function c(){return window.innerWidth>=e}var h=d(window),t=d(document),e=(d("body"),768);d.fn.isMobile=function(){return!c()};function u(){return h.scrollTop()}function s(){var a="sticky-header",e=d(".header-main"),n=e.parent(),i=e.find(".header-main-desktop"),s=e.find(".header-main-mobile"),o=c()?i:s,l=d(".header-ticket");function r(e){var t;e.hasClass("no-sticky-header")||(t=u(),e.toggleClass(a,50<t&&!d("body").hasClass("logged-in")))}function t(e){var t=l.length?l.outerHeight():0;e&&e.removeClass(a),e=o=c()?i:s,n.css({height:e.outerHeight()+t}),r(e)}e.addClass("header-fixed"),e.on("update-height",function(e){t(),h.trigger("scrollmagic:change")}),t(o),h.on("scrolled",function(){r(o)}).on("resized",function(){t(o)})}function o(){var e=d(".wrapper-vertical-line");0!==e.length&&e.each(function(){var e=d(this),t=e.innerWidth(),a=-(e.innerHeight()/2+7);e.addClass("rotate-line"),e.css({top:t,transform:"translateX("+a+"px)"})})}function l(){d(".testimonial-slider .row").slick({infinite:!1,slidesToShow:1,centerMode:!0})}function r(){d(".plan-wrapper").slick({infinite:!1,slidesToShow:1,centerMode:!0,centerPadding:"20px"})}function p(){d(".link-carousel__slider").slick({infinite:!1,slidesToShow:1,centerMode:!0,centerPadding:"20px"})}var a,m=n(),f=i(),v=c(),g=u();d.fn.handleHeightAutoComplete=function(e){function t(){i.css("max-height","")}var a,n,i=d(".ui-autocomplete-wrapper .ui-autocomplete"),s=d(".header-ticket").outerHeight()||0;i.length&&e&&!d.fn.isMobile()?(t(),a=d("#search_tagsinput").outerHeight()/2,n=i.css("max-height").split("px")[0],i.css("max-height",parseInt(n)-s-a+"px")):t()},d.fn.handleActionOnDemand=function(){var t=d("[data-list-action-pos]"),e=t.find(".action-list");0!==e.length&&(t.each(function(e){e=e%2==0?"action-right":"action-left";d(this).find(".action-list").addClass(e)}),t.off("mouseenter").on("mouseenter",function(){d(this).addClass("active")}).off("mouseleave").on("mouseleave",function(){var e=d(this).find("[data-toggle-action]");t.removeClass("active"),e.trigger("trigger-hide-action")}))},d.fn.initSliderOnBoardingProcess=function(e){var t=d(".onboarding-thumbnail .row");e&&(t=e.find(".onboarding-thumbnail .row")),t.slick({infinite:!1,slidesToShow:1,centerMode:!0,centerPadding:"0px"})},d.fn.callAjaxGlobal=function(e){var t=d("[data-loader]");return d.ajax({url:e.url,method:e.method||"GET",data:e.data||{},dataType:"json",beforeSend:function(){e.loader&&t.fadeIn()},complete:function(){e.loader&&t.fadeOut("slow")}})},d.fn.getHashValue=function(e){var t,a={},e=e||window.location.href;if(-1<e.indexOf("#")){t=e.slice(e.indexOf("#")+1).split(/[&]+(?=(?:[a-z]))/g);for(var n=0;n<t.length;n++){var i=t[n].split("=");1<i.length&&(a[i[0]]=i[1])}}return a},d.fn.convertToCapitalize=function(e){return e.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()})};function b(){d('[data-toggle="tab"]').unbind("click").bind("click",function(){var e=d(this),t=e.attr("href");e.hasClass("active")||(t=t,location.hash=t)});var e=location.hash,t=[];e&&(t=d('[data-toggle="tab"][href="'+e+'"]'),(t=t)[0]&&t.click())}var y=function(e,t,a){for(var a=d('<div class="slider-dots '+a+'"></div>'),n=[],i=0;i<t;i++)n+=['<div class="slider-dots-item"></div>'].join("");a.append(n),e.empty().append(a)},w={common:{init:function(){var t,e,a,n,i;s(),o(),d(".live-schedule-block .description-bubble__countdown").addClass("d-none"),d(".live-schedule-block .description-bubble__text").removeClass("d-none"),a=d("[data-form-pwd]"),t=a.find("#password"),a.find(".show-pwd").on("click",function(e){e.preventDefault();e=d(this);"hide"===e.text().toLowerCase()?(e.html("Show"),t.attr("type","password")):(e.html("Hide"),t.attr("type","text"))}),d.fn.handleActionOnDemand(),(n=d(".carousel-widget-slider")).length&&d.each(n,function(e,t){var a=d(t),n=a.find(".demand-item"),t=a.parent().find(".slider-control .slider-nav");n.length<=3||a.slick({slidesToShow:1,dots:!0,arrows:!1,centerMode:!0,variableWidth:!0,infinite:!0,focusOnSelect:!1,adaptiveHeight:!1,appendArrows:t,appendDots:t,prevArrow:'<span class="slick-prev" role="button"></span>',nextArrow:'<span class="slick-next" role="button"></span>',responsive:[{breakpoint:1168,settings:{slidesToShow:1,dots:!0,arrows:!1,centerMode:!0,variableWidth:!0,infinite:!0,focusOnSelect:!0}},{breakpoint:591,settings:{dots:!0,arrows:!1,slidesToShow:1,slidesToScroll:1,variableWidth:!1,centerMode:!1}}]})}),(n=d(".carousel-widget-slider-2")).length&&d.each(n,function(e,t){var a=d(t),n=a.find(".demand-item"),t=a.parent().find(".slider-control .slider-nav");n.length<=3||a.slick({slidesToShow:2,slidesToScroll:1,dots:!0,infinite:!1,arrows:!0,appendArrows:t,appendDots:t,prevArrow:'<span class="slick-prev" role="button"></span>',nextArrow:'<span class="slick-next" role="button"></span>',responsive:[{breakpoint:1024,settings:{slidesToShow:1}}]})}),e=d(".logo-list-slider"),i=e.find(".logo-item").length,a=e.parent(),n=a.find(".slider-control .slider-nav"),y(n,i,"slider-dots-logo"),e.slick({infinite:!0,centerMode:!0,dots:!1,arrows:!1,asNavFor:".slider-dots-logo",slidesToShow:3,slidesToScroll:1,centerPadding:0,responsive:[{breakpoint:768,settings:{slidesToShow:1,centerPadding:"25%"}}]}),a.find(".slider-dots").slick({infinite:!0,slidesToShow:3,slidesToScroll:1,asNavFor:".logo-list-slider",arrows:!1,dots:!1,centerMode:!0,focusOnSelect:!0,centerPadding:"20%"}),d(".benefits-list-slider").slick({infinite:!1,arrows:!0,slidesToShow:1,prevArrow:'<span class="slick-prev" role="button"></span>',nextArrow:'<span class="slick-next" role="button"></span>'}),n=d(".style-list-slider"),i=n.find(".style-item").length,e=n.parent(),a=e.find(".slider-control .slider-nav"),y(a,i,"slider-dots-style"),n.slick({slidesToShow:3,slidesToScroll:1,dots:!1,infinite:!0,asNavFor:".slider-dots-style",arrows:!0,centerMode:!0,prevArrow:'<span class="slick-prev" role="button"></span>',nextArrow:'<span class="slick-next" role="button"></span>',centerPadding:"20%",responsive:[{breakpoint:1024,settings:{slidesToShow:3,centerPadding:0}},{breakpoint:768,settings:{arrows:!1,slidesToShow:1,centerPadding:"25%"}}]}),e.find(".slider-dots").slick({infinite:!0,slidesToShow:3,slidesToScroll:1,asNavFor:".style-list-slider",arrows:!1,dots:!1,centerMode:!0,focusOnSelect:!0,centerPadding:"20%"}),a=d(".testimonial-block-slider"),i=a.find(".testimonial-block-item").length,n=a.parent(),e=n.find(".slider-control .slider-nav"),y(e,i,"slider-dots-testimonial"),a.slick({slidesToShow:3,slidesToScroll:1,centerPadding:0,dots:!1,infinite:!0,asNavFor:".slider-dots-testimonial",arrows:!0,centerMode:!0,prevArrow:'<span class="slick-prev" role="button"></span>',nextArrow:'<span class="slick-next" role="button"></span>',responsive:[{breakpoint:768,settings:{arrows:!1,slidesToShow:1,centerPadding:"25%"}}]}),n.find(".slider-dots").slick({infinite:!0,slidesToShow:3,slidesToScroll:1,asNavFor:".testimonial-block-slider",arrows:!1,dots:!1,centerMode:!0,focusOnSelect:!0,centerPadding:"20%"}),(i=d(".live-schedule-slider")).length&&(a=i.find(".live-content-item"),n=i.parent().find(".slider-control .slider-nav"),a.length<=3||i.slick({slidesToShow:3,slidesToScroll:1,dots:!0,infinite:!1,arrows:!0,appendArrows:n,appendDots:n,prevArrow:'<span class="slick-prev" role="button"></span>',nextArrow:'<span class="slick-next" role="button"></span>',responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:768,settings:{dots:!1,arrows:!1,slidesToShow:1,centerMode:!0,centerPadding:"20%"}}]})),d(".membership-plans-widget .section__content").slick({slidesToShow:3,dots:!1,arrows:!1,centerMode:!1,variableWidth:!1,infinite:!1,focusOnSelect:!1,adaptiveHeight:!1,responsive:[{breakpoint:1168,settings:{slidesToShow:1,dots:!0,arrows:!1,centerMode:!0,variableWidth:!0,infinite:!0,focusOnSelect:!0}},{breakpoint:590,settings:{dots:!0,arrows:!1,slidesToShow:1,slidesToScroll:1,variableWidth:!1,adaptiveHeight:!0,infinite:!0}}]}),d.fn.isMobile()&&(l(),r(),d.fn.initSliderOnBoardingProcess(),p())},finalize:function(){}}};h.on("breakpoint:change",function(){d.fn.isMobile()?(l(),r(),d.fn.initSliderOnBoardingProcess(),p()):(d(".testimonial-slider .row").hasClass("slick-initialized")&&d(".testimonial-slider .row").slick("unslick"),d(".plan-wrapper").hasClass("slick-initialized")&&d(".plan-wrapper").slick("unslick"),d(".onboarding-thumbnail .row").hasClass("slick-initialized")&&d(".onboarding-thumbnail .row").slick("unslick"),d(".link-carousel__slider").hasClass("slick-initialized")&&d(".link-carousel__slider").slick("unslick"))}),t.off("click.improve").on("click.improve",function(e){t.trigger("document-click",e)}),h.on("resized",function(){o()}),h.on("load",function(){function e(){a.slideUp(150,function(){a.remove(),n.trigger("update-height",t),d.fn.handleHeightAutoComplete(!1)})}var t,a,n,i,s,o,l,r;b(),t=d("header"),a=d(".header-ticket"),n=d(".header-main"),i=a.data("notification-id"),s=a.data("cookie-expires"),o=a.data("time-to-show"),l="_yah_notification_status_",r=d.cookie(l+i),a.on("click",".x-close",function(){e(),d.cookie(l+i,"hide",{expires:s||365,path:"/"})}),setTimeout(function(){"hide"===r?e():a&&a.hasClass("d-none")&&a.removeClass("d-none").slideDown(800,function(){n.trigger("update-height",t),d.fn.handleHeightAutoComplete(!0)})},o||1e3),d(".center").slick({arrows:!0,centerMode:!0,centerPadding:"0",slidesToShow:3,responsive:[{breakpoint:768,settings:{arrows:!1,centerMode:!0,centerPadding:"0",slidesToShow:3}},{breakpoint:480,settings:{arrows:!1,centerMode:!0,centerPadding:"40px",slidesToShow:1}}]})}),h.off("resize.improve").on("resize.improve",function(){window.clearTimeout(a),a=window.setTimeout(function(){var e,t=n(),a=i();h.trigger("resized",[d("[data-upcoming-events]")]),m!==t&&(h.trigger("width-change"),e=c(),v!==e&&(h.trigger("breakpoint:change"),v=e),m=t),f!==a&&(h.trigger("height-change"),f=a)},180)}).off("scroll.improve").on("scroll.improve",function(){var e=u();h.trigger("scrolled"),e<g?h.trigger("scroll:up",e):g<e&&h.trigger("scroll:down",e),g=e});var C={fire:function(e,t,a){t=void 0===t?"init":t,""!==e&&w[e]&&"function"==typeof w[e][t]&&w[e][t](a)},loadEvents:function(){C.fire("common"),d.each(document.body.className.replace(/-/g,"_").split(/\s+/),function(e,t){C.fire(t),C.fire(t,"finalize")}),C.fire("common","finalize")}};d(document).ready(C.loadEvents),d.fn.reCaptchaExecute=function(e){grecaptcha.execute(),"function"==typeof e&&e()},d.fn.reCaptchaReset=function(e){grecaptcha.reset(),"function"==typeof e&&e()},d("#login").on("shown.bs.modal",function(e){var t=encodeURI(d(location).attr("href"));d(this).find('input[name="redirect_to"]').val(t)}),d(".vertical-line").toggleClass("d-none",!d(".wrapper-vertical-line").length);function $(e,t,a,n){n={email:x.email,"data-products":x.memberPlanType||null,"data-siteID":n.siteId,"data-classID":n.classId,"data-classScheduleID":n.classScheduleId,"data-locID":n.locId,"data-locName":n.locName,"data-title":n.title,"data-teacher":n.teacher,"data-level":n.level,"data-is-free":n.isFree,"data-yoga-type":n.yogaType,"data-start-stamp":n.startStamp,"data-start-date":void 0!==n.startStamp?moment(n.startStamp,"X").format("YYYY-MM-DD"):"n/a","data-start-time":void 0!==n.startStamp?moment(n.startStamp,"X").format("LTS Z"):"n/a",zoomLink:a,error_message:n.errorMessage||null},d.ajax({url:yahAjax.ajaxurl,dataType:"json",method:"POST",data:{name:e?"zoomlink_SUCCESS":"zoomlink_FAILED",status:e,item_id:t,message:n,action:"ywah__live_log"},success:function(e){}})}function k(e,t,a){var n;"live-player"===e?(void 0!==(n=yahAjax.microServiceMsg||null)&&n&&/(locked|does not have any available configuration)/g.test(a)&&(a=n),d("[data-live-player-error-wrap]").show().find(".live-error-msg").html("Error: "+a)):d("[data-"+e+"]")[e]("renderErrorMessage",{itemId:t,message:a})}var x={};t.on("click","[data-btn-livestream-join]",function(e){e.preventDefault();var n,i,t,a=d(this),o=a.attr("data-site-id")+"_"+a.attr("data-class-id"),l={siteId:a.attr("data-site-id"),classId:a.attr("data-class-id"),classScheduleId:a.attr("data-class-schedule-id"),roomName:a.attr("data-room-name"),startStamp:a.attr("data-start-stamp"),endStamp:a.attr("data-end-stamp"),locId:a.attr("data-loc-id"),locName:a.attr("data-loc-name"),title:a.attr("data-title"),teacher:a.attr("data-teacher"),level:a.attr("data-level"),yogaType:a.attr("data-yoga-type"),isFree:a.attr("data-is-free"),jwtToken:""};d('[data-slider-event-id="'+o+'"] .upcoming-cta-result').html("").removeClass("d-inline-block"),d('[data-target="item-'+o+'"] .schedule-cta-result').html("").addClass("d-none"),n=a.attr("data-plugin-name"),i=o,t=function(){var n,i,s,e;l.jwtToken=x.jwtToken,n=a.attr("data-plugin-name"),i=o,e={siteId:(s=l).siteId,classId:s.classId,classScheduleId:s.classScheduleId,roomName:s.roomName,startStamp:s.startStamp,endStamp:s.endStamp,jwtToken:s.jwtToken},d.fn.callAjaxGlobal({url:yahAjax.microServiceUrl,dataType:"json",method:"POST",data:e,loader:!0}).done(function(e){var t,a;e.success?(a=function(e,t,a,n){if(void 0!==a&&""!==a&&void 0!==n&&""!==n){if(void 0!==e&&""!==e)return e;if(void 0!==t&&""!==t)return"https://zoom.us/j/"+t+"?prefer=1&un="+a+"&uel="+n}return null}(void 0!==e.data.streamUrl&&e.data.streamUrl,t=void 0!==e.data.videoId&&e.data.videoId,x.firstNameEncoded,x.emailEncoded))&&($(1,t,a,s),(a=window.open(a,"_self"))?a.focus():d(location).attr("href",url)):(s.errorMessage=e.data.msg,$(0,"","",s),k(n,i,e.data.msg))}).fail(function(e,t,a){e=void 0!==e.responseJSON.data.msg?e.responseJSON.data.msg:"";s.errorMessage=e,$(0,"","",s),k(n,i,e)})},d.fn.callAjaxGlobal({url:yahAjax.ajaxurl,method:"POST",data:{action:"ywah__live_verify_access"},loader:!0}).done(function(e){e.success&&e.data.jwtToken?(x=e.data,void 0!==t&&t()):k(n,i,e.data.message)}).fail(function(e,t,a){k(n,i,"Something went wrong! Please refresh the page and try again.")})}),d("[data-form-validate]").each(function(){var t=d(this),e=t.find("#card_number"),a=t.find("#zip"),n=t.find("#card_exp"),i=t.find("#card_cvv"),s=function(e){e=e.data("next-input"),e=t.find(e);return e.is(":hidden")?s(e):e};e.payment("formatCardNumber"),e.on("change keyup",function(){var e=d(".ico-cards"),t=d(this).val(),a=d.payment.cardType(t),n=d.payment.validateCardNumber(t),t=s(d(this));e.removeClass().addClass("ico ico-cards ico-card-"+a),n&&t.length&&t.focus()}),a.on("change keyup",function(){var e=d(this).val().length,t=parseInt(d(this).attr("maxlength")||5),a=s(d(this));e===t&&a.length&&a.focus()}),n.on("change keyup",function(){var e=d(this).val().length,t=parseInt(d(this).attr("maxlength")||5),a=s(d(this));e===t&&d(this).focusout();var n=d(this).closest(".form-group").find(".validate-error"),n=n.length&&n.is(":hidden")||!n.length;d(this).closest("[data-form-validate]")["form-validate"]("handleValidate"),e===t&&n&&a.length&&a.focus()}),i.on("change keyup",function(){var e=d(this).val().length,t=parseInt(d(this).attr("maxlength")||4),a=s(d(this));e===t&&a.length&&a.focus()})}),d("[data-global-search-form]").each(function(e,t){d(t).validate({rules:{s:"required"},messages:{s:""}})}),d("[data-subscribe-email-input]").on("input",function(){d('.checkout-form-gift-card input[name="user_email"]').val(d(this).val())}),d(document).on("show.bs.modal",".modal",function(){var e=1040+10*d(".modal:visible").length;d(this).css("z-index",e),setTimeout(function(){d(".modal-backdrop").not(".modal-stack").css("z-index",e-1).addClass("modal-stack")},0)}),d("#share-links").on("click",function(e){e.preventDefault(),d(".share-block").toggle("slow")}),d("[data-share-links]").on("click",function(e){e.preventDefault(),d(".yw-share-link-item").toggle("slow")});var S,_=d(".top-corner-promo").html(),T=d('<li class="menu-top-promo"></li>').html(_);function I(e){for(var t,a=window.location.search.substring(1).split("&"),n=0;n<a.length;n++)if((t=a[n].split("="))[0]===e)return t[1],decodeURIComponent(t[1]);return!1}_&&d(".main-navigation").append(T),I("product")&&I("sector")&&(T="?product="+I("product")+"&sector="+I("sector"),d.cookie("is_optimum_fitness",T)),(I("product")&&I("sector")||d.cookie("is_optimum_fitness"))&&(S=(S=d.cookie("is_optimum_fitness"))||"?product="+I("product")+"&sector="+I("sector"),d(".subscribe-modal-form-btn").on("click",function(e){e.preventDefault(),window.location.href=d(this).find("a").attr("href")+S})),d(".optimum-login").on("click",function(e){window.location.href=d(this).attr("data-url")})}(jQuery);